try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="aafdfd03-9458-4f31-8e16-f455609419c3",e._sentryDebugIdIdentifier="sentry-dbid-aafdfd03-9458-4f31-8e16-f455609419c3")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7551],{11481:(e,t,a)=>{"use strict";a.d(t,{eN:()=>u,ic:()=>x,u1:()=>m});var n=a(68208),s=a(92545),r=a(82735),l=a(44563),i=a(57982),o=a(35388);a(66107);let d="recaptcha-v2-container",c=(0,r.eU)("idle");function u(){let{resolvedTheme:e}=(0,i.D)(),t="dark"===e?"dark":"light",a=(0,l.Pj)();return{getRecaptchaV2Token:()=>new Promise((e,n)=>{!async function(){try{var s,r,l;if(!(null==(l=window)||null==(r=l.grecaptcha)||null==(s=r.enterprise)?void 0:s.render))throw Error("reCAPTCHA Enterprise not loaded");let i=new Promise(e=>{let t=a.get(c);if("container-mounted"===t)return void e();let n=a.sub(c,()=>{let t=a.get(c);"container-mounted"===t&&(n(),e())})});a.set(c,"container-mounting"),await i;let o=document.getElementById(d);if(null==o)throw Error("reCAPTCHA V2 container not found");let u=setTimeout(()=>{a.set(c,"idle"),n(Error("reCAPTCHA V2 token timed out"))},6e4);window.grecaptcha.enterprise.render(o,{sitekey:"6Ld7ePYrAAAAAB34ovoFoDau1fqCJ6IyOjFEQaMn",callback:t=>{clearTimeout(u),a.set(c,"idle"),e(t)},"error-callback":()=>{clearTimeout(u),a.set(c,"idle"),n(Error("reCAPTCHA V2 rendering failed"))},theme:t}),a.set(c,"challenging")}catch(e){a.set(c,"idle"),n(e)}}()})}}function m(){let[e]=(0,l.fp)(c);return(0,n.jsx)(s.r,{showDialog:"idle"!==e,isLoading:!1,widget:"idle"!==e?(0,n.jsx)(p,{}):null,widgetHeight:78,protectedByText:"Protected by reCAPTCHA","data-sentry-element":"SecurityVerificationModal","data-sentry-component":"RecaptchaV2Widget","data-sentry-source-file":"get-recaptcha-token.tsx"})}function p(){let e=(0,l.Xr)(c);return(0,o.useEffect)(()=>{e("container-mounted")},[e]),(0,n.jsx)("div",{className:"recaptcha-v2-container",id:d,"data-sentry-component":"RecaptchaV2Container","data-sentry-source-file":"get-recaptcha-token.tsx"})}async function x(e){return new Promise((t,a)=>{try{var n,s,r;if(!(null==(r=window)||null==(s=r.grecaptcha)||null==(n=s.enterprise)?void 0:n.ready))return void a(Error("reCAPTCHA Enterprise not loaded"));window.grecaptcha.enterprise.ready(()=>{(async()=>{try{var n,s;if(!(null==(s=window)||null==(n=s.grecaptcha)?void 0:n.enterprise))return void a(Error("reCAPTCHA Enterprise not loaded"));let r=await window.grecaptcha.enterprise.execute("6Led_uYrAAAAAKjxDIF58fgFtX3t8loNAK85bW9I",{action:e});if(null==r)return void a(Error("Failed to get recaptcha token"));t(r)}catch(e){a()}})()})}catch(e){a()}})}},15359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCHING_PROTOCOLS=t.SERVICE_UNAVAILABLE=t.SEE_OTHER=t.RESET_CONTENT=t.REQUESTED_RANGE_NOT_SATISFIABLE=t.REQUEST_URI_TOO_LONG=t.REQUEST_TOO_LONG=t.REQUEST_TIMEOUT=t.REQUEST_HEADER_FIELDS_TOO_LARGE=t.PROXY_AUTHENTICATION_REQUIRED=t.UPGRADE_REQUIRED=t.EARLY_HINTS=t.PROCESSING=t.PRECONDITION_REQUIRED=t.PRECONDITION_FAILED=t.PERMANENT_REDIRECT=t.PAYMENT_REQUIRED=t.PARTIAL_CONTENT=t.OK=t.NOT_MODIFIED=t.NOT_IMPLEMENTED=t.NOT_FOUND=t.NOT_ACCEPTABLE=t.NON_AUTHORITATIVE_INFORMATION=t.NO_CONTENT=t.NETWORK_AUTHENTICATION_REQUIRED=t.MULTIPLE_CHOICES=t.MULTI_STATUS=t.MOVED_TEMPORARILY=t.MOVED_PERMANENTLY=t.METHOD_NOT_ALLOWED=t.METHOD_FAILURE=t.LOCKED=t.LENGTH_REQUIRED=t.INTERNAL_SERVER_ERROR=t.INSUFFICIENT_STORAGE=t.INSUFFICIENT_SPACE_ON_RESOURCE=t.IM_A_TEAPOT=t.HTTP_VERSION_NOT_SUPPORTED=t.GONE=t.GATEWAY_TIMEOUT=t.FORBIDDEN=t.FAILED_DEPENDENCY=t.EXPECTATION_FAILED=t.CREATED=t.CONTINUE=t.CONFLICT=t.BAD_REQUEST=t.BAD_GATEWAY=t.ACCEPTED=void 0,t.MISDIRECTED_REQUEST=t.USE_PROXY=t.UNSUPPORTED_MEDIA_TYPE=t.UNPROCESSABLE_ENTITY=t.UNAVAILABLE_FOR_LEGAL_REASONS=t.UNAUTHORIZED=t.TOO_MANY_REQUESTS=t.TEMPORARY_REDIRECT=void 0,t.ACCEPTED=202,t.BAD_GATEWAY=502,t.BAD_REQUEST=400,t.CONFLICT=409,t.CONTINUE=100,t.CREATED=201,t.EXPECTATION_FAILED=417,t.FAILED_DEPENDENCY=424,t.FORBIDDEN=403,t.GATEWAY_TIMEOUT=504,t.GONE=410,t.HTTP_VERSION_NOT_SUPPORTED=505,t.IM_A_TEAPOT=418,t.INSUFFICIENT_SPACE_ON_RESOURCE=419,t.INSUFFICIENT_STORAGE=507,t.INTERNAL_SERVER_ERROR=500,t.LENGTH_REQUIRED=411,t.LOCKED=423,t.METHOD_FAILURE=420,t.METHOD_NOT_ALLOWED=405,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.NETWORK_AUTHENTICATION_REQUIRED=511,t.NO_CONTENT=204,t.NON_AUTHORITATIVE_INFORMATION=203,t.NOT_ACCEPTABLE=406,t.NOT_FOUND=404,t.NOT_IMPLEMENTED=501,t.NOT_MODIFIED=304,t.OK=200,t.PARTIAL_CONTENT=206,t.PAYMENT_REQUIRED=402,t.PERMANENT_REDIRECT=308,t.PRECONDITION_FAILED=412,t.PRECONDITION_REQUIRED=428,t.PROCESSING=102,t.EARLY_HINTS=103,t.UPGRADE_REQUIRED=426,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.REQUEST_TIMEOUT=408,t.REQUEST_TOO_LONG=413,t.REQUEST_URI_TOO_LONG=414,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.RESET_CONTENT=205,t.SEE_OTHER=303,t.SERVICE_UNAVAILABLE=503,t.SWITCHING_PROTOCOLS=101,t.TEMPORARY_REDIRECT=307,t.TOO_MANY_REQUESTS=429,t.UNAUTHORIZED=401,t.UNAVAILABLE_FOR_LEGAL_REASONS=451,t.UNPROCESSABLE_ENTITY=422,t.UNSUPPORTED_MEDIA_TYPE=415,t.USE_PROXY=305,t.MISDIRECTED_REQUEST=421},20606:(e,t)=>{"use strict";t.Bt=void 0,t.Bt="Conversation is too long. Please start a new chat."},21203:(e,t,a)=>{"use strict";a.d(t,{eV:()=>s,sQ:()=>r});let n={js:"JavaScript",javascript:"JavaScript",ts:"TypeScript",typescript:"TypeScript",jsx:"React",tsx:"React",py:"Python",python:"Python",java:"Java",c:"C",cpp:"C++",cs:"C#",php:"PHP",rb:"Ruby",ruby:"Ruby",go:"Go",rs:"Rust",rust:"Rust",kt:"Kotlin",kotlin:"Kotlin",swift:"Swift",m:"Objective-C",objc:"Objective-C",scala:"Scala",shell:"Shell",bash:"Bash",sh:"Shell",powershell:"PowerShell",ps1:"PowerShell",yaml:"YAML",yml:"YAML",json:"JSON",xml:"XML",html:"HTML",css:"CSS",scss:"SCSS",sass:"Sass",less:"Less",sql:"SQL",graphql:"GraphQL",md:"Markdown",markdown:"Markdown",tex:"LaTeX",latex:"LaTeX",r:"R",matlab:"MATLAB",perl:"Perl",lua:"Lua",vim:"Vim",diff:"Diff",dockerfile:"Dockerfile",docker:"Docker",makefile:"Makefile",make:"Makefile"};function s(e){var t;return null!=(t=n[e.toLowerCase()])?t:e}function r(e){var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"py":return"python";case"json":return"json";case"css":case"scss":case"sass":return"css";case"html":return"html";case"md":return"markdown";case"yml":case"yaml":return"yaml";case"sql":return"sql";case"java":return"java";case"cpp":case"cc":case"cxx":return"cpp";case"c":return"c";case"go":return"go";case"rs":return"rust";case"php":return"php";case"rb":return"ruby";case"swift":return"swift";case"kt":return"kotlin";case"scala":return"scala";case"sh":case"bash":return"bash";case"ps1":return"powershell";case"xml":return"xml";case"graphql":case"gql":return"graphql";case"tex":return"latex";case"r":return"r";case"lua":return"lua";case"perl":case"pl":return"perl";case"vim":return"vim";case"dockerfile":return"dockerfile";case"makefile":case"make":return"makefile";default:return"text"}}},28958:(e,t,a)=>{"use strict";a.d(t,{i:()=>d});var n=a(68208),s=a(73227),r=a(71341),l=a(71035),i=a(66696),o=a(41517);let d=e=>{let{onClick:t,className:a,size:d=18,...c}=e,{copyState:u,handleClick:m}=(0,s.U)();return(0,n.jsxs)(o.$,{variant:"outline",className:(0,r.cn)("relative rounded-lg p-[6px]",a),onClick:e=>{null==t||t(e),m()},...c,"data-sentry-element":"Button","data-sentry-component":"CopyButton","data-sentry-source-file":"copy-button.tsx",children:[(0,n.jsx)(l.A,{size:d,className:(0,r.cn)("text-interactive-positive absolute left-1.5 top-1.5 rotate-90 opacity-0 transition-all duration-300",{"rotate-0 opacity-100":"copied"===u,"rotate-0 opacity-0":"resetting"===u}),"data-sentry-element":"Check","data-sentry-source-file":"copy-button.tsx"}),(0,n.jsx)(i.A,{size:d,className:(0,r.cn)("opacity-100 transition-opacity duration-300",{"opacity-0":"copied"===u}),"data-sentry-element":"Copy","data-sentry-source-file":"copy-button.tsx"})]})}},34892:(e,t,a)=>{"use strict";a.d(t,{w:()=>s});var n=a(89016);let s=(0,n.createServerReference)("60e1d464cac75ee33fb588961c6e15531dfea6b9f9",n.callServer,void 0,n.findSourceMapURL,"getProxyImage")},34963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCHING_PROTOCOLS=t.SERVICE_UNAVAILABLE=t.SEE_OTHER=t.RESET_CONTENT=t.REQUESTED_RANGE_NOT_SATISFIABLE=t.REQUEST_URI_TOO_LONG=t.REQUEST_TOO_LONG=t.REQUEST_TIMEOUT=t.REQUEST_HEADER_FIELDS_TOO_LARGE=t.PROXY_AUTHENTICATION_REQUIRED=t.UPGRADE_REQUIRED=t.EARLY_HINTS=t.PROCESSING=t.PRECONDITION_REQUIRED=t.PRECONDITION_FAILED=t.PERMANENT_REDIRECT=t.PAYMENT_REQUIRED=t.PARTIAL_CONTENT=t.OK=t.NOT_MODIFIED=t.NOT_IMPLEMENTED=t.NOT_FOUND=t.NOT_ACCEPTABLE=t.NON_AUTHORITATIVE_INFORMATION=t.NO_CONTENT=t.NETWORK_AUTHENTICATION_REQUIRED=t.MULTIPLE_CHOICES=t.MULTI_STATUS=t.MOVED_TEMPORARILY=t.MOVED_PERMANENTLY=t.METHOD_NOT_ALLOWED=t.METHOD_FAILURE=t.LOCKED=t.LENGTH_REQUIRED=t.INTERNAL_SERVER_ERROR=t.INSUFFICIENT_STORAGE=t.INSUFFICIENT_SPACE_ON_RESOURCE=t.IM_A_TEAPOT=t.HTTP_VERSION_NOT_SUPPORTED=t.GONE=t.GATEWAY_TIMEOUT=t.FORBIDDEN=t.FAILED_DEPENDENCY=t.EXPECTATION_FAILED=t.CREATED=t.CONTINUE=t.CONFLICT=t.BAD_REQUEST=t.BAD_GATEWAY=t.ACCEPTED=void 0,t.DATABASE_ERROR=t.VALIDATION_ERROR=t.MISDIRECTED_REQUEST=t.USE_PROXY=t.UNSUPPORTED_MEDIA_TYPE=t.UNPROCESSABLE_ENTITY=t.UNAVAILABLE_FOR_LEGAL_REASONS=t.UNAUTHORIZED=t.TOO_MANY_REQUESTS=t.TEMPORARY_REDIRECT=void 0,t.ACCEPTED="Accepted",t.BAD_GATEWAY="Bad Gateway",t.BAD_REQUEST="Bad Request",t.CONFLICT="Conflict",t.CONTINUE="Continue",t.CREATED="Created",t.EXPECTATION_FAILED="Expectation Failed",t.FAILED_DEPENDENCY="Failed Dependency",t.FORBIDDEN="Forbidden",t.GATEWAY_TIMEOUT="Gateway Timeout",t.GONE="Gone",t.HTTP_VERSION_NOT_SUPPORTED="HTTP Version Not Supported",t.IM_A_TEAPOT="I'm a teapot",t.INSUFFICIENT_SPACE_ON_RESOURCE="Insufficient Space on Resource",t.INSUFFICIENT_STORAGE="Insufficient Storage",t.INTERNAL_SERVER_ERROR="Internal Server Error",t.LENGTH_REQUIRED="Length Required",t.LOCKED="Locked",t.METHOD_FAILURE="Method Failure",t.METHOD_NOT_ALLOWED="Method Not Allowed",t.MOVED_PERMANENTLY="Moved Permanently",t.MOVED_TEMPORARILY="Moved Temporarily",t.MULTI_STATUS="Multi-Status",t.MULTIPLE_CHOICES="Multiple Choices",t.NETWORK_AUTHENTICATION_REQUIRED="Network Authentication Required",t.NO_CONTENT="No Content",t.NON_AUTHORITATIVE_INFORMATION="Non Authoritative Information",t.NOT_ACCEPTABLE="Not Acceptable",t.NOT_FOUND="Not Found",t.NOT_IMPLEMENTED="Not Implemented",t.NOT_MODIFIED="Not Modified",t.OK="OK",t.PARTIAL_CONTENT="Partial Content",t.PAYMENT_REQUIRED="Payment Required",t.PERMANENT_REDIRECT="Permanent Redirect",t.PRECONDITION_FAILED="Precondition Failed",t.PRECONDITION_REQUIRED="Precondition Required",t.PROCESSING="Processing",t.EARLY_HINTS="Early Hints",t.UPGRADE_REQUIRED="Upgrade Required",t.PROXY_AUTHENTICATION_REQUIRED="Proxy Authentication Required",t.REQUEST_HEADER_FIELDS_TOO_LARGE="Request Header Fields Too Large",t.REQUEST_TIMEOUT="Request Timeout",t.REQUEST_TOO_LONG="Request Entity Too Large",t.REQUEST_URI_TOO_LONG="Request-URI Too Long",t.REQUESTED_RANGE_NOT_SATISFIABLE="Requested Range Not Satisfiable",t.RESET_CONTENT="Reset Content",t.SEE_OTHER="See Other",t.SERVICE_UNAVAILABLE="Service Unavailable",t.SWITCHING_PROTOCOLS="Switching Protocols",t.TEMPORARY_REDIRECT="Temporary Redirect",t.TOO_MANY_REQUESTS="Too Many Requests",t.UNAUTHORIZED="Unauthorized",t.UNAVAILABLE_FOR_LEGAL_REASONS="Unavailable For Legal Reasons",t.UNPROCESSABLE_ENTITY="Unprocessable Entity",t.UNSUPPORTED_MEDIA_TYPE="Unsupported Media Type",t.USE_PROXY="Use Proxy",t.MISDIRECTED_REQUEST="Misdirected Request",t.VALIDATION_ERROR="Validation error",t.DATABASE_ERROR="Database error"},38490:(e,t,a)=>{"use strict";a.d(t,{NG:()=>f,sd:()=>h,Hd:()=>v});var n=a(68208),s=a(91508),r=a(57982),l=a(35388),i=a(21203),o=a(71341),d=a(65003),c=a(95042),u=a(87214),m=a(28958),p=a(76518),x=a.n(p);function f(e){let{children:t,className:a,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("not-prose my-0 flex w-full flex-col overflow-clip border","border-border text-text-primary rounded-lg",a),...s,"data-sentry-component":"CodeBlock","data-sentry-source-file":"code-block.tsx",children:t})}let h=(0,l.memo)(function(e){let{code:t,language:a="tsx",className:i,...d}=e,{highlightedHtml:c}=function(e){let{code:t,language:a}=e,[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),{resolvedTheme:c}=(0,r.D)();return(0,l.useEffect)(()=>{let e=!1;return async function(){if(!t)return i("");d(!0);try{let n=await (0,s.wY)(t,a,"dark"===c?"github-dark":"github-light");e||i(n)}catch(a){if(console.error("Error highlighting code:",a),!e){let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");i('<pre class="shiki-code-block"><code>'.concat(e,"</code></pre>"))}}finally{e||d(!1)}}(),()=>{e=!0}},[t,a,c]),{highlightedHtml:n,isHighlighting:o}}({code:t,language:a}),u=(0,o.cn)(x().container,i);return c?(0,n.jsx)("div",{className:u,dangerouslySetInnerHTML:{__html:c},...d}):(0,n.jsx)("div",{className:u,...d,children:(0,n.jsx)("pre",{className:"m-0 whitespace-pre-wrap rounded-none px-4 py-3 font-mono text-[#24292e] dark:text-[#e1e4e8]",children:(0,n.jsx)("code",{className:"text-[11px] leading-normal sm:text-[13px]",children:t})})})});function g(e){let{children:t,className:a,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("border-border flex items-center justify-between border-b px-4 py-2",a),...s,"data-sentry-component":"CodeBlockGroup","data-sentry-source-file":"code-block.tsx",children:t})}function v(e){var t;let{inline:a,className:s,children:r,...l}=e,[,p]=(0,c.A)(),x=String(r).includes("\n"),v=null==s?void 0:s.includes("language-");if(!1!==a&&!x&&!v)return(0,n.jsx)("code",{className:(0,o.cn)("rounded px-1.5 py-0.5","bg-surface-tertiary","font-mono text-[0.9em]","text-text-primary font-medium",s),...l,children:r});let y=/language-(\w+)/.exec(null!=s?s:""),b=null!=(t=null==y?void 0:y[1])?t:"text",j=String(r).replace(/\n$/,"");return"math"===b?(0,n.jsx)("pre",{children:(0,n.jsx)("code",{className:s,...l,children:r})}):(0,n.jsxs)(f,{className:"not-prose relative","data-code-block":"true","data-sentry-element":"CodeBlock","data-sentry-component":"CodeBlockComposition","data-sentry-source-file":"code-block.tsx",children:[(0,n.jsxs)(g,{"data-sentry-element":"CodeBlockGroup","data-sentry-source-file":"code-block.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.A,{size:14,className:"text-text-secondary","data-sentry-element":"FileCode","data-sentry-source-file":"code-block.tsx"}),(0,n.jsx)("span",{className:"text-text-secondary text-sm font-medium",children:(0,i.eV)(b)})]}),(0,n.jsx)(u.G,{content:"Copy code","data-sentry-element":"BasicTooltip","data-sentry-source-file":"code-block.tsx",children:(0,n.jsx)(m.i,{variant:"textLink",size:16,onClick:()=>{p(j)},"data-sentry-element":"CopyButton","data-sentry-source-file":"code-block.tsx"})})]}),(0,n.jsx)(h,{code:j,language:b,"data-sentry-element":"CodeBlockCode","data-sentry-source-file":"code-block.tsx"})]})}},47470:(e,t,a)=>{"use strict";var n=Object.create?function(e,t,a,n){void 0===n&&(n=a);var s=Object.getOwnPropertyDescriptor(t,a);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,s)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]},s=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[t.length]=a);return t})(t)};return function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r=e(t),l=0;l<r.length;l++)"default"!==r[l]&&n(a,t,r[l]);return s(a,t),a}}();t.kU=t.f$=t.aq=t.EV=void 0;r(a(15359)),r(a(34963));t.EV="recaptcha validation failed";t.aq="prompt failed";t.f$="Chosen Model(s) are no longer available";t.kU="Message cannot be retried"},59203:(e,t,a)=>{"use strict";a.d(t,{Ke:()=>l,Nt:()=>s,R6:()=>r});var n=a(63551);let s=n.bL,r=n.R6,l=n.Ke},63252:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(68208),s=a(71341),r=a(33468),l=a(35388),i=a(37705),o=a(52370),d=a(11980),c=a(83502),u=a(22747);a(3536);var m=a(38490);let p=e=>{let{children:t,className:a,...r}=e;return(0,n.jsx)("div",{className:"overflow-x-auto","data-sentry-component":"TableComponent","data-sentry-source-file":"table.tsx",children:(0,n.jsx)("table",{...r,className:(0,s.cn)("min-w-full",a),children:t})})},x=e=>{let{children:t,className:a,...r}=e;return(0,n.jsx)("th",{...r,className:(0,s.cn)("whitespace-nowrap px-3 py-2",a),"data-sentry-component":"TableHeaderComponent","data-sentry-source-file":"table.tsx",children:t})},f=e=>{let{children:t,className:a,...r}=e;return(0,n.jsx)("td",{...r,className:(0,s.cn)("px-3 py-2",a),"data-sentry-component":"TableCellComponent","data-sentry-source-file":"table.tsx",children:t})},h=(0,l.memo)(e=>{let{content:t,id:a,className:i}=e,o=(0,l.useMemo)(()=>r.xI.lexer(t).map(e=>e.raw),[t]);return(0,n.jsx)("div",{className:(0,s.cn)("prose prose-sm prose-pre:bg-transparent prose-pre:p-0 text-wrap break-words",i),children:o.map((e,t)=>(0,n.jsx)(g,{content:e},"".concat(a,"-block_").concat(t)))})});h.displayName="MemoizedMarkdown";let g=(0,l.memo)(e=>{let{content:t}=e;return(0,n.jsx)(i.oz,{remarkPlugins:[d.A,c.A,[u.A,{singleDollarTextMath:!0}]],rehypePlugins:[[o.A,{displayMode:!0,throwOnError:!1,errorColor:"#cc0000"}]],components:{code:m.Hd,table:p,th:x,td:f},children:t})},(e,t)=>e.content===t.content);g.displayName="MemoizedMarkdownBlock"},66107:()=>{},66654:(e,t,a)=>{"use strict";a.d(t,{Evaluation:()=>iw});var n,s,r,l,i,o,d,c,u,m,p,x,f,h,g,v,y=a(68208),b=a(6872),j=a(89016);let w=(0,j.createServerReference)("40af783a1ee1a52accc92a9480937f856042df80b5",j.callServer,void 0,j.findSourceMapURL,"updateTouConsent");var N=a(19906),E=a(41517),A=a(65397),C=a(5652),T=a(3760),_=a(67503),k=a(82735),I=a(44563),S=a(34805),R=a(72552),M=a(35388),D=a(18261);let z=(0,k.eU)(!1),O=(0,k.eU)(null);function L(){let[e,t]=(0,I.fp)(z),[a,n]=(0,I.fp)(O);return{isOpen:e,setOpen:t,promiseHandlers:a,setPromiseHandlers:n}}function P(){let{isOpen:e,setOpen:t,promiseHandlers:a,setPromiseHandlers:n}=L(),{setTouConsentTimestamp:s,userCreationPromise:r}=(0,_.kH)(e=>e),[l,i]=(0,M.useState)(!1),o=async()=>{try{await r;let e=await w();if(!e.success||null==e.data)throw Error("Failed to update terms-of-use");let{touConsentTimestamp:l}=e.data;null==a||a.resolve(),n(null),t(!1),s(l)}catch(e){T.z.capture({action:"terms_of_service_modal_accept_failed"}),D.oR.error("Failed to accept terms-of-use"),null==a||a.reject(),n(null)}finally{i(!1)}};return(0,y.jsx)(A.lG,{open:e,onOpenChange:e=>{e||(i(!1),null==a||a.reject(),n(null),t(!1))},"data-sentry-element":"Dialog","data-sentry-component":"TermsOfUseModal","data-sentry-source-file":"terms-of-use-modal.tsx",children:(0,y.jsxs)(A.Cf,{className:"border-border-faint w-[calc(100%-2rem)] max-w-[610px] rounded-lg p-4 sm:p-6","data-sentry-element":"DialogContent","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsxs)(A.c7,{className:"flex flex-col gap-3 sm:gap-4","data-sentry-element":"DialogHeader","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsxs)(A.L3,{className:"flex items-center gap-2 text-base sm:text-lg","data-sentry-element":"DialogTitle","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsx)(C.E,{size:20,className:"sm:hidden","data-sentry-element":"ArenaColosseum","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsx)(C.E,{size:24,className:"hidden sm:block","data-sentry-element":"ArenaColosseum","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsx)("span",{className:"leading-tight",children:"Terms of Use & Privacy Policy"})]}),(0,y.jsxs)(A.rr,{className:"text-xs leading-relaxed sm:text-sm","data-sentry-element":"DialogDescription","data-sentry-source-file":"terms-of-use-modal.tsx",children:['By clicking "Agree", you agree to be bound by our'," ",(0,y.jsx)(N.Link,{href:"/terms-of-use",target:"_blank",className:"underline","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Terms of Use"})," ","and acknowledge receipt and understanding of our"," ",(0,y.jsx)(N.Link,{href:"/privacy-policy",target:"_blank",className:"underline","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Privacy Policy"}),'. Our Services must not be used for any illegal, harmful, violent, racist, sexual, or other offensive purposes, or to upload sensitive information. Due to the nature of artificial intelligence ("AI") technologies, the Services may make mistakes and provide responses that are inaccurate or inappropriate for your input. LMArena is not responsible for any such mistakes, inaccuracies, or inappropriate responses and you should verify the responses\' accuracy. This site is protected by reCAPTCHA and the Google'," ",(0,y.jsx)(N.Link,{href:"https://policies.google.com/privacy","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Privacy Policy"})," and"," ",(0,y.jsx)(N.Link,{href:"https://policies.google.com/terms","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Terms of Service"})," apply."]}),(0,y.jsx)("div",{children:(0,y.jsxs)(N.Link,{href:"/how-it-works",className:"text-primary inline-flex items-center gap-1 hover:underline",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsx)("span",{className:"text-xs sm:text-sm",children:"Learn more about How it Works"}),(0,y.jsx)(S.A,{size:12,className:"sm:hidden","data-sentry-element":"ArrowRight","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsx)(S.A,{size:14,className:"hidden sm:block","data-sentry-element":"ArrowRight","data-sentry-source-file":"terms-of-use-modal.tsx"})]})})]}),(0,y.jsxs)(A.Es,{className:"w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-end sm:gap-2","data-sentry-element":"DialogFooter","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsx)(E.$,{disabled:l,onClick:()=>{i(!0),o()},type:"submit",className:"w-full sm:order-2 sm:w-auto","data-sentry-element":"Button","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Agree"}),(0,y.jsxs)("div",{className:"order-1 hidden items-center justify-start gap-1 sm:flex",children:[(0,y.jsx)(R.A,{size:16,className:"text-text-secondary","data-sentry-element":"CornerDownRight","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsxs)("span",{className:"text-text-tertiary text-xs",children:["Or hit ",(0,y.jsx)("span",{className:"text-text-secondary font-medium",children:"Enter"})," on your keyboard to agree"]})]})]})]})})}var B=a(71341),U=a(76696),F=a(78114),H=a(58717),V=a(8796),G=a(69468),W=a(20136),J=a(54275);let Y=(0,J.M1)(["rebrand"]).withOptions({clearOnDefault:!0,history:"replace"});var Q=a(42205),q=a(80584),$=a(40974),K=a(49992),X=a(74181),Z=a(8498),ee=a(7226),et=a(57470),ea=a(17427),en=a(2281),es=a(86756),er=a(50987),el=a(70641),ei=a(22788),eo=a(25452),ed=a(96727),ec=a(64474),eu=a(10506);function em(){let e=(0,eu.A)(),[t,a]=(0,U.g)((0,H.k)(e=>[e.mode,e.setMode])),n=(0,F.useRouter)(),s=(0,F.usePathname)(),r=(0,M.useMemo)(()=>{switch(t){case b.lY.BATTLE:return(0,y.jsx)(ep,{title:"Battle",Icon:eo.A});case b.lY.SIDE_BY_SIDE:return(0,y.jsx)(ep,{title:"Side by Side",Icon:ed.A});case b.lY.DIRECT:return(0,y.jsx)(ep,{title:"Direct Chat",Icon:ec.A});default:throw Error("Invalid mode")}},[t]),l=(0,M.useCallback)(r=>{if(!e()||r===t)return;a(r);let l=new URLSearchParams(window.location.search);r===b.lY.BATTLE?l.delete("mode"):l.set("mode",r);let i=s.split("?")[0];n.push("".concat("/c/new"===i||"/"===i?i:"/c/new","?").concat(l.toString()))},[e,n,a,t,s]),i=(0,M.useCallback)(e=>{e&&(0,ei.mm)()},[]);return(0,y.jsxs)(el.l6,{value:t,onValueChange:l,onOpenChange:i,"data-sentry-element":"Select","data-sentry-component":"SelectMode","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsx)(el.bq,{className:"w-[280px] max-w-max border-none","data-sentry-element":"SelectTrigger","data-sentry-source-file":"mode-selector.tsx",children:(0,y.jsx)(el.yv,{"data-sentry-element":"SelectValue","data-sentry-source-file":"mode-selector.tsx",children:r})}),(0,y.jsx)(el.gC,{align:"start","data-sentry-element":"SelectContent","data-sentry-source-file":"mode-selector.tsx",children:(0,y.jsxs)(el.s3,{"data-sentry-element":"SelectGroup","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsx)(ex,{value:b.lY.BATTLE,headerText:"Battle",descriptionText:"Battle with 2 anonymous models",Icon:eo.A,"data-sentry-element":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx"}),(0,y.jsx)(ex,{value:b.lY.SIDE_BY_SIDE,headerText:"Side by Side",descriptionText:"Compare 2 models of your choice",Icon:ed.A,"data-sentry-element":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx"}),(0,y.jsx)(ex,{value:b.lY.DIRECT,headerText:"Direct Chat",descriptionText:"Chat with one model at a time",Icon:ec.A,"data-sentry-element":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx"})]})})]})}function ep(e){let{title:t,Icon:a}=e;return(0,y.jsxs)("div",{className:"flex items-center gap-1","data-sentry-component":"ModeSelectedItem","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsx)(a,{className:"h-[18px] w-[18px]","data-sentry-element":"Icon","data-sentry-source-file":"mode-selector.tsx"}),(0,y.jsx)("p",{className:"font-heading text-base font-medium",children:t})]})}function ex(e){let{value:t,headerText:a,descriptionText:n,Icon:s}=e,r=(0,F.useRouter)(),l=(0,F.usePathname)();return(0,M.useEffect)(()=>{let e=new URLSearchParams(window.location.search);"battle"===t?e.delete("mode"):e.set("mode",t);let a=e.toString(),n=a.length>0?"".concat(l,"?").concat(a):l;r.prefetch(n)},[r,t,l]),(0,y.jsxs)(el.eb,{value:t,showCheck:!1,className:"data-[state=checked]:text-text-tertiary data-[state=checked]:hover:text-header-primary group relative pr-10","data-sentry-element":"SelectItem","data-sentry-component":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,y.jsx)("p",{className:"font-heading text-base font-medium",children:a}),(0,y.jsx)("span",{className:"text-text-secondary text-xs font-normal",children:n})]}),(0,y.jsx)(s,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2","data-sentry-element":"Icon","data-sentry-source-file":"mode-selector.tsx"})]})}var ef=a(43666),eh=a(36861);function eg(e,t){if(!e)return!1;let a=t.find(t=>t.id===e);return!!a&&((0,eh.S1)(a)||(0,eh.j4)(a)||(0,eh.HI)(a))}function ev(e,t,a,n,s){if(s===b.Jg.WEBDEV)return!1;switch(e){case b.lY.BATTLE:if(s===b.Jg.SEARCH)return!1;return!0;case b.lY.SIDE_BY_SIDE:return eg(t,n)&&eg(a,n);case b.lY.DIRECT:default:return eg(t,n)}}function ey(e){var t,a;let n=null==(a=e.capabilities)||null==(t=a.inputCapabilities)?void 0:t.image;return"object"==typeof n&&!0===n.requiresUpload}function eb(e,t){if(!e)return!1;let a=t.find(t=>t.id===e);return!!a&&ey(a)}var ej=a(61713),ew=a(67325);let eN=M.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ej.uB,{ref:t,className:(0,B.cn)("bg-surface-primary border-border-faint text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md border",a),...n})});eN.displayName=ej.uB.displayName;let eE=M.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsxs)("div",{className:"border-border-faint flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,y.jsx)(ew.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,y.jsx)(ej.uB.Input,{ref:t,className:(0,B.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-base outline-none disabled:cursor-not-allowed disabled:opacity-50 sm:text-sm",a),...n})]})});eE.displayName=ej.uB.Input.displayName;let eA=e=>{let{className:t,...a}=e;return(0,y.jsx)(ej.uB.List,{className:(0,B.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a,"data-sentry-element":"unknown","data-sentry-component":"CommandList","data-sentry-source-file":"command.tsx"})};eA.displayName=ej.uB.List.displayName;let eC=M.forwardRef((e,t)=>(0,y.jsx)(ej.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));eC.displayName=ej.uB.Empty.displayName;let eT=M.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ej.uB.Group,{ref:t,className:(0,B.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",a),...n})});eT.displayName=ej.uB.Group.displayName,M.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ej.uB.Separator,{ref:t,className:(0,B.cn)("bg-border -mx-1 h-px",a),...n})}).displayName=ej.uB.Separator.displayName;let e_=M.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ej.uB.Item,{ref:t,className:(0,B.cn)("hover:bg-surface-secondary data-[selected=true]:bg-surface-secondary data-[selected=true]:text-text-primary relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...n})});e_.displayName=ej.uB.Item.displayName;var ek=a(95244),eI=a(97919),eS=a(90519),eR=a(71035),eM=a(92554);let eD=(0,M.memo)(function(e){var t;let{models:a,onChange:n,selectedModelId:s}=e,[r,l]=(0,M.useState)(!1),[i,o]=(0,M.useState)(""),[d,c]=(0,M.useState)(!0),[u,m]=(0,M.useState)(null),p=(0,M.useCallback)(e=>{m(e)},[]),x=a.find(e=>e.id===s);(0,M.useEffect)(()=>{if(!r||!u)return;let e=()=>{let{scrollTop:e,scrollHeight:t,clientHeight:a}=u;c(!(e+a>=t-20))};return u.addEventListener("scroll",e),setTimeout(()=>{let{scrollHeight:e,clientHeight:t}=u;c(e>t+5)},100),()=>u.removeEventListener("scroll",e)},[r,a,i,u]);let f=(0,M.useCallback)(e=>{var t;return(null==(t=e.capabilities)?void 0:t.outputCapabilities.video)&&ey(e)?"".concat(e.publicName," (image required)"):e.publicName},[]);return(0,y.jsxs)(ek.AM,{open:r,onOpenChange:e=>{l(e),e?(0,ei.mm)():(o(""),c(!0))},children:[(0,y.jsx)(ek.Wv,{asChild:!0,children:(0,y.jsxs)(E.$,{variant:"outline",role:"combobox","aria-expanded":r,className:"min-w-0 max-w-full flex-1 flex-shrink basis-[200px] justify-between gap-0.5 px-2 md:h-auto md:border-0 md:px-4",children:[(0,y.jsx)("div",{className:"flex min-w-0 items-center gap-2",children:null==x?(0,y.jsx)("span",{className:"truncate",children:"Select model..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(eM.D,{className:"size-[18px] flex-none",organization:x.organization}),(0,y.jsx)("span",{className:"min-w-0 truncate",children:f(x)})]})}),(0,y.jsx)(eI.A,{className:(0,B.cn)("size-[18px] flex-none transition-transform",{"-rotate-180":r})})]})}),(0,y.jsx)(ek.hl,{className:"w-[400px] rounded-md",align:"center",sideOffset:12,children:(0,y.jsxs)(eN,{value:null!=(t=null==x?void 0:x.publicName)?t:void 0,children:[(0,y.jsxs)("div",{className:"relative p-2",children:[(0,y.jsx)(eE,{placeholder:"Search models",className:"mb-0",value:i,onValueChange:o}),i&&(0,y.jsx)("button",{onClick:()=>o(""),className:"hover:bg-surface-secondary absolute right-3 top-1/2 -translate-y-1/2 rounded-md p-1 transition-colors",type:"button",children:(0,y.jsx)(eS.A,{className:"text-text-tertiary size-3"})})]}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsxs)(eA,{ref:p,className:"max-h-[350px] overflow-y-auto",children:[(0,y.jsx)(eC,{children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-center",children:[(0,y.jsx)("div",{className:"text-text-tertiary mb-3",children:(0,y.jsx)(ew.A,{className:"mr-2 size-6 shrink-0 opacity-50"})}),(0,y.jsx)("p",{className:"text-text-secondary mb-1 text-sm",children:"No models found"}),(0,y.jsx)("p",{className:"text-text-tertiary text-xs",children:"Try adjusting your search term"})]})}),(0,y.jsx)(eT,{children:a.map(e=>{let t=s===e.id;return(0,y.jsxs)(e_,{value:e.id,keywords:[e.id,e.publicName,e.organization].filter(e=>!!e),onSelect:()=>{null==n||n(e.id),o(""),l(!1)},className:"flex items-center gap-2 px-3 py-2",children:[(0,y.jsx)(eM.D,{className:"size-4 flex-none",organization:e.organization}),(0,y.jsx)("span",{className:"flex-1 truncate text-sm",children:f(e)}),(0,y.jsx)(eR.A,{className:(0,B.cn)("ml-auto h-4 w-4 flex-none",t?"opacity-100":"opacity-0")})]},e.id)})})]}),(0,y.jsx)("div",{className:(0,B.cn)("from-surface-primary pointer-events-none absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t to-transparent","transition-opacity duration-200 ease-in-out",d?"opacity-100":"opacity-0")})]})]})})]})});function ez(){let{modelAId:e,modelBId:t,setModelAId:a,setModelBId:n,models:s}=(0,ef.g)((0,H.k)(e=>({modelAId:e.modelAId,modelBId:e.modelBId,setModelAId:e.setModelAId,setModelBId:e.setModelBId,models:e.models}))),{mode:r,messages:l,modality:i}=(0,U.g)((0,H.k)(e=>({mode:e.mode,messages:e.messages,modality:e.modality}))),o="control"!==(0,W._P)("video-modality-enabled"),d=(0,M.useMemo)(()=>{let e=function(e,t,a,n){let s=e.filter(e=>null!=e.organization).filter(e=>t===b.Jg.IMAGE?(0,eh.hK)(e):t===b.Jg.SEARCH?(0,eh.cK)(e):t===b.Jg.WEBDEV?(0,eh.JQ)(e):n&&t===b.Jg.VIDEO?(0,eh.D_)(e):(0,eh.oN)(e));return a.some(e=>{var t;return null==(t=e.experimental_attachments)?void 0:t.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("image/")})})&&t===b.Jg.CHAT?s.filter(e=>{let t=(0,eh.S1)(e),a=(0,eh.HI)(e);return(!a||!!n)&&(t||a)}):s}(s,i,l,o),t=["gemini-3-pro-image-preview","claude-opus-4-5"];return e.sort((e,a)=>{var n,s,r,l;let o=t.some(t=>{var a;return null==(a=e.publicName)?void 0:a.toLowerCase().includes(t)}),d=t.some(e=>{var t;return null==(t=a.publicName)?void 0:t.toLowerCase().includes(e)});if(o&&!d)return -1;if(!o&&d)return 1;let c=null!=(r=null==(n=e.rankByModality)?void 0:n[i])?r:e.rank,u=null!=(l=null==(s=a.rankByModality)?void 0:s[i])?l:a.rank;return void 0!==c&&void 0!==u?c-u:void 0!==c?-1:+(void 0!==u)})},[s,l,i,o]);return r===b.lY.BATTLE?null:r===b.lY.DIRECT?(0,y.jsx)(eD,{selectedModelId:e,onChange:a,models:d}):r===b.lY.SIDE_BY_SIDE?(0,y.jsx)(eO,{modelAId:e,modelBId:t,setModelAId:a,setModelBId:n,models:d}):null}function eO(e){let{modelAId:t,modelBId:a,setModelAId:n,setModelBId:s,models:r}=e,l=(0,M.useMemo)(()=>r.filter(e=>e.id!==a),[r,a]),i=(0,M.useMemo)(()=>r.filter(e=>e.id!==t),[r,t]);return(0,y.jsxs)("div",{className:"flex w-full min-w-0 flex-row items-center justify-center gap-1 sm:gap-2 md:gap-3","data-sentry-component":"SideBySideSelector","data-sentry-source-file":"model-selector.tsx",children:[(0,y.jsx)("div",{className:"mt-1 min-w-0 flex-1 leading-[normal] sm:max-w-[280px] sm:flex-initial md:max-w-[250px] lg:max-w-[300px]",children:(0,y.jsx)(eD,{selectedModelId:t,onChange:n,models:l,"data-sentry-element":"ModelDropdown","data-sentry-source-file":"model-selector.tsx"})}),(0,y.jsx)("span",{className:"text-interactive-normal mx-1 flex-shrink-0 text-sm font-medium",children:"vs"}),(0,y.jsx)("div",{className:"mt-1 min-w-0 flex-1 leading-[normal] sm:max-w-[280px] sm:flex-initial md:max-w-[250px] lg:max-w-[300px]",children:(0,y.jsx)(eD,{selectedModelId:a,onChange:s,models:i,"data-sentry-element":"ModelDropdown","data-sentry-source-file":"model-selector.tsx"})})]})}var eL=a(37248);let eP=(0,k.eU)([]);var eB=a(87214);function eU(e){let{icon:t,label:a,selected:n=!1,tooltipContent:s,selectedTooltipContent:r,onClick:l,modality:i,disabled:o=!1}=e,d=(0,y.jsxs)(E.$,{type:"button",variant:"outline",size:"icon","aria-label":a,disabled:o,onClick:()=>n?null==l?void 0:l(null):null==l?void 0:l(i),className:(0,B.cn)("touch-hitbox","h-8 w-8 p-2 rounded-md active:transition-transform active:duration-75 transition-colors duration-150 ease-out group/modality-button relative hover:text-interactive-active hover:bg-interactive-cta-secondary",n?["text-text-tertiary bg-surface-secondary border-border-faint hover:bg-interactive-cta-secondary hover:text-interactive-active",a&&"w-auto gap-1.5"]:"hover:bg-interactive-normal/10 hover:border-interactive-normal/10",o&&"cursor-not-allowed opacity-60"),children:[n?(0,y.jsxs)("div",{className:"relative -top-px left-0 flex h-full w-4 items-center justify-center pl-2",children:[(0,y.jsx)(t,{className:"absolute inset-0 size-4 group-hover/modality-button:opacity-0"}),(0,y.jsx)(eS.A,{className:"group-hover/modality-button:text-interactive-inverted absolute inset-0 size-4 opacity-0 group-hover/modality-button:opacity-100"})]}):(0,y.jsx)(t,{className:"size-4"}),n&&a&&(0,y.jsx)("span",{children:a})]});return n&&r?(0,y.jsx)(eB.G,{content:r,children:d}):s&&(!n||o)?(0,y.jsx)(eB.G,{content:s,children:d}):d}var eF=a(98587),eH=a(13258),eV=a(42549),eG=a(38442),eW=a(10536),eJ=a(37842),eY=a(79096),eQ=a(65219);let eq={[b.Jg.AUTO]:{title:"Auto",headerText:"Auto",descriptionText:"Automatically Detect Modality",Icon:eH.A},[b.Jg.CHAT]:{title:"Text",headerText:"Text",descriptionText:"Try Language and Vision modes",Icon:eV.A},[b.Jg.IMAGE]:{title:"Image",headerText:"Image",descriptionText:"Generate Images",Icon:eG.A},[b.Jg.WEBDEV]:{title:"Code",headerText:"Code",descriptionText:"Build apps and websites",Icon:eW.A},[b.Jg.SEARCH]:{title:"Search",headerText:"Search",descriptionText:"Web Search",Icon:eJ.A},[b.Jg.P2L]:{title:"P2L",headerText:"P2L",descriptionText:"Prompt to Leaderboard",Icon:eY.A},[b.Jg.VIDEO]:{title:"Video",headerText:"Video",descriptionText:"Generate Videos",Icon:eQ.A}},e$=e=>eq[e]||eq[b.Jg.CHAT];function eK(){let e="control"!==(0,W._P)("video-modality-enabled");return(0,M.useMemo)(()=>{let t=[];return t.push(b.Jg.SEARCH),t.push(b.Jg.IMAGE),t.push(b.Jg.WEBDEV),e&&t.push(b.Jg.VIDEO),t},[e])}let eX=e=>e===b.Jg.CHAT?"":"chat-modality=".concat((0,eF.YS)(e));function eZ(e){let{handleModalityChange:t}=e,a=(0,F.useRouter)(),n=(0,U.g)(e=>e.modality),s=eK();(0,M.useEffect)(()=>{s.forEach(e=>{let t=eX(e);a.prefetch(t?"/?".concat(t):"/")})},[a,s]);let r=n!==b.Jg.CHAT&&s.includes(n);return(0,y.jsx)("div",{className:"flex items-center gap-2","data-sentry-component":"SelectChatModality","data-sentry-source-file":"chat-modality-selector.tsx",children:s.map(e=>{let a=e$(e),s=n===e;return r&&!s?null:(0,y.jsx)(eU,{icon:a.Icon,label:a.title,tooltipContent:a.descriptionText,selected:s,onClick:t,modality:e},e)})})}let e0=(0,k.eU)(!1),e1=(0,k.eU)(null);function e2(){let[e,t]=(0,I.fp)(e0),[a,n]=(0,I.fp)(e1);return{isOpen:e,setOpen:t,navigationTarget:a,setNavigationTarget:n,showModal:e=>{n(null!=e?e:null),t(!0)}}}let e4=(0,M.memo)(function(){let{isOpen:e,setOpen:t,navigationTarget:a}=e2(),n=(0,F.useRouter)();return e?(0,y.jsx)(A.lG,{open:!0,onOpenChange:e=>{e||t(!1)},"data-sentry-element":"Dialog","data-sentry-component":"ChangeModalityModalComponent","data-sentry-source-file":"change-modality-modal.tsx",children:(0,y.jsxs)(A.Cf,{className:"w-[calc(100%-2rem)] max-w-lg rounded-lg p-4 sm:p-6","data-sentry-element":"DialogContent","data-sentry-source-file":"change-modality-modal.tsx",children:[(0,y.jsxs)(A.c7,{className:"flex flex-col gap-2","data-sentry-element":"DialogHeader","data-sentry-source-file":"change-modality-modal.tsx",children:[(0,y.jsx)(A.L3,{className:"text-base leading-tight sm:text-lg","data-sentry-element":"DialogTitle","data-sentry-source-file":"change-modality-modal.tsx",children:"Start new chat session?"}),(0,y.jsx)(A.rr,{className:"text-xs leading-relaxed sm:text-sm","data-sentry-element":"DialogDescription","data-sentry-source-file":"change-modality-modal.tsx",children:"Changing modalities will start a new chat session. Your current session will be saved in your chat history."})]}),(0,y.jsxs)(A.Es,{className:"w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-end sm:gap-2","data-sentry-element":"DialogFooter","data-sentry-source-file":"change-modality-modal.tsx",children:[(0,y.jsx)(E.$,{onClick:()=>void(t(!1),n.push(null!=a?a:"/")),type:"submit",className:"w-full sm:order-2 sm:w-auto","data-sentry-element":"Button","data-sentry-source-file":"change-modality-modal.tsx",children:"Continue"}),(0,y.jsxs)("div",{className:"order-1 hidden items-center justify-start gap-1 sm:flex",children:[(0,y.jsx)(R.A,{size:16,className:"text-text-secondary","data-sentry-element":"CornerDownRight","data-sentry-source-file":"change-modality-modal.tsx"}),(0,y.jsxs)("span",{className:"text-text-tertiary text-xs",children:["Or hit ",(0,y.jsx)("span",{className:"text-text-secondary font-medium",children:"Enter"})," on your keyboard to continue"]})]})]})]})}):null});function e3(e){let{modality:t,setModality:a,messagesLength:n}=(0,U.g)((0,H.k)(e=>({modality:e.modality,setModality:e.setModality,messagesLength:e.messages.length}))),{setModelAId:s,setModelBId:r}=(0,ef.g)((0,H.k)(e=>({setModelAId:e.setModelAId,setModelBId:e.setModelBId}))),[,l]=(0,eF.Uh)(),{showModal:i}=e2();return(0,M.useCallback)(o=>{var d,c;let u=null!=o?o:b.Jg.CHAT;if(o===t)return n>0?void i("/"):(a(b.Jg.CHAT),l(b.Jg.CHAT),s(null),r(null),void(null==e||null==(d=e.current)||d.focus()));if(n>0){let e=eX(u);i(e?"/c/new?".concat(e):"/c/new")}else a(u),l(u),null==e||null==(c=e.current)||c.focus()},[t,n,i,a,l,s,r,e])}var e5=a(94975),e6=a(66516),e8=a(96379),e9=a(80974),e7=a(39768);function te(e){var t,a,n,s,r,l,i;let{capabilities:o}=e,d="object"==typeof(null==o||null==(t=o.inputCapabilities)?void 0:t.image)&&(null==o||null==(n=o.inputCapabilities)||null==(a=n.image)?void 0:a.requiresUpload)===!0,c=(null==o||null==(s=o.inputCapabilities)?void 0:s.text)&&(null==o||null==(r=o.inputCapabilities)?void 0:r.image);return(0,y.jsxs)("div",{className:"flex gap-3","data-sentry-component":"ModelsCapabilities","data-sentry-source-file":"models-capabilities.tsx",children:[c&&(0,y.jsx)(e9.A,{className:"text-text-tertiary size-4"}),(null==o||null==(l=o.outputCapabilities)?void 0:l.search)&&(0,y.jsx)(eJ.A,{className:"text-text-tertiary size-4"}),d&&(0,y.jsx)(e7.A,{className:"text-text-tertiary size-4"}),(null==o||null==(i=o.outputCapabilities)?void 0:i.image)&&(0,y.jsx)(eG.A,{className:"text-text-tertiary size-4"})]})}let tt=[{icon:(0,y.jsx)(eV.A,{className:"size-4"}),label:"Text",id:"text"},{icon:(0,y.jsx)(eW.A,{className:"size-4"}),label:"WebDev",id:"webdev"},{icon:(0,y.jsx)(eG.A,{className:"size-4"}),label:"Image",id:"text-to-image"},{icon:(0,y.jsx)(eQ.A,{className:"size-4"}),label:"Video",id:"text-to-video"},{icon:(0,y.jsx)(eJ.A,{className:"size-4"}),label:"Search",id:"search"}];eG.A,eJ.A;let ta=new Set(["text-to-image","image-edit","multi-image-edit"]);function tn(e){let{models:t,modelA:a,modelB:n,searchValue:s,setSearchValue:r,disabledFlags:l,isAddMandatory:i,currentArena:o,anchorRequiresImageUpload:d,hasImageAttachment:c,fadeThreshold:u=3}=e,[m,p]=(0,M.useState)(!1),x=(0,M.useRef)(null),f=(0,M.useMemo)(()=>{let e=[];return(null==a?void 0:a.id)&&e.push(a.id),(null==n?void 0:n.id)&&e.push(n.id),e},[null==a?void 0:a.id,null==n?void 0:n.id]),h=(0,M.useMemo)(()=>{let e=[];return(null==l?void 0:l.isRemoveADisabled)&&(null==a?void 0:a.id)&&e.push(a.id),(null==l?void 0:l.isRemoveBDisabled)&&(null==n?void 0:n.id)&&e.push(n.id),e},[null==l?void 0:l.isRemoveADisabled,null==l?void 0:l.isRemoveBDisabled,null==a?void 0:a.id,null==n?void 0:n.id]),g=(null==l?void 0:l.isAddDisabled)?1:2,v=f.length<g,y=!!(i&&f.length<g),b=(0,M.useMemo)(()=>{let e=(null!=s?s:"").trim().toLowerCase();return e?t.filter(t=>{var a;return(null!=(a=t.publicName)?a:"").toLowerCase().includes(e)}):t},[t,s]);(0,M.useLayoutEffect)(()=>{let e=x.current;e&&p(e.scrollTop+e.clientHeight>=e.scrollHeight-1)},[b.length]);let j=(0,M.useCallback)(e=>{let t=e.currentTarget;p(t.scrollTop+t.clientHeight>=t.scrollHeight-1)},[]),w=b.length>=u&&!m,N=function(e,t){let a=(0,M.useRef)(e),n=(0,M.useRef)(null);(0,M.useEffect)(()=>{a.current=e},[e]);let s=(0,M.useCallback)(function(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{a.current(...s)},t)},[t]);return(0,M.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),s}((e,t,a)=>{T.z.capture({action:"model_search_completed",params:{query:e,results_count:t,arena:null!=a?a:void 0}})},500),E=(0,M.useCallback)(e=>{if(e===s)return;r(e);let a=(null!=e?e:"").trim();if(!a)return;let n=a.toLowerCase();N(a,n?t.filter(e=>{var t;return(null!=(t=e.publicName)?t:"").toLowerCase().includes(n)}).length:t.length,null!=o?o:null)},[s,r,t,N,o]),A=(0,M.useCallback)(()=>{s&&r("")},[s,r]),C=(0,M.useMemo)(()=>new Set(f),[f]),_=(0,M.useMemo)(()=>new Set(h),[h]),k=c&&"text"===o,I=c&&!!o&&ta.has(o);return{items:(0,M.useMemo)(()=>b.map(e=>{var t,a;let n=C.has(e.id),s=_.has(e.id),r=null==(a=e.capabilities)||null==(t=a.inputCapabilities)?void 0:t.image,l="object"==typeof r&&(null==r?void 0:r.requiresUpload)===!0,i=!n&&!v,o=!n&&null!=d&&l!==d,c=!n&&k&&!(0,eh.S1)(e),u=!n&&I&&!(0,eh.j4)(e);return{model:e,isSelected:n,isLocked:s,requiresUpload:l,isDisabled:i||o||c||u}}),[b,C,_,v,d,k,I]),showFade:w,onScroll:j,scrollRef:x,handleSearchValue:E,clearSearch:A,shouldHighlightMandatory:y,selectedModelIds:f,lockedModelIds:h,canSelectMore:v}}function ts(e){let{modelA:t,modelB:a,searchValue:n,setSearchValue:s,models:r,handleSelectModel:l,currentArena:i,onArenaChange:o,anchorRequiresImageUpload:d,selectedArenaOptionId:c,disabledArenaOptionIds:u,hasImageAttachment:m,disabledFlags:p,isAddMandatory:x}=e,{items:f,showFade:h,onScroll:g,scrollRef:v,handleSearchValue:b,clearSearch:j,shouldHighlightMandatory:w}=tn({models:r,modelA:t,modelB:a,searchValue:n,setSearchValue:s,disabledFlags:p,isAddMandatory:x,currentArena:i,anchorRequiresImageUpload:d,hasImageAttachment:m}),N="control"!==(0,W._P)("video-modality-enabled"),A=(0,M.useMemo)(()=>tt.filter(e=>"text-to-video"!==e.id||N),[N]);return(0,y.jsxs)("div",{className:"px-4 pb-4 pt-6","data-sentry-component":"ModelSelectorDrawerContent","data-sentry-source-file":"model-selector-drawer-content.tsx",children:[w&&(0,y.jsx)("div",{className:"text-interactive-negative bg-interactive-negative/[0.12] mb-2 rounded-[4px] px-1.5 py-1 text-sm",children:"Please select another model"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)(e8.p,{placeholder:"Search models",value:n,onChange:e=>b(e.target.value),className:"rounded-[4px] pr-8","data-sentry-element":"Input","data-sentry-source-file":"model-selector-drawer-content.tsx"}),n&&(0,y.jsx)("button",{onClick:j,className:"hover:bg-surface-secondary absolute right-2 top-1/2 -translate-y-1/2 rounded-md p-1 transition-colors",type:"button",children:(0,y.jsx)(eS.A,{className:"text-text-tertiary size-3"})})]}),(0,y.jsx)("div",{className:"flex gap-2 overflow-x-auto py-2",children:A.map(e=>(0,y.jsxs)(E.$,{variant:"outline",disabled:null==u?void 0:u.includes(e.id),onClick:()=>{c===e.id?o("text"):o(e.id)},className:(0,B.cn)("flex-1 rounded-[4px]",c===e.id&&"text-text-tertiary bg-surface-secondary border-border-faint hover:text-text-tertiary"),children:[e.icon,e.label]},e.id))}),(0,y.jsx)("div",{className:"text-text-secondary py-2 text-sm font-medium",children:c?(()=>{var e;let t=null==(e=A.find(e=>e.id===c))?void 0:e.label;return t?"Top ".concat(t," Models"):"Select an Arena"})():"Select an Arena"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("div",{className:"no-scrollbar max-h-[400px] overflow-y-auto",ref:v,onScroll:g,children:0===f.length?(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-center",children:[(0,y.jsx)("div",{className:"text-text-tertiary mb-3",children:(0,y.jsx)(ew.A,{className:"mr-2 size-6 shrink-0 opacity-50"})}),(0,y.jsx)("p",{className:"text-text-secondary mb-1 text-sm",children:"No models found"}),(0,y.jsx)("p",{className:"text-text-tertiary text-xs",children:"Try adjusting your search term"})]}):(0,y.jsx)("div",{className:"divide-border-faint no-scrollbar divide-y divide-solid",children:f.map(e=>{let{model:t,isSelected:a,isLocked:n,isDisabled:s}=e;return(0,y.jsxs)("button",{type:"button",onClick:()=>{n||(a||!s)&&l(t.id)},className:(0,B.cn)("flex w-full items-center gap-2 px-3 py-3.5 text-left transition-colors",!a&&"hover:bg-surface-secondary",a&&"text-interactive-positive",s&&"cursor-not-allowed opacity-20",a&&n&&"cursor-not-allowed"),"aria-disabled":s,children:[(0,y.jsx)("span",{className:"text-text-tertiary text-sm font-medium",children:null!=t.rank?"".concat(t.rank,"."):""}),(0,y.jsx)(eM.D,{className:"size-4 flex-none",organization:t.organization}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,y.jsx)("span",{className:(0,B.cn)("truncate font-mono text-sm",a?"text-interactive-positive":"text-interactive-normal"),children:t.publicName}),a&&(0,y.jsx)(eR.A,{className:"text-interactive-positive h-4 w-4 flex-none"})]}),(0,y.jsx)("div",{className:"flex items-center gap-2",children:(0,y.jsx)(te,{capabilities:t.capabilities})})]},t.id)})})}),(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none absolute bottom-0 left-0 right-0 h-[60px] rounded-b-3xl bg-[linear-gradient(0deg,rgba(253,253,254,1)_0%,rgba(253,253,254,0)_100%)] transition-opacity duration-150 ease-out dark:bg-[linear-gradient(0deg,rgba(29,29,32,1)_0%,rgba(29,29,32,0)_100%)]",h?"opacity-100":"opacity-0")})]})]})}var tr=a(25321);function tl(e){let{classNameContainer:t,className:a,size:n=60,transition:s,onAnimationComplete:r,style:l}=e;return(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none absolute inset-[-1px] rounded-[inherit] border border-transparent [mask-clip:padding-box,border-box] [mask-composite:intersect] [mask-image:linear-gradient(transparent,transparent),linear-gradient(#000,#000)]",t),"data-sentry-component":"BorderTrail","data-sentry-source-file":"border-trail.tsx",children:(0,y.jsx)(tr.P.div,{className:(0,B.cn)("absolute aspect-square bg-zinc-500",a),style:{width:n,offsetPath:"rect(0 auto auto 0 round ".concat(n,"px)"),...l},animate:{offsetDistance:["0%","100%"]},transition:s||{repeat:1/0,duration:5,ease:"linear"},onAnimationComplete:r,"data-sentry-element":"unknown","data-sentry-source-file":"border-trail.tsx"})})}var ti=a(53695),to=a(42900),td=a(97165);let tc=(0,td.KU)(()=>localStorage),tu=(0,td.tG)("model-settings-menu-education-dismissed",!1,tc);function tm(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,W._P)("3m-model-selector"),[a,n]=(0,I.fp)(tu),s=(0,to.R)(),r=(0,M.useCallback)(()=>{n(!0)},[n]),l=!a&&"treatment-2"===t&&s,i=(0,M.useMemo)(()=>l&&e,[l,e]);return{shouldHighlight:l,shouldShowEducation:i,dismissEducation:r}}function tp(e){let{modelA:t,modelB:a,className:n,onClick:s,onAnchorChange:r,ref:l,variant:i,...o}=e,d=(0,e5.d)("md"),{shouldHighlight:c}=tm(),u="treatment"===(0,W._P)("3m-model-selector"),m=(0,U.g)(e=>e.mode),p=(0,U.g)(e=>e.messages.length),{showModal:x}=e2(),f=(0,M.useCallback)(e=>{"function"==typeof l?l(e):l&&"object"==typeof l&&(l.current=e),null==r||r(e)},[l,r]),h=m===b.lY.BATTLE,g=p>0;return(0,y.jsx)(eB.G,{content:"Settings","data-sentry-element":"BasicTooltip","data-sentry-component":"ModelSelectorTrigger","data-sentry-source-file":"model-selector-trigger.tsx",children:(0,y.jsxs)(E.$,{ref:f,type:"button",variant:"outline",size:t||a?"xs":"icon","aria-label":"Open model selector",className:(0,B.cn)("relative z-10 h-8 w-auto gap-1 border-transparent px-2","compact"===i&&"border-border-faint dark:border-border-faint",n),onClick:e=>{if(T.z.capture({action:"model_settings_menu_clicked",params:{has_model_a:!!t,has_model_b:!!a}}),h&&g){e.preventDefault(),e.stopPropagation(),x("/");return}null==s||s(e)},...o,"data-sentry-element":"Button","data-sentry-source-file":"model-selector-trigger.tsx",children:[c&&(0,y.jsx)(tl,{size:28,transition:{repeat:1/0,duration:3,ease:"linear"},classNameContainer:"inset-[-1px]",className:"from-border-faint to-border-faint dark:from-border-faint dark:to-border-faint h-[12px] rounded-full bg-gradient-to-r via-indigo-400 dark:via-indigo-400"}),(0,y.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,y.jsx)(ti.A,{className:"size-4","data-sentry-element":"Settings2","data-sentry-source-file":"model-selector-trigger.tsx"}),u&&d||"regular"===i&&!t&&!a?"Settings":null,"regular"===i&&(0,y.jsx)(eI.A,{className:"text-interactive-active size-3"})]})]})})}let tx={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},tf={duration:.15,ease:"easeOut"},th=["google","deepseek","openai","alibaba","anthropic","meta","xai","mistral","minimax","perplexity"];function tg(){return(0,y.jsx)(tr.P.div,{className:"mb-2 flex flex-row items-center justify-center gap-4 sm:mb-4 sm:gap-5",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.02}}},"data-sentry-element":"unknown","data-sentry-component":"ModelBanner","data-sentry-source-file":"welcome-screen.tsx",children:th.map(e=>{let t="scale-100";return"deepseek"===e||"anthropic"===e||"meta"===e?t="scale-125":("xai"===e||"mistral"===e)&&(t="scale-90"),(0,y.jsx)(tr.P.div,{variants:tx,transition:{duration:.2,ease:"easeOut"},children:(0,y.jsx)(eM.D,{organization:e,isPrivate:!1,variant:"colored",className:(0,B.cn)("pointer-events-none size-3.5 select-none sm:size-4",t)})},e)})})}function tv(){let e=(0,_.kH)(e=>e.user);return(0,y.jsx)(N.Link,{href:"/leaderboard",className:"text-interactive-link hover:text-interactive-link/80 after:bg-interactive-link relative inline transition-colors after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-0 after:transition-all after:duration-200 hover:after:w-full",onClick:()=>{T.z.capture({action:"view_leaderboard_from_chat",params:{user_id:null==e?void 0:e.id}})},"data-sentry-element":"Link","data-sentry-component":"AnimatedLeaderboardLink","data-sentry-source-file":"welcome-screen.tsx",children:"leaderboard"})}function ty(e){let{className:t}=e;return(0,y.jsx)("div",{className:t,"data-sentry-component":"WelcomeScreen","data-sentry-source-file":"welcome-screen.tsx",children:(0,y.jsx)("div",{className:"flex flex-col items-center justify-center gap-6 sm:mb-6",children:(0,y.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,y.jsxs)("div",{className:"flex w-full max-w-[800px] flex-col items-center",children:[(0,y.jsx)(tg,{"data-sentry-element":"ModelBanner","data-sentry-source-file":"welcome-screen.tsx"}),(0,y.jsx)(tr.P.h1,{className:"font-heading mb-2 text-center text-[28px] font-medium leading-[2.5rem] sm:text-[42px] sm:font-medium",initial:"hidden",animate:"visible",variants:tx,transition:{...tf,delay:.2},"data-sentry-element":"unknown","data-sentry-source-file":"welcome-screen.tsx",children:"Find the best AI for you"}),(0,y.jsxs)(tr.P.p,{className:"text-text-secondary text-center text-base font-normal sm:text-sm sm:font-normal",initial:"hidden",animate:"visible",variants:tx,transition:{...tf,delay:.3},"data-sentry-element":"unknown","data-sentry-source-file":"welcome-screen.tsx",children:["Compare answers across top AI models, share your feedback and power our public ",(0,y.jsx)(tv,{"data-sentry-element":"AnimatedLeaderboardLink","data-sentry-source-file":"welcome-screen.tsx"})]})]})})})})}var tb=a(295);function tj(e){let{anchorEl:t}=e,a=(0,e5.d)("md"),n=(0,M.useRef)(null),[s,r]=(0,M.useState)(null),{shouldShowEducation:l,dismissEducation:i}=tm(null!=t);if((0,M.useLayoutEffect)(()=>{if(!l)return;let e=e=>{let t=e.target;if(!t)return;let a=n.current;!(!a||a.contains(t))&&(("function"==typeof e.composedPath?e.composedPath():[]).includes(a)||i())};return document.addEventListener("pointerdown",e,!0),()=>{document.removeEventListener("pointerdown",e,!0)}},[l,t,i]),(0,M.useLayoutEffect)(()=>{let e,a,s;if(!l||!t)return;let i=()=>{var e,a;let s=t.getBoundingClientRect();if(!(s.width>0||s.height>0))return void r(null);let l=window.scrollY,i=window.scrollX,o=window.innerWidth,d=s.left+i+s.width/2,c=null!=(a=null==(e=n.current)?void 0:e.offsetWidth)?a:0,u=0;if(c>0){let e=d-c/2,t=i+16-e,a=e+c-(i+o-16);t>0?u=t:a>0&&(u=-a)}r({top:s.top+l,left:d,shift:u})},o=()=>{!e&&"undefined"!=typeof ResizeObserver&&n.current&&(e=new ResizeObserver(i)).observe(n.current)},d=0,c=()=>{(1&d++)==0&&(i(),o()),a=requestAnimationFrame(c)};return a=requestAnimationFrame(c),i(),o(),window.addEventListener("resize",i),window.addEventListener("scroll",i,!0),"undefined"!=typeof ResizeObserver&&(s=new ResizeObserver(i)).observe(t),()=>{null!=a&&cancelAnimationFrame(a),window.removeEventListener("resize",i),window.removeEventListener("scroll",i,!0),null==s||s.disconnect(),null==e||e.disconnect()}},[l,t]),"undefined"==typeof document||!l||!t||null==s)return null;let o=s.shift,d="translate(calc(-50% + ".concat(o,"px), calc(-100% - ").concat(12,"px))");return(0,tb.createPortal)((0,y.jsx)(tr.P.div,{style:{top:s.top,left:s.left},className:"absolute z-10",...!a&&{initial:"hidden",animate:l?"visible":"hidden",variants:tx,transition:{...tf,delay:.4}},children:(0,y.jsxs)("div",{ref:n,className:"border-border-faint bg-background relative w-[280px] rounded-[8px] border p-3 text-left shadow-lg",style:{transform:d},role:"dialog","aria-modal":!1,onClick:e=>e.stopPropagation(),children:[(0,y.jsxs)("div",{className:"mb-2 space-y-1",children:[(0,y.jsxs)("p",{className:"flex items-center gap-2",children:[(0,y.jsx)("span",{className:"text-interactive-link text-base font-semibold",children:"NEW"}),(0,y.jsx)("span",{className:"text-header-primary text-base font-medium",children:"Model Settings Menu"})]}),(0,y.jsx)("p",{className:"text-text-secondary text-sm leading-5",children:"We have integrated our leaderboards directly into chat to help you easily choose models across modalities."})]}),(0,y.jsx)(E.$,{variant:"tertiary",className:"h-7.5 w-full justify-center",size:"md",onClick:e=>{e.stopPropagation(),i()},onMouseDown:e=>e.stopPropagation(),children:"Got it"}),(0,y.jsx)("span",{className:"border-border-faint bg-background pointer-events-none absolute left-1/2 top-full h-3 w-3 border border-l-0 border-t-0",style:{transform:"translate(calc(-50% - ".concat(o,"px), -6px) rotate(45deg)")}})]})}),document.body)}var tw=a(13830);function tN(e){let{setSearchValue:t,modelA:a,modelB:n,searchValue:s,models:r,handleSelectModel:l,enforceSelectionOnClose:i,currentArena:o,onArenaChange:d,anchorRequiresImageUpload:c,hasImageAttachment:u,selectedArenaOptionId:m,disabledArenaOptionIds:p,disabledFlags:x,isAddMandatory:f,open:h,setOpen:g,triggerVariant:v}=e,[b,j]=(0,M.useState)(null),w=(0,M.useRef)(!1),N=(0,M.useRef)(0),E=()=>+!!a+ +!!n,A=(0,M.useRef)(E()),C=(null==x?void 0:x.isAddDisabled)?1:2;return(0,M.useEffect)(()=>{h&&i&&(N.current=f?C:1)},[h,i,f,C]),(0,M.useEffect)(()=>{if(!h)return;let e=A.current,a=E();e<2&&a>=2&&(w.current=!0,g(!1),t(""),w.current=!1),A.current=a},[a,n,h]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tj,{anchorEl:b,"data-sentry-element":"ModelSettingsMenuEducationPopover","data-sentry-source-file":"model-selector-drawer.tsx"}),(0,y.jsxs)(tw._s,{open:h,onOpenChange:e=>{if(e){T.z.capture({action:"model_menu_opened",params:{has_model_a:!!a,has_model_b:!!n}}),g(!0);return}if(w.current)return;if(!i)return void g(!1);let t=N.current;0===t||E()>=t?g(!1):g(!0)},"data-sentry-element":"Drawer","data-sentry-source-file":"model-selector-drawer.tsx",children:[(0,y.jsx)(tw.Uz,{asChild:!0,"data-sentry-element":"DrawerTrigger","data-sentry-source-file":"model-selector-drawer.tsx",children:(0,y.jsx)(tp,{modelA:a,modelB:n,onAnchorChange:j,variant:v,"data-sentry-element":"ModelSelectorTrigger","data-sentry-source-file":"model-selector-drawer.tsx"})}),(0,y.jsxs)(tw.zj,{"data-sentry-element":"DrawerContent","data-sentry-source-file":"model-selector-drawer.tsx",children:[(0,y.jsx)(tw.BE,{className:"hidden","aria-hidden":!0,"data-sentry-element":"DrawerHeader","data-sentry-source-file":"model-selector-drawer.tsx",children:(0,y.jsx)(tw.gk,{"data-sentry-element":"DrawerTitle","data-sentry-source-file":"model-selector-drawer.tsx",children:"Model Selector"})}),(0,y.jsx)(ts,{modelA:a,modelB:n,searchValue:s,setSearchValue:t,models:r,handleSelectModel:l,currentArena:o,onArenaChange:d,anchorRequiresImageUpload:c,hasImageAttachment:u,selectedArenaOptionId:m,disabledArenaOptionIds:p,disabledFlags:x,isAddMandatory:f,"data-sentry-element":"ModelSelectorDrawerContent","data-sentry-source-file":"model-selector-drawer.tsx"})]})]})]})}var tE=a(62364);let tA=M.forwardRef((e,t)=>{let{className:a,children:n,...s}=e;return(0,y.jsxs)(tE.bL,{ref:t,className:(0,B.cn)("relative overflow-hidden",a),...s,children:[(0,y.jsx)(tE.LM,{className:"h-full w-full rounded-[inherit] [&>div]:!block [&>div]:!h-full",children:n}),(0,y.jsx)(tC,{}),(0,y.jsx)(tE.OK,{})]})});tA.displayName=tE.bL.displayName;let tC=M.forwardRef((e,t)=>{let{className:a,orientation:n="vertical",...s}=e;return(0,y.jsx)(tE.VM,{ref:t,orientation:n,className:(0,B.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...s,children:(0,y.jsx)(tE.lr,{className:"bg-border relative flex-1 rounded-full"})})});function tT(e){let{modelA:t,modelB:a,searchValue:n,setSearchValue:s,models:r,handleSelectModel:l,currentArena:i,onArenaChange:o,anchorRequiresImageUpload:d,selectedArenaOptionId:c,disabledArenaOptionIds:u,hasImageAttachment:m,disabledFlags:p,isAddMandatory:x}=e,f="control"!==(0,W._P)("video-modality-enabled"),h=(0,M.useMemo)(()=>tt.filter(e=>"text-to-video"!==e.id||f),[f]),{items:g,showFade:v,onScroll:b,scrollRef:j,handleSearchValue:w,clearSearch:N,shouldHighlightMandatory:A}=tn({models:r,modelA:t,modelB:a,searchValue:n,setSearchValue:s,disabledFlags:p,isAddMandatory:x,currentArena:i,anchorRequiresImageUpload:d,hasImageAttachment:m});return(0,y.jsxs)(y.Fragment,{children:[A&&(0,y.jsx)("div",{className:"text-interactive-negative bg-interactive-negative/[0.12] mb-2 rounded-[4px] px-1.5 py-1 text-sm",children:"Please select another model"}),(0,y.jsxs)("div",{className:"border-border relative rounded-[4px] border [&_[cmdk-input-wrapper]]:border-0",children:[(0,y.jsx)(eE,{placeholder:"Search models",className:"mb-0 border-0",value:n,autoFocus:!0,onValueChange:w,"data-sentry-element":"CommandInput","data-sentry-source-file":"model-selector-popover-content.tsx"}),n&&(0,y.jsx)("button",{onClick:N,className:"hover:bg-surface-secondary absolute right-3 top-1/2 -translate-y-1/2 rounded-md p-1 transition-colors",type:"button",children:(0,y.jsx)(eS.A,{className:"text-text-tertiary size-3"})})]}),(0,y.jsx)("div",{className:"flex gap-2 py-2",children:h.map(e=>(0,y.jsxs)(E.$,{variant:"outline",disabled:null==u?void 0:u.includes(e.id),onClick:()=>{c===e.id?o("text"):o(e.id)},className:(0,B.cn)("flex-1 rounded-[4px]",c===e.id&&"text-text-tertiary bg-surface-secondary border-border-faint hover:text-text-tertiary"),children:[e.icon,e.label]},e.id))}),(0,y.jsx)("div",{className:"text-text-secondary py-2 text-sm font-medium",children:c?(()=>{var e;let t=null==(e=tt.find(e=>e.id===c))?void 0:e.label;return t?"Top ".concat(t," Models"):"Select an Arena"})():"Select an Arena"}),(0,y.jsx)("div",{className:"relative",children:(0,y.jsxs)(tA,{ref:j,onScroll:b,"data-sentry-element":"ScrollArea","data-sentry-source-file":"model-selector-popover-content.tsx",children:[(0,y.jsxs)(eA,{className:"max-h-[234px]","data-sentry-element":"CommandList","data-sentry-source-file":"model-selector-popover-content.tsx",children:[(0,y.jsx)(eC,{"data-sentry-element":"CommandEmpty","data-sentry-source-file":"model-selector-popover-content.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-center",children:[(0,y.jsx)("div",{className:"text-text-tertiary mb-3",children:(0,y.jsx)(ew.A,{className:"mr-2 size-6 shrink-0 opacity-50","data-sentry-element":"Search","data-sentry-source-file":"model-selector-popover-content.tsx"})}),(0,y.jsx)("p",{className:"text-text-secondary mb-1 text-sm",children:"No models found"}),(0,y.jsx)("p",{className:"text-text-tertiary text-xs",children:"Try adjusting your search term"})]})}),(0,y.jsx)(eT,{className:"relative p-0 pb-2 [&_[cmdk-group-items]_[data-selected=true]+[cmdk-item]]:border-t-transparent","data-sentry-element":"CommandGroup","data-sentry-source-file":"model-selector-popover-content.tsx",children:g.map(e=>{var t;let{model:a,isSelected:n,isLocked:s,isDisabled:r}=e;return(0,y.jsxs)(e_,{value:null!=(t=a.publicName)?t:a.id,onSelect:()=>{(n||!r)&&(s||l(a.id))},disabled:r,className:(0,B.cn)("border-border-faint flex cursor-pointer items-center gap-2 rounded-[0px] border-t px-3 py-3.5 transition-colors first:border-t-0 data-[selected=true]:rounded-[4px] data-[selected=true]:border-b-transparent data-[selected=true]:border-t-transparent",!n&&"hover:bg-surface-secondary",n&&"text-interactive-positive",r&&"cursor-not-allowed opacity-20",n&&s&&"cursor-not-allowed"),children:[(0,y.jsx)("span",{className:"text-text-tertiary text-sm font-medium",children:null!=a.rank?"".concat(a.rank,"."):""}),(0,y.jsx)(eM.D,{className:"size-4 flex-none",organization:a.organization}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,y.jsx)("span",{className:(0,B.cn)("truncate font-mono text-sm",n?"text-interactive-positive":"text-interactive-normal"),children:a.publicName}),n&&(0,y.jsx)(eR.A,{className:"text-interactive-positive h-4 w-4 flex-none"})]}),(0,y.jsx)("div",{className:"flex flex-none items-center gap-2",children:(0,y.jsx)(te,{capabilities:a.capabilities})})]},a.id)})})]}),(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none absolute bottom-0 left-0 right-0 z-10 -mx-6 h-[60px] rounded-b-3xl bg-[linear-gradient(0deg,rgba(253,253,254,1)_0%,rgba(253,253,254,0)_100%)] transition-opacity duration-150 ease-out dark:bg-[linear-gradient(0deg,rgba(29,29,32,1)_0%,rgba(29,29,32,0)_100%)]",v?"opacity-100":"opacity-0")})]})})]})}tC.displayName=tE.VM.displayName;let t_=tr.P.create(eN);function tk(e){let{setSearchValue:t,modelA:a,modelB:n,searchValue:s,models:r,handleSelectModel:l,enforceSelectionOnClose:i,currentArena:o,onArenaChange:d,anchorRequiresImageUpload:c,hasImageAttachment:u,selectedArenaOptionId:m,disabledArenaOptionIds:p,disabledFlags:x,isAddMandatory:f,open:h,setOpen:g,triggerVariant:v}=e,[b,j]=(0,M.useState)(null),w=(0,M.useRef)(!1),N=(0,M.useRef)(0),[E,A]=(0,M.useState)(0),C=(null==x?void 0:x.isAddDisabled)?1:2,_=()=>+!!a+ +!!n;h&&i&&(N.current=f?C:1);let k=async e=>{w.current=!0;try{await d(e)}finally{w.current=!1}},I=(0,M.useRef)(_());return(0,M.useEffect)(()=>{if(!h)return;let e=I.current,a=_();e<2&&a>=2&&(w.current=!0,g(!1),t(""),w.current=!1),I.current=a},[a,n,h]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tj,{anchorEl:b,"data-sentry-element":"ModelSettingsMenuEducationPopover","data-sentry-source-file":"model-selector-popover.tsx"}),(0,y.jsxs)(ek.AM,{open:h,onOpenChange:e=>{if(e){T.z.capture({action:"model_menu_opened",params:{has_model_a:!!a,has_model_b:!!n}}),g(!0);return}if(w.current)return;if(!i){g(!1),t("");return}let s=_(),r=N.current;0===r||s>=r?(g(!1),t("")):(g(!0),A(e=>e+1))},"data-sentry-element":"Popover","data-sentry-source-file":"model-selector-popover.tsx",children:[(0,y.jsx)(ek.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"model-selector-popover.tsx",children:(0,y.jsx)(tp,{modelA:a,modelB:n,onAnchorChange:j,variant:v,"data-sentry-element":"ModelSelectorTrigger","data-sentry-source-file":"model-selector-popover.tsx"})}),(0,y.jsx)(ek.hl,{className:"data-[state=closed]:zoom-out-100 data-[state=open]:zoom-in-100 data-[side=bottom]:slide-in-from-top-0 data-[side=left]:slide-in-from-right-0 data-[side=right]:slide-in-from-left-0 data-[side=top]:slide-in-from-bottom-0 relative w-[540px] origin-[--radix-popover-content-transform-origin] bg-transparent shadow-none",align:"start",sideOffset:4,side:"top",onOpenAutoFocus:e=>e.preventDefault(),onClick:e=>e.stopPropagation(),"data-sentry-element":"PopoverContent","data-sentry-source-file":"model-selector-popover.tsx",children:(0,y.jsx)(t_,{className:"bg-background rounded-[12px] px-4 pb-0 pt-4 shadow-lg",initial:{scale:1},animate:{scale:E>0?[1,.98,1]:1,x:E>0?[0,-2,0]:0},transition:{duration:.4,ease:"easeOut"},"data-sentry-element":"MotionCommand","data-sentry-source-file":"model-selector-popover.tsx",children:(0,y.jsx)(tT,{modelA:a,modelB:n,searchValue:s,setSearchValue:t,models:r,handleSelectModel:l,currentArena:o,onArenaChange:k,anchorRequiresImageUpload:c,hasImageAttachment:u,selectedArenaOptionId:m,disabledArenaOptionIds:p,disabledFlags:x,isAddMandatory:f,"data-sentry-element":"ModelSelectorPopoverContent","data-sentry-source-file":"model-selector-popover.tsx"})},E)})]})]})}var tI=a(8876);function tS(e){let{models:t,onToggleModel:a}=e,n=(0,e5.d)("md"),s="treatment"===(0,W._P)("3m-model-selector");return 0===t.length?null:(0,y.jsx)("div",{className:(0,B.cn)("flex w-full flex-row items-center gap-2",n&&"order-1 px-2 pb-2"),"data-sentry-component":"SelectedModelsList","data-sentry-source-file":"selected-models-list.tsx",children:t.map(e=>{var t;let{model:r,locked:l}=e;return(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-raised text-text-primary flex items-center gap-3 rounded-[6px] px-2 py-1.5",n&&"w-1/2 min-w-0 flex-1",l&&"opacity-60"),children:[(0,y.jsx)(eM.D,{className:"size-4 flex-none",organization:r.organization}),s&&(0,y.jsx)("span",{className:"max-w-[180px] flex-1 truncate text-sm",children:r.publicName}),(0,y.jsx)("button",{type:"button","aria-label":"Remove ".concat(null!=(t=r.publicName)?t:r.id),className:"text-interactive-negative flex-none",disabled:l,onClick:()=>{l||a(r.id)},children:(0,y.jsx)(tI.A,{className:"size-4"})})]},r.id)})})}function tR(e){var t,a,n;let{textAreaRef:s,variant:r="regular"}=e,l=(0,e5.d)("md"),i=(0,I.md)(eP),{modality:o,setMode:d,messages:c,evaluationSessionHasImageAttachment:u}=(0,U.g)((0,H.k)(e=>({modality:e.modality,setMode:e.setMode,messages:e.messages,evaluationSessionHasImageAttachment:e.messages.some(e=>{var t;return e.role===b.PG.USER&&(null==(t=e.experimental_attachments)?void 0:t.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("image/")}))})}))),{models:m,modelAId:p,modelBId:x,setModelAId:f,setModelBId:h}=(0,ef.g)(e=>e),[,g]=(0,e6._)(),[v,j]=(0,M.useState)(""),[w,N]=(0,M.useState)(!1),E=(0,W._P)("3m-model-selector"),A="control"!==(0,W._P)("video-modality-enabled"),C=(0,M.useCallback)(e=>{switch(e){case"vision":return e=>(0,eh.S1)(e);case"text-to-image":return e=>(0,eh.hK)(e);case"image-edit":return e=>(0,eh.j4)(e);case"search":return e=>(0,eh.cK)(e);case"webdev":return e=>(0,eh.JQ)(e);case"text-to-video":if(!A)return e=>(0,eh.oN)(e);return e=>(0,eh.D_)(e);case"image-to-video":if(!A)return e=>(0,eh.oN)(e);return e=>(0,eh.HI)(e);default:return e=>(0,eh.oN)(e)}},[A]),_=null!=(t=({[b.Jg.CHAT]:"text",[b.Jg.IMAGE]:"text-to-image",[b.Jg.SEARCH]:"search",[b.Jg.VIDEO]:"text-to-video",[b.Jg.WEBDEV]:"webdev",[b.Jg.P2L]:"text",[b.Jg.AUTO]:"text"})[o])?t:"text",k=i.some(e=>{var t;return null==(t=e.file.type)?void 0:t.startsWith("image/")})||u,S=(0,M.useMemo)(()=>{if(!_)return null;switch(_){case"vision":case"image-edit":case"multi-image-edit":return"text-to-image";default:{let e=tt.find(e=>e.id===_);return e?e.id:null}}},[_]),R=(0,M.useMemo)(()=>k?tt.map(e=>e.id).filter(e=>"search"===e||"webdev"===e):[],[k]),D=(0,M.useMemo)(()=>{let e=null!=m?m:[],t=C(_);return e.filter(e=>null!=e.organization).filter(t)},[m,_,C]),z=null!=(a=D.find(e=>e.id===p))?a:null,O=null!=(n=D.find(e=>e.id===x))?n:null,L=c.length>0,P=L&&c.some(e=>"b"===e.participantPosition),B=L&&!P,F=(0,M.useCallback)((e,t)=>{let a=b.lY.BATTLE;e&&t?a=b.lY.SIDE_BY_SIDE:(e||t)&&(a=b.lY.DIRECT),L||d(a),g(a)},[L,d,g]),V=(0,M.useCallback)(e=>{let t=null!=p?p:null,a=null!=x?x:null;if(t===e){f(null),F(null,a),L&&N(!0);return}if(a===e){h(null),F(t,null),L&&N(!0);return}if(!t){f(e),T.z.capture({action:"model_selected",params:{model_id:e,slot:"a"}}),F(e,a);return}a||(h(e),T.z.capture({action:"model_selected",params:{model_id:e,slot:"b"}}),F(t,e))},[p,x,f,h,F,L]),G=(0,M.useMemo)(()=>{let e=[];return z&&e.push({model:z,locked:!1}),O&&e.push({model:O,locked:!1}),e},[z,O,!1,!1]),J=e3(s),Y=async e=>{J({text:b.Jg.CHAT,vision:b.Jg.CHAT,"text-to-image":b.Jg.IMAGE,"image-edit":b.Jg.IMAGE,search:b.Jg.SEARCH,"text-to-video":b.Jg.VIDEO,webdev:b.Jg.WEBDEV,"image-to-video":b.Jg.VIDEO,"multi-image-edit":b.Jg.IMAGE}[e])};return"treatment"!==E&&"treatment-2"!==E?null:l?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tN,{setSearchValue:j,searchValue:v,models:D,handleSelectModel:V,enforceSelectionOnClose:L,modelA:z,modelB:O,currentArena:_,onArenaChange:Y,anchorRequiresImageUpload:null,hasImageAttachment:k,disabledFlags:{isAddDisabled:B,isRemoveADisabled:!1,isRemoveBDisabled:!1,isModalityLocked:L},isAddMandatory:L,selectedArenaOptionId:S,disabledArenaOptionIds:R,open:w,setOpen:N,triggerVariant:r}),(0,y.jsx)(tS,{models:G,onToggleModel:V})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(tk,{setSearchValue:j,searchValue:v,models:D,handleSelectModel:V,enforceSelectionOnClose:L,modelA:z,modelB:O,currentArena:_,onArenaChange:Y,anchorRequiresImageUpload:null,hasImageAttachment:k,disabledFlags:{isAddDisabled:B,isRemoveADisabled:!1,isRemoveBDisabled:!1,isModalityLocked:L},isAddMandatory:L,selectedArenaOptionId:S,disabledArenaOptionIds:R,open:w,setOpen:N,triggerVariant:r,"data-sentry-element":"ModelSelectorPopover","data-sentry-source-file":"model-selector.tsx"}),(0,y.jsx)(tS,{models:G,onToggleModel:V,"data-sentry-element":"SelectedModelsList","data-sentry-source-file":"model-selector.tsx"})]})})}var tM=a(49190);let tD=[{href:"/how-it-works",label:"How it Works"},{href:"/about",label:"About Us"},{href:$.Rj.jobBoard,label:"Join the Team"}];function tz(){let e=(0,F.useRouter)(),t=(0,U.g)(e=>e.id),a=(0,U.g)(e=>{var t;return(null==(t=e.messages)?void 0:t.length)>0}),n=(0,U.g)(e=>e.mode),s="".concat($.Rj.newSiteBugReport,"?prefill_evaluation_id=").concat(t),r=(0,M.useContext)(U.P),{mutate:l,isPending:i}=(0,K.d$)(),{buildChatModeQueryString:o}=(0,Q.z)(),d=(0,G.E)(),c=(0,M.useCallback)(()=>{r&&r.setState((0,X.Oe)(n,d));let t=o(n);e.push("/c/new".concat(t))},[e,r,n,o,d]);return(0,y.jsxs)(tM.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"EvaluationHeaderMenu","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)(tM.ty,{asChild:!0,className:"touch-hitbox","data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsx)(E.$,{variant:"ghost",type:"button",size:"icon","data-sentry-element":"Button","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsx)(Z.A,{"data-sentry-element":"Ellipsis","data-sentry-source-file":"evaluation-header.tsx"})})}),(0,y.jsxs)(tM.SQ,{align:"end",sideOffset:0,className:"bg-surface-primary w-[220px]","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"evaluation-header.tsx",children:[a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(tM._2,{onClick:c,className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]",children:[(0,y.jsx)(ee.A,{className:"size-4"}),"New Chat"]}),(0,y.jsxs)(tM._2,{disabled:i,onClick:()=>l(t),className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]",children:[(0,y.jsx)(et.A,{className:"size-4"}),"Delete Chat"]})]}),(0,y.jsx)(tM._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsxs)(N.Link,{href:$.Rj.newSiteSurvey,target:"_blank",rel:"noopener noreferrer",className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]","data-sentry-element":"Link","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)(ea.A,{className:"size-4","data-sentry-element":"ClipboardEditIcon","data-sentry-source-file":"evaluation-header.tsx"}),"Send Feedback"]})}),(0,y.jsx)(tM._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsxs)(N.Link,{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]","data-sentry-element":"Link","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)(en.A,{className:"size-4","data-sentry-element":"Bug","data-sentry-source-file":"evaluation-header.tsx"}),"Report Bug"]})})]})]})}function tO(){let{showLoginButton:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,W._P)("3m-model-selector"),a=(0,U.g)(e=>e.mode)===b.lY.BATTLE,{toggleSidebar:n}=(0,V.cL)();return(0,y.jsxs)("div",{className:"bg-surface-primary border-border-faint flex-shrink-0 border-b","data-sentry-component":"EvaluationHeader","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)("div",{className:"flex flex-col md:hidden",children:(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-14 w-full flex-none flex-wrap items-center justify-between gap-2 px-3 py-2.5",{"py-1":a}),children:[(0,y.jsx)(E.$,{variant:"textLink",size:"icon",onClick:n,className:"touch-hitbox","data-sentry-element":"Button","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsx)(er.A,{size:18,"data-sentry-element":"PanelRightClose","data-sentry-source-file":"evaluation-header.tsx"})}),(()=>{switch(t){case"treatment":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tR,{}),(0,y.jsx)(E.$,{variant:"textLink",size:"icon",asChild:!0,className:"touch-hitbox",children:(0,y.jsx)(N.Link,{href:"/",disableLinkColor:!0,children:(0,y.jsx)(es.A,{size:18})})})]});case"treatment-2":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(N.Link,{href:"/",disableLinkColor:!0,className:"touch-hitbox mx-auto flex justify-center",children:(0,y.jsx)(q.E,{className:"size-6"})}),(0,y.jsx)(E.$,{variant:"textLink",size:"icon",asChild:!0,className:"touch-hitbox",children:(0,y.jsx)(N.Link,{href:"/",disableLinkColor:!0,children:(0,y.jsx)(es.A,{size:18})})})]});default:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(em,{}),(0,y.jsx)(E.$,{variant:"textLink",size:"icon",asChild:!0,className:"touch-hitbox",children:(0,y.jsx)(N.Link,{href:"/",disableLinkColor:!0,children:(0,y.jsx)(es.A,{size:18})})}),(0,y.jsx)(ez,{})]})}})()]})}),(0,y.jsxs)("div",{className:"hidden h-12 items-center justify-between px-4 md:flex",children:[(0,y.jsx)("div",{className:"flex-2 flex min-w-0 items-center justify-start gap-3 lg:gap-4",children:(()=>{switch(t){case"treatment":return(0,y.jsx)(tR,{});case"treatment-2":return tD.map(e=>(0,y.jsx)(N.Link,{href:e.href,disableLinkColor:!0,className:"text-interactive-active text-sm font-medium",target:"_blank",rel:"noopener noreferrer",children:e.label},e.href));default:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(em,{}),(0,y.jsx)(ez,{})]})}})()}),(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,y.jsx)(tL,{}),(0,y.jsx)(tz,{"data-sentry-element":"EvaluationHeaderMenu","data-sentry-source-file":"evaluation-header.tsx"})]})]})]})}function tL(){let e=(0,_.kH)(_.Q_),{setLocation:t}=(0,eL.G)(),a=function(){let[e]=(0,J.ZA)("theme",Y),t=(0,W._P)("rebrand");return"rebrand"===e||"treatment"===t}();return e?(0,y.jsx)(E.$,{variant:"tertiary",onClick:()=>t("top-right"),children:a?"Sign In":"Login"}):(0,y.jsx)("div",{"data-sentry-component":"LoginArea","data-sentry-source-file":"evaluation-header.tsx"})}let tP="chat-area",tB="100px",tU=new Date("2025-09-05T00:00:00.000Z"),tF=(0,a(19219).A)(e=>t=>{e.current.scrollTop=t}),tH=M.useLayoutEffect;var tV=a(78753);let tG=tV.z.object({error:tV.z.string()});tV.z.object({success:tV.z.boolean()});var tW=a(70075),tJ=a(13354);let tY=tV.z.object({hashedClientIp:tV.z.string().optional(),clientCountry:tV.z.string().optional(),clientAsn:tV.z.string().optional(),botScore:tV.z.string().optional(),isVerifiedBot:tV.z.string().optional(),botDetectionIds:tV.z.string().optional(),verifiedBotCategory:tV.z.string().optional(),ja3:tV.z.string().optional(),ja4:tV.z.string().optional(),ja4_h2h3_ratio_1h:tV.z.string().optional(),ja4_heuristic_ratio_1h:tV.z.string().optional(),ja4_reqs_quantile_1h:tV.z.string().optional(),ja4_uas_rank_1h:tV.z.string().optional(),ja4_browser_ratio_1h:tV.z.string().optional(),ja4_paths_rank_1h:tV.z.string().optional(),ja4_reqs_rank_1h:tV.z.string().optional(),ja4_cache_ratio_1h:tV.z.string().optional(),ja4_ips_rank_1h:tV.z.string().optional(),ja4_ips_quantile_1h:tV.z.string().optional()}).catchall(tV.z.unknown());(0,tJ.tA)()(tV.z.object({messageId:tV.z.string().uuid(),value:tV.z.nativeEnum(b.ut),recaptchaV3Token:tV.z.string().nullable(),cloudflareMetadata:tY.optional()}));let tQ=(0,tJ.tA)()(tW.Tz.openapi({example:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",messageId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaab",modelId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaac",value:b.ut.UPVOTE}}));(0,tJ.tA)()(tV.z.object({value:tV.z.nativeEnum(b.sb),messageAId:tV.z.string().uuid(),messageBId:tV.z.string().uuid(),evaluationSessionId:tV.z.string().uuid(),turnstileToken:tV.z.string().nullable(),recaptchaV3Token:tV.z.string().nullable(),modelsRevealed:tV.z.boolean().optional(),didInspectBothMobileHorizontalResponses:tV.z.boolean().optional(),cloudflareMetadata:tY.optional()}));let tq=(0,tJ.tA)()(tW.xA.openapi({example:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",messageAId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaab",messageBId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaac",modelAId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaad",modelBId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaae",value:b.sb.MODEL_A,arenaId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaf"}}));(0,tJ.tA)()(tV.z.object({messageIds:tV.z.array(tV.z.string().uuid()),winningMessageId:tV.z.string().uuid()})),(0,tJ.tA)()(tW.Ck.openapi({example:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",messageIds:["aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaab","aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaac"],modelIds:["aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaad","aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaae"],winningMessageId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaf",winningModelId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaag"}}));var t$=a(15414);let tK=t$.z.enum(["text/html","text/javascript","text/css","text/markdown","application/json","text/plain"]),tX=t$.z.object({path:t$.z.string(),content:t$.z.string(),contentType:tK}),tZ=t$.z.object({kind:t$.z.literal("vanilla")}),t0=t$.z.object({kind:t$.z.literal("react-vite-tailwind")}),t1=t$.z.discriminatedUnion("kind",[tZ,t0]),t2=t$.z.object({status:t$.z.literal("success")}),t4=t$.z.object({status:t$.z.literal("error"),message:t$.z.string()}),t3=t$.z.object({evaluationSessionId:t$.z.string().uuid()}).partial(),t5=t$.z.discriminatedUnion("status",[t2,t4]),t6=t$.z.object({v:t$.z.literal(1),template:t1,files:t$.z.array(tX),buildResult:t5,metadata:t3.default({})}),t8=t$.z.object({type:t$.z.literal("webdev"),event:t$.z.discriminatedUnion("type",[t$.z.object({type:t$.z.literal("init"),files:t$.z.array(tX)}),t$.z.object({type:t$.z.literal("title"),title:t$.z.string()})])}),t9=t$.z.object({op:t$.z.literal("create_file"),file:tX}),t7=t$.z.object({op:t$.z.literal("edit_file"),file:tX,context:t$.z.string(),replacement:t$.z.string()}),ae=t$.z.object({op:t$.z.literal("read_file"),file:tX}),at=t$.z.object({op:t$.z.literal("list_files"),files:t$.z.array(tX)}),aa=t$.z.object({op:t$.z.literal("delete_file"),path:t$.z.string()}),an=t$.z.object({op:t$.z.literal("install_npm_packages"),packages:t$.z.array(t$.z.string()),stdout:t$.z.string(),stderr:t$.z.string()}),as=t$.z.discriminatedUnion("op",[t9,t7,ae,at,aa,an]),ar=t$.z.object({status:t$.z.literal("error"),path:t$.z.string(),message:t$.z.string(),error:t$.z.unknown().optional()}),al=tV.z.discriminatedUnion("type",[tV.z.object({type:tV.z.literal("text"),text:tV.z.string()}),tV.z.object({type:tV.z.literal("file"),data:tV.z.string(),mimeType:tV.z.string(),filename:tV.z.string().optional()}),tV.z.object({type:tV.z.literal("image"),image:tV.z.unknown(),mimeType:tV.z.string().optional()}),tV.z.object({type:tV.z.literal("reasoning"),text:tV.z.string()}),tV.z.object({type:tV.z.literal("redacted-reasoning")}),tV.z.object({type:tV.z.literal("thinking"),signature:tV.z.string(),thinking:tV.z.string()}),tV.z.object({type:tV.z.literal("tool-call"),toolCallId:tV.z.string(),toolName:tV.z.string(),args:tV.z.unknown()}),tV.z.object({type:tV.z.literal("tool-result"),toolCallId:tV.z.string(),toolName:tV.z.string(),result:tV.z.unknown()}),tV.z.object({type:tV.z.literal("search"),text:tV.z.string(),sources:tV.z.array(tV.z.unknown()).optional()}),tV.z.object({type:tV.z.literal("video"),url:tV.z.string(),mimeType:tV.z.string().optional()})]),ai=tV.z.array(al),ao=tV.z.union([tV.z.string(),tV.z.array(tV.z.discriminatedUnion("type",[tV.z.object({type:tV.z.literal("text"),text:tV.z.string()}),tV.z.object({type:tV.z.literal("image"),image:tV.z.string(),mimeType:tV.z.string().optional()}),tV.z.object({type:tV.z.literal("file"),data:tV.z.string(),filename:tV.z.string().optional(),mimeType:tV.z.string()})]))]),ad=tV.z.object({id:tV.z.string().uuid(),evaluationSessionId:tV.z.string().uuid(),evaluationId:tV.z.string().uuid(),role:tW.nU,parentMessageIds:tV.z.array(tV.z.string().uuid()),content:tV.z.union([tV.z.string(),ai]),reasoning:tV.z.string().optional(),experimental_attachments:tW.L2,modelId:tV.z.string().nullable().default(null),createdAt:tV.z.string(),updatedAt:tV.z.string(),participantPosition:tV.z.enum(["a","b"]),pairwiseFeedbackId:tV.z.string().optional(),pointwiseFeedbackId:tV.z.string().optional(),status:tV.z.nativeEnum(b.nH).default(b.nH.PENDING),failureReason:tV.z.string().nullable().default(null),sources:tV.z.array(tW.Mw).optional(),metadata:tV.z.record(tV.z.string(),tV.z.unknown()).optional()}),ac=(0,tJ.tA)()(tV.z.object({id:tV.z.string().uuid(),modality:tW.tH,arenaId:tV.z.string().uuid()})),au=tV.z.object({modality:tW.tH,shouldShowModalitySuggestion:tV.z.boolean(),suggestedModality:tW.tH.optional(),confidence:tJ.A6,disabledModalities:tV.z.array(tW.tH),latencyMs:tV.z.number(),thresholds:tJ.kA,wasAutoSelected:tV.z.boolean(),treatmentVariant:tV.z.string()}),am=tV.z.object({previousEvaluationSessionId:tV.z.string().uuid(),originalPredictedModality:tW.tH,acceptedSuggestedModality:tW.tH,originalConfidence:tJ.A6,userAcceptedSuggestion:tV.z.boolean()}),ap=tV.z.object({isPresetPrompt:tV.z.boolean().optional(),presetLabel:tV.z.string().optional(),autoModalityMetadata:au.optional(),autoModalitySuggestionAcceptance:am.optional()}),ax=tV.z.object({content:ao,experimental_attachments:tW.L2.optional(),metadata:ap.optional()}).refine(function(e){var t,a;let n,s=0;if("string"==typeof e.content)s=1,n=e.content;else{let a=["text","image","file"];if(e.content.some(e=>!a.includes(e.type)))return!1;let r=e.content.filter(e=>"text"===e.type);s=r.length,n=null==(t=r[0])?void 0:t.text}return!(1!==s||null==n||0===n.trim().length||(null!=(a=e.experimental_attachments)?a:[]).some(e=>{var t,a,n;let s=null!=(n=null==(t=e.contentType)?void 0:t.toLowerCase())?n:"";if(s.length>0&&(ah.some(e=>s.startsWith(e))||ag.has(s)))return!0;if(null==(a=e.url)?void 0:a.startsWith("data:")){let t=e.url.match(/^data:([^;,]+)/);if(t&&t[1]){let e=t[1].toLowerCase();if(ah.some(t=>e.startsWith(t))||ag.has(e)||e.includes("text"))return!0}}return!1}))},{message:"User message is invalid"}),af=tV.z.object({id:tV.z.string().uuid(),userMessage:ax,mode:tW.Ji,modality:tW.tH,modelAId:tV.z.string().uuid().optional(),modelBId:tV.z.string().uuid().optional(),userMessageId:tV.z.string().uuid(),modelAMessageId:tV.z.string().uuid(),modelBMessageId:tV.z.string().uuid().optional(),recaptchaV2Token:tV.z.string().nullish(),recaptchaV3Token:tV.z.string().nullish(),cloudflareMetadata:tY.optional(),webhook:tV.z.object({url:tV.z.string().url(),data:tV.z.string().optional()}).optional(),featureFlags:tV.z.object({editImageButtonEnabled:tV.z.enum(["control","treatment-1"])}).optional()});tV.z.object({}).openapi({}),tV.z.object({id:tV.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"})}),tV.z.object({messageId:tV.z.string().uuid().openapi({param:{name:"messageId",in:"path"},example:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"})}),tV.z.object({id:tV.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"})}),tV.z.object({keepMessageContent:(0,tJ.Gv)(!1)}),(0,tJ.tA)()(tV.z.object({id:tV.z.string().uuid(),userId:tV.z.string().uuid(),title:tV.z.string(),mode:tW.Ji,visibility:tW.Es,lastMessageIds:tV.z.array(tV.z.string()),deletedAt:tV.z.string().nullable(),createdAt:tV.z.string(),updatedAt:tV.z.string(),messages:tV.z.array(ad),maskedEvaluations:tV.z.array(ac),pairwiseFeedbacks:tV.z.array(tq),pointwiseFeedbacks:tV.z.array(tQ)})),tV.z.object({id:tV.z.string().uuid(),manifest:t6,previewUrl:tV.z.string().url()}),tV.z.object({id:tV.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"})}),af.omit({mode:!0}),tV.z.object({}).openapi({}),tV.z.object({}).openapi({}),tV.z.object({evaluationSessionId:tV.z.string().uuid().openapi({param:{name:"evaluationSessionId",in:"path"},example:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"}),messageId:tV.z.string().uuid().openapi({param:{name:"messageId",in:"path"},example:"asdf"})}),tV.z.object({recaptchaV2Token:tV.z.string().nullish(),recaptchaV3Token:tV.z.string().nullish(),cloudflareMetadata:tY.optional(),featureFlags:tV.z.object({editImageButtonEnabled:tV.z.enum(["control","treatment-1"])}).optional()}),tV.z.object({evaluationSessionIds:tV.z.array(tV.z.string()),r2FilesDeleted:tV.z.array(tV.z.string()),r2Errors:tV.z.array(tV.z.string())}),tG.extend({modelId:tV.z.string().uuid().optional()});let ah=["text/"],ag=new Set(["application/json","application/xml","application/javascript","application/xhtml+xml","application/rtf","application/x-www-form-urlencoded","application/x-www-form-urlencoded;charset=utf-8","application/yaml","application/x-yaml","application/toml","application/csv","application/x-csv"]);var av=a(97398);async function ay(e,t){let{onTextChunk:a,onImageChunk:n,onSourceChunk:s,onVideoChunk:r,onWebDevChunk:l,onReasoningChunk:i,onToolCallChunk:o,onToolResultChunk:d,onFinish:c,onError:u}=t,m=new TextDecoder("utf-8"),p="";for(;;){var x,f,h,g;let{done:t,value:v}=await e.read();if(t)break;let y=(p+=m.decode(v)).split("\n");for(let e=0;e<y.length-1;e++){let t=y[e];if(null==t)continue;let[m,p]=0===t.length?["",""]:[t.charAt(0),t.slice(1)];if(null==p?void 0:p.includes(b.qe)){u(m);continue}let{type:g,value:v}=(0,av.D9)(p);if("error"===g){u(m,"string"==typeof v?v:void 0);continue}if("finish_message"===g&&(null==v?void 0:v.finishReason)==="error"){u(m);continue}if("finish_message"===g){c(m);continue}if("tool_call_delta"===g&&"citation-source"===v.toolCallId)try{let e=JSON.parse(v.argsTextDelta).source;e&&s(m,e)}catch(e){}if("text"===g&&a(m,v),"reasoning"===g&&i&&i(m,v),"tool_call"===g&&o&&o(m,v),"tool_result"===g&&d&&d(m,v),"data"===g){if(v.length>0&&(null==(x=v[0])?void 0:x.type)==="image"){let e=v[0];e.data&&!e.image&&(e.image="data:".concat(e.mimeType||"image/png",";base64,").concat(e.data)),n(m,e)}if(v.length>0&&(null==(f=v[0])?void 0:f.type)==="video"&&r(m,v[0]),v.length>0&&(null==(h=v[0])?void 0:h.type)==="webdev"){let e=t8.safeParse(v[0]);e.success?l(m,e.data.event):console.error("Invalid webdev part",e.error)}}"file"===g&&v.mimeType.startsWith("image")&&n(m,{type:"image",mimeType:v.mimeType,image:"data:".concat(v.mimeType||"image/png",";base64,").concat(v.data)})}p=null!=(g=y[y.length-1])?g:""}}var ab=a(15359),aj=a(47470),aw=a(19938);function aN(){return{selectedMode:(0,k.eU)("a"),selectedView:(0,k.eU)("preview"),activeUserMessage:(0,k.eU)(null),selectedFilePath:(0,k.eU)(null),mobileDrawerOpen:(0,k.eU)(!1),iframeRefreshVersion:(0,k.eU)(0)}}let aE=(0,M.createContext)(aN());function aA(e){let{children:t}=e,[a]=(0,M.useState)(()=>aN());return(0,y.jsx)(aE,{value:a,"data-sentry-element":"WebDevStateContext","data-sentry-component":"WebDevStateProvider","data-sentry-source-file":"state.tsx",children:t})}function aC(){let e=(0,M.useContext)(aE);if(!e)throw Error("useWebDevAtoms must be used within a WebDevStateProvider");return e}function aT(){let e=(0,_.kH)(e=>{var t;return null==(t=e.user)?void 0:t.id}),[t,a]=(0,U.g)((0,H.k)(e=>[e.id,e.mode])),n=ak(),[s,r]=(0,I.fp)(aC().selectedMode);return[s,(0,M.useCallback)((s,l,i)=>{r(r=>(i&&n(i),s!==r&&T.z.capture({action:"webdev_model_selected",params:{selected_model:s,previous_model:r,source:l,user_id:e,evaluation_id:t,mode:a}}),s))},[t,a,r,e,n])]}function a_(){let e=(0,_.kH)(e=>{var t;return null==(t=e.user)?void 0:t.id}),[t,a]=(0,U.g)((0,H.k)(e=>[e.id,e.mode])),[n,s]=(0,I.fp)(aC().selectedView);return[n,(0,M.useCallback)((n,r)=>{s(s=>(n!==s&&T.z.capture({action:"webdev_view_selected",params:{selected_view:n,previous_view:s,source:r,user_id:e,evaluation_id:t,mode:a}}),n))},[t,a,s,e])]}function ak(){return(0,I.Xr)(aC().activeUserMessage)}function aI(e){let t=(0,I.md)(aC().activeUserMessage),a=(0,U.g)(e=>e.messages),n=(0,U.g)(e=>e.lastMessageIds),s=a.find(a=>a.participantPosition===e&&(t?a.parentMessageIds.includes(t):n.includes(a.id)));return null!=s?s:null}function aS(){return(0,I.fp)(aC().selectedFilePath)}function aR(){return(0,I.fp)(aC().mobileDrawerOpen)}function aM(){return(0,I.fp)(aC().iframeRefreshVersion)}var aD=a(24741),az=a(56701),aO=a(15428),aL=a(71556),aP=a(74108);let aB=(0,j.createServerReference)("40acda58013e52db5fa37cdcbdd20356e2e7cf8270",j.callServer,void 0,j.findSourceMapURL,"getWebDevMetadata"),aU=e=>(0,aP.j)({queryKey:["webdev","metadata",e],queryFn:async()=>{let t=await aB(e);if(!t.success)throw Error(t.error||"Failed to fetch webdev metadata");return t.data}});function aF(){let e=(0,aL.useQueryClient)();return async t=>{await e.invalidateQueries(aU(t))}}function aH(){let e=(0,aL.useQueryClient)();return(0,M.useCallback)(async(t,a)=>{e.setQueryData(aU(t).queryKey,{status:"pending",files:a})},[e])}function aV(){let e=(0,aL.useQueryClient)();return(0,M.useCallback)((t,a)=>{e.setQueryData(aU(t).queryKey,e=>{if(e)switch(a.op){case"create_file":return{status:"pending",files:[...e.files,a.file]};case"edit_file":return{status:"pending",files:e.files.map(e=>e.path===a.file.path?a.file:e)};default:return e}})},[e])}var aG=a(90574);let aW=(0,aG.Mz)([e=>e.messages,e=>e.lastMessageIds],(e,t)=>{let a=null,n=null;for(let l of t){var s,r;let t=e.find(e=>e.id===l);(null==t?void 0:t.participantPosition)===aD.BQ.a&&(a=null!=(s=null==t?void 0:t.modelId)?s:null),(null==t?void 0:t.participantPosition)===aD.BQ.b&&(n=null!=(r=null==t?void 0:t.modelId)?r:null)}return{modelAId:a,modelBId:n}});var aJ=a(88661),aY=a.n(aJ);let aQ={IMAGE:.8,VIDEO:.95,SEARCH:.8,CODE:.8},aq={video:b.Jg.VIDEO,image:b.Jg.IMAGE,search:b.Jg.SEARCH,code:b.Jg.WEBDEV,text:b.Jg.CHAT},a$={modality:b.Jg.CHAT,shouldShowModalitySuggestion:!1,confidence:{image:0,search:0,text:0,video:0,code:0},disabledModalities:[],latencyMs:0,thresholds:aQ};async function aK(e,t){let a=await fetch("/nextjs-api/auto-modality",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_prompt:e,has_image:t})});if(!a.ok)throw Error("Auto-modality API failed: ".concat(a.status));return a.json()}async function aX(e,t,a){var n,s,r;let l=performance.now(),i=function(e,t){let a=[];return e&&(a.push(b.Jg.SEARCH),a.push(b.Jg.WEBDEV)),t||a.push(b.Jg.VIDEO),a}(t,a),o=await aK(e,t),d=function(e,t){if(0===t.length)return e;let a=new Set;for(let e of t){let t=Object.keys(aq).find(t=>aq[t]===e);t&&a.add(t)}let n=0,s={...e};for(let e of Object.keys(s))a.has(e)?s[e]=0:n+=s[e];if(n>0)for(let e of Object.keys(s))a.has(e)||(s[e]=s[e]/n);else s.text=1,s.image=0,s.search=0,s.video=0,s.code=0;return s}(o.probabilities,i),c=function(e){var t;let a="text",n=e.text;for(let[t,s]of Object.entries(e))s>n&&(n=s,a=t);return null!=(t=aq[a])?t:b.Jg.CHAT}(d),u=null!=(r=aq[null!=(s=null==(n=Object.entries(d).sort((e,t)=>t[1]-e[1])[1])?void 0:n[0])?s:"text"])?r:b.Jg.CHAT,m=Math.round(performance.now()-l);return{modality:c,shouldShowModalitySuggestion:!0,suggestedModality:u,confidence:o.probabilities,disabledModalities:i,latencyMs:m,thresholds:aQ}}async function aZ(e,t,a,n){try{return{...await aX(e,t,a),wasAutoSelected:!0,treatmentVariant:n}}catch(e){return{...a$,wasAutoSelected:!1,treatmentVariant:n}}}var a0=a(11481);function a1(){let e=(0,M.useContext)(U.P),t=(0,M.useContext)(ef.Y),a=(0,M.useContext)(_.wm),n=(0,M.useContext)(ei.cY),{setLocation:s}=(0,eL.G)(),{addHistory:r,updateHistory:l,invalidateHistory:i}=(0,aO.m)(),{getRecaptchaV2Token:o}=(0,a0.eN)(),d=(0,W._P)("edit-image-button-enabled"),c=(0,az.b)(),u="control"!==(0,W._P)("video-modality-enabled"),m=(0,W._P)("auto-modality-enabled"),p=aH(),x=aV(),f=aF(),h=ak();return{appendMultiStream:(0,M.useCallback)(async g=>{var v,y,j,w,N,E,A,C,_;let k,I,S,R,M,D=performance.now();if(null==e)throw Error("Evaluation session store is not available");if(null==t)throw Error("Model store is not available");if(null==a)throw Error("User store is not available");if(null==n)throw Error("Evaluation session notification store is not available");let z=e.getState(),O=n.getState(),{userCreationPromise:L,user:P,setImageModalityRateLimitedUntil:B,userId:U}=a.getState(),F=t.getState(),H=z.mode===b.lY.BATTLE?null:null!=(w=F.modelAId)?w:null,V=z.mode===b.lY.SIDE_BY_SIDE&&null!=(N=F.modelBId)?N:null,G=F.updateModel,W=z.mode,J=z.modality,Y=W===b.lY.BATTLE,Q=W===b.lY.DIRECT,q=W===b.lY.SIDE_BY_SIDE,$=z.messages[z.messages.length-1],K=0===z.messages.length;null!=$&&[b.nH.FAILED,b.nH.FLAGGED].includes($.status)&&z.deleteMessage($.id);let X=(0,aw.generateSafeUUIDv7)(),Z=z.lastMessageIds,ee={id:X,role:b.PG.USER,content:g.content,experimental_attachments:g.experimental_attachments,parentMessageIds:null!=Z?Z:[],participantPosition:aD.BQ.a,modelId:null,evaluationSessionId:z.id,status:b.nH.PENDING,failureReason:null};z.addMessages([ee]),J===b.Jg.WEBDEV&&h(ee.id);let et=[],ea=(0,aw.generateSafeUUIDv7)(),en={id:ea,role:b.PG.ASSISTANT,content:"",reasoning:"",experimental_attachments:[],parentMessageIds:[ee.id],participantPosition:aD.BQ.a,modelId:H,evaluationSessionId:z.id,status:b.nH.PENDING,failureReason:null},es=!1;et.push(en);let er=!1;if(Q||(I={id:k=(0,aw.generateSafeUUIDv7)(),role:b.PG.ASSISTANT,content:"",reasoning:"",experimental_attachments:[],parentMessageIds:[ee.id],participantPosition:aD.BQ.b,modelId:V,evaluationSessionId:z.id,status:b.nH.PENDING,failureReason:null},et.push(I)),z.addMessages(et),z.setHasViewedLatestResponses(!1),J===b.Jg.AUTO&&K){z.setIsPredictingModality(!0);let e=a3(ee);J=(M=await aZ(e,(null!=(A=null==(E=g.experimental_attachments)?void 0:E.length)?A:0)>0,u,m)).modality,z.setModality(M.modality),z.setAutoModalityMetadata(M),z.setIsPredictingModality(!1)}null!=L&&await L;let el=null;try{el=await (0,a0.ic)("chat_submit")}catch(e){}let ei=ao.safeParse(g.content);if(!ei.success)return void console.error("Invalid content:",ei.error);let eo={id:z.id,mode:W,modelAId:Y?void 0:null!=H?H:void 0,modelBId:q&&null!=V?V:void 0,userMessageId:X,modelAMessageId:ea,modelBMessageId:k,userMessage:{content:ei.data,experimental_attachments:g.experimental_attachments,metadata:{...g.metadata,...M&&{autoModalityMetadata:M}}},modality:J,recaptchaV3Token:el,...J===b.Jg.IMAGE&&d?{featureFlags:{editImageButtonEnabled:d}}:{}},ed=0===z.messages.length||1===z.messages.length&&z.messages[0]&&[b.nH.FAILED].includes(z.messages[0].status);try{if(ed){let t=J===b.Jg.WEBDEV?"New Chat":a3(ee).substring(0,100);r({id:z.id,createdAt:z.createdAt,updatedAt:z.updatedAt,mode:W,modality:J,modelAId:H,modelBId:V,title:t}),null==e||e.setState(e=>({...e,title:t})),c&&O.addNotification({evaluationSessionId:z.id,modality:z.modality,mode:z.mode,modelAId:H,modelBId:V,userPrompt:t}),S=e=>fetch("/nextjs-api/stream/create-evaluation",{method:"POST",body:JSON.stringify({...eo,...e?{recaptchaV2Token:e,recaptchaV3Token:void 0}:{}})})}else c&&O.addNotification({evaluationSessionId:z.id,modality:z.modality,mode:z.mode,modelAId:H,modelBId:V,userPrompt:z.title}),S=e=>fetch("/nextjs-api/stream/post-to-evaluation/".concat(z.id),{method:"POST",body:JSON.stringify({...eo,...e?{recaptchaV2Token:e,recaptchaV3Token:void 0}:{},mode:void 0})});if(!(R=await S()).ok){let{error:e}=await a9(R);if(e===aj.EV){let e=await o();if(!(R=await S(e)).ok){let{error:e}=await a9(R);e===aj.EV&&(null==P?void 0:P.emailProvider)==null&&s("low-recaptcha-score-modal")}}}}catch(e){console.error("Error creating evaluation session:",e),R=void 0}if(ed&&i(),null==R||!R.ok){if(z.deleteMessage(ea),null!=k&&z.deleteMessage(k),(null==R?void 0:R.status)===ab.TOO_MANY_REQUESTS){let e=a6(R.headers);if(null!=e)s("image-modality-rate-limit-modal"),B(e);else{let e=await (null==R?void 0:R.clone().json()),t=null==e?void 0:e.modelId,a=a7(R.headers);null!=t&&null!=a&&G({id:t,rateLimitedUntil:new Date(new Date().getTime()+a).toISOString()})}}z.updateMessage({id:ee.id,status:(null==R?void 0:R.status)===ab.UNPROCESSABLE_ENTITY?b.nH.FLAGGED:b.nH.FAILED}),c&&O.updateStatus(z.id,"error");return}T.z.capture({action:"chat_submit_success",params:{is_first_message:K,mode:z.mode,user_id:U,modality:J,evaluation_session_id:z.id,model_a_id:H,model_b_id:V,has_attachments:(null!=(C=null==g||null==(v=g.experimental_attachments)?void 0:v.length)?C:0)>0,attachments_count:null!=(_=null==g||null==(y=g.experimental_attachments)?void 0:y.length)?_:0,input_length:g.content.length}});let ec=null==(j=R.body)?void 0:j.getReader();if(!ec){c&&O.updateStatus(z.id,"error");return}let eu=!1,em=!1;return ay(ec,{onTextChunk:(e,t)=>{let a=et[0],n=et[1];if("a"===e&&null!=a&&!eu||"b"===e&&null!=n&&!em){var s,r;"a"===e?eu=!0:em=!0;let t=Number((performance.now()-D).toFixed(0));T.z.capture({action:"first_content_token_received",params:{time_to_first_content_token_ms:t,model_id:e===aD.BQ.a?null!=(s=null==a?void 0:a.modelId)?s:null:null!=(r=null==n?void 0:n.modelId)?r:null,modality:J,evaluation_session_id:z.id,message_id:"b"===e&&null!=k?k:ea}})}let l=e=>{if(J===b.Jg.WEBDEV){if("string"==typeof e.content){let t=e.content;e.content=t?[{type:"text",text:t}]:[]}if(Array.isArray(e.content)){let a=e.content[e.content.length-1];a&&"text"===a.type?a.text+=t:e.content.push({type:"text",text:t})}}else e.content+=t};e===aD.BQ.a&&null!=a?(l(a),z.updateMessage({id:a.id,content:a.content,reasoning:a.reasoning})):e===aD.BQ.b&&null!=n&&(l(n),z.updateMessage({id:n.id,content:n.content,reasoning:n.reasoning}))},onReasoningChunk:(e,t)=>{let a=et[0],n=et[1];e===aD.BQ.a&&null!=a?(null!=a.reasoning||(a.reasoning=""),a.reasoning+=t,z.updateMessage({id:a.id,reasoning:a.reasoning,content:a.content})):e===aD.BQ.b&&null!=n&&(null!=n.reasoning||(n.reasoning=""),n.reasoning+=t,z.updateMessage({id:n.id,reasoning:n.reasoning,content:n.content}))},onSourceChunk:(e,t)=>{var a,n;let s=et[0],r=et[1];if(e===aD.BQ.a&&null!=s){let e=Array.isArray(t)?t:a5(null!=(a=s.sources)?a:[],t);s.sources=e,z.updateMessage({id:s.id,sources:e})}else if(e===aD.BQ.b&&null!=r){let e=Array.isArray(t)?t:a5(null!=(n=r.sources)?n:[],t);r.sources=e,z.updateMessage({id:r.id,sources:e})}},onImageChunk:(e,t)=>{var a,n,s,r;let l=et[0],i=et[1];e===aD.BQ.a&&null!=l?(null==(a=l.experimental_attachments)||a.push({url:t.image,contentType:null!=(n=t.mimeType)?n:"image/png"}),z.updateMessage({id:l.id,experimental_attachments:l.experimental_attachments})):e===aD.BQ.b&&null!=i&&(null==(s=i.experimental_attachments)||s.push({url:t.image,contentType:null!=(r=t.mimeType)?r:"image/png"}),z.updateMessage({id:i.id,experimental_attachments:i.experimental_attachments}))},onVideoChunk:(e,t)=>{let a=a2(e,et);if(a){var n,s;null==(n=a.experimental_attachments)||n.push({url:t.url,contentType:null!=(s=t.mimeType)?s:"video/mp4",thumbnailUrl:t.thumbnailUrl}),z.updateMessage({id:a.id,experimental_attachments:a.experimental_attachments})}},onWebDevChunk:(t,a)=>{let n=a2(t,et);if(n)switch(a.type){case"init":p(n.id,a.files);break;case"title":null==e||e.setState(e=>({...e,title:a.title})),l({id:z.id,title:a.title})}},onToolCallChunk:(e,t)=>{let a=a2(e,et);if(!a)return;a.content=a4(a.content);let n=a.content.findIndex(e=>"tool-call"===e.type&&e.toolCallId===t.toolCallId);-1!==n?a.content[n]={...t,type:"tool-call"}:a.content.push({...t,type:"tool-call"}),z.updateMessage({id:a.id,content:a.content})},onToolResultChunk:(e,t)=>{let a=a2(e,et);if(!a)return;let n=as.safeParse(t.result);n.success&&x(a.id,n.data),a.content=a4(a.content);let s=a.content.find(e=>"tool-call"===e.type&&e.toolCallId===t.toolCallId);s&&a.content.push({...t,type:"tool-result",toolName:s.toolName}),z.updateMessage({id:a.id,content:a.content})},onFinish:e=>{var t,a,n,s;let r=e===aD.BQ.a?ea:k,l=et.find(e=>e.id===r);e===aD.BQ.a?es=!0:er=!0;let i=z.mode===b.lY.DIRECT||(e===aD.BQ.b?es:er);z.updateMessage({id:r,status:b.nH.SUCCESS}),T.z.capture({action:"chat_response_success",params:{response_type:"submit",mode:z.mode,user_id:U,modality:J,evaluation_session_id:z.id,model_id:null==l?void 0:l.modelId,has_attachments:(null!=(s=null==l||null==(t=l.experimental_attachments)?void 0:t.length)?s:0)>0,attachments_count:null==l||null==(a=l.experimental_attachments)?void 0:a.length,response_length:null==l||null==(n=l.content)?void 0:n.length}}),i&&(T.z.capture({action:"chat_responses_success",params:{response_type:"submit",mode:z.mode,user_id:U,modality:J}}),c&&O.updateStatus(z.id,"success")),J===b.Jg.WEBDEV&&r&&f(r)},onError:(e,t)=>{z.updateMessage({id:e===aD.BQ.a?ea:k,status:b.nH.FAILED,failureReason:null!=t?t:null}),c&&O.updateStatus(z.id,"error")}})},[r,m,d,e,o,x,p,i,f,t,h,s,l,a,n,c,u])}}function a2(e,t){let[a,n]=t;return e===aD.BQ.a&&null!=a?a:e===aD.BQ.b&&null!=n?n:null}function a4(e){return"string"==typeof e?e.length>0?[{type:"text",text:e}]:[]:e}let a3=aY()(e=>Array.isArray(e.content)?e.content.filter(e=>"text"===e.type).map(e=>e.text||"").join(""):e.content);function a5(e,t){var a,n;let s=e.findIndex(e=>e.id===t.id);if(-1===s)return[...e,t];let r=e[s];if(!r)return[...e,t];let l={...r,...t,charLocation:[...null!=(a=r.charLocation)?a:[],...null!=(n=t.charLocation)?n:[]].filter((e,t,a)=>a.indexOf(e)===t).sort((e,t)=>e-t)};return[...e.slice(0,s),l,...e.slice(s+1)]}function a6(e){let t=e.get("Ratelimit-Modality");if(null!=t&&t===b.Jg.IMAGE){let t=Number(e.get("ratelimit-remaining"));if(null!=t&&!Number.isNaN(t))return new Date(new Date().getTime()+1e3*t)}return null}let a8=t$.z.object({error:t$.z.string()});async function a9(e){try{let t=await e.clone().json();return a8.parse(t)}catch(e){return{error:null}}}function a7(e){var t,a;let n=null==(a=e.get("ratelimit"))||null==(t=a.split(",").find(e=>"remaining"===e.trim().split("=")[0]))?void 0:t.split("=")[1];if(null==n)return null;let s=Number(n);return Number.isNaN(s)?null:1e3*s}function ne(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assistant";if("user"===e.role)return"User";if("assistant"===e.role){let n=t.find(t=>t.id===e.modelId);return null==n?"".concat(a," ").concat(e.participantPosition.toUpperCase()):n.publicName}return e.role}function nt(){let e=Math.floor(5*Math.random())+2;return Array.from({length:e},(t,a)=>({id:a,className:"h-8 ".concat(a==e-1?"w-1/2":"w-full")}))}function na(e){return(0,M.useMemo)(()=>{var t;return t=e,[b.nH.FAILED,b.nH.FLAGGED].includes(t.status)},[e])}function nn(e){var t;let a=na(e),n=(0,M.useMemo)(()=>{var t,a,n;return""!==(t=e).content||(null!=(n=null==(a=t.experimental_attachments)?void 0:a.length)?n:0)>0},[e]),s=(0,M.useMemo)(()=>a3(e),[e]),r=null!=(t=e.reasoning)?t:"";return(0,M.useMemo)(()=>({hasError:a,hasContent:n,contentString:s,reasoningText:r,shouldShowErrorOnly:a&&!n}),[a,n,s,r])}function ns(){let e=(0,U.g)(e=>e.lastMessageIds),t=(0,U.g)(e=>e.messages),a=(0,M.useMemo)(()=>{let a=[];if(0===e.length)return a;let n=new Map;return e.forEach(e=>{let a=t.find(t=>t.id===e);if(null==a)throw Error("Message not found");n.set(a.participantPosition,a)}),a.push(n),!function e(t,a,n){let s=new Set;a.forEach(e=>{e.parentMessageIds.forEach(e=>{s.add(e)})});let r=new Map;return(t.forEach(e=>{s.has(e.id)&&r.set(e.participantPosition,e)}),0===r.size)?null:(n.push(r),e(t,r,n))}(t,n,a),a},[e,t]),n=(0,M.useMemo)(()=>{var e,t;return Array.from(null!=(t=null==a||null==(e=a[0])?void 0:e.values())?t:[])},[a]);return(0,M.useMemo)(()=>({messageThreads:a,latestMessages:n}),[a,n])}var nr=a(33709);let nl=(0,M.memo)(function(e){let{children:t,as:a="p",className:n,duration:s=2,spread:r=2}=e,l=tr.P.create(a),i=(0,M.useMemo)(()=>t.length*r,[t,r]);return(0,y.jsx)(l,{className:(0,B.cn)("relative inline-block bg-[length:250%_100%,auto] bg-clip-text","text-transparent [--base-color:#a1a1aa] [--base-gradient-color:#000]","[--bg:linear-gradient(90deg,#0000_calc(50%-var(--spread)),var(--base-gradient-color),#0000_calc(50%+var(--spread)))] [background-repeat:no-repeat,padding-box]","dark:[--base-color:#71717a] dark:[--base-gradient-color:#ffffff] dark:[--bg:linear-gradient(90deg,#0000_calc(50%-var(--spread)),var(--base-gradient-color),#0000_calc(50%+var(--spread)))]",n),initial:{backgroundPosition:"100% center"},animate:{backgroundPosition:"0% center"},transition:{repeat:1/0,duration:s,ease:"linear"},style:{"--spread":"".concat(i,"px"),backgroundImage:"var(--bg), linear-gradient(var(--base-color), var(--base-color))"},"data-sentry-element":"MotionComponent","data-sentry-component":"TextShimmerComponent","data-sentry-source-file":"text-shimmer.tsx",children:t})});var ni=a(20606);let no=(0,M.createContext)(null);function nd(e){let{children:t,messageLayoutMode:a}=e,n=(0,M.useMemo)(()=>({messageLayoutMode:a}),[a]);return(0,y.jsx)(no.Provider,{value:n,"data-sentry-element":"unknown","data-sentry-component":"MessageContextProvider","data-sentry-source-file":"message-context.tsx",children:t})}function nc(){let e=(0,M.useContext)(no);if(!e)throw Error("The MessageContext was not set. If using message components outside of <AssistantMessage /> please use <MessageContextProvider /> ");return e}function nu(e){let{imageUrl:t,imageName:a,onClose:n}=e;return(0,M.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),(0,y.jsx)(A.lG,{open:!0,onOpenChange:e=>!e&&n(),"data-sentry-element":"Dialog","data-sentry-component":"ImageLightbox","data-sentry-source-file":"image-lightbox.tsx",children:(0,y.jsxs)(A.Cf,{"aria-describedby":void 0,showCloseButton:!1,className:"max-h-[90vh] max-w-fit border-none bg-transparent p-0 shadow-none",onClick:n,"data-sentry-element":"DialogContent","data-sentry-source-file":"image-lightbox.tsx",children:[(0,y.jsx)(A.L3,{className:"sr-only","data-sentry-element":"DialogTitle","data-sentry-source-file":"image-lightbox.tsx",children:"Image Lightbox"}),(0,y.jsx)("button",{onClick:n,className:"absolute right-4 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-black/50 p-2 text-white hover:bg-black/70 md:hidden","aria-label":"Close image",children:(0,y.jsx)(eS.A,{className:"h-4 w-4","data-sentry-element":"X","data-sentry-source-file":"image-lightbox.tsx"})}),(0,y.jsx)("div",{className:"relative",children:(0,y.jsx)("img",{src:t,alt:a,className:"h-auto max-h-[90vh] w-auto max-w-[90vw] rounded-lg object-contain shadow-lg",onClick:e=>e.stopPropagation()})})]})})}var nm=a(34892);function np(e,t){try{let a=new URL(e);return a.searchParams.set("retry",t.toString()),a.toString()}catch(t){return e}}async function nx(e,t,a,n){if(t>3)return void n();if(!function(e){try{return new URL(e).hostname.endsWith("cloudflarestorage.com")}catch(t){return e.endsWith("cloudflarestorage.com")}}(e))return void a(np(e,t));try{let t=await (0,nm.w)(e);if(t.success)a(t.data);else throw Error("Failed to fetch image through proxy")}catch(s){console.error("Retry failed for Cloudflare image:",s,"Attempt:",t),t>=3?n():a(np(e,t))}}var nf=a(10651),nh=a(31858),ng=a(36566);function nv(e){let{src:t,alt:a,className:n,fallback:s,onLoad:r,onError:l,onRetry:i,showLoadingState:o=!0,...d}=e,[c,u]=(0,M.useState)("loading"),m=(0,M.useRef)(0),p=(0,M.useRef)(null);(0,M.useEffect)(()=>{t&&(u("loading"),m.current=0)},[t]),(0,M.useEffect)(()=>{let e=p.current;e&&e.complete&&e.naturalWidth>0&&u("loaded")},[t]);let x=(0,M.useCallback)(e=>{u("loaded"),m.current=0,null==r||r(e)},[r]),f=(0,M.useCallback)(e=>{u("error"),m.current+=1,null==i||i(m.current),null==l||l(e)},[l,i]);return"error"===c&&s?(0,y.jsx)(y.Fragment,{children:s}):"error"!==c||s?(0,y.jsxs)("div",{className:"relative","data-sentry-component":"DynamicImage","data-sentry-source-file":"dynamic-image.tsx",children:["loading"===c&&o&&(0,y.jsx)(ny,{}),(0,y.jsx)("img",{ref:p,src:t,alt:a,className:(0,B.cn)("transition-opacity duration-500","loading"===c&&o?"opacity-0":"opacity-100",n),onLoad:x,onError:f,...d})]}):(0,y.jsx)(nb,{className:n})}function ny(){return(0,y.jsx)("div",{className:"bg-surface-secondary absolute inset-0 flex items-center justify-center overflow-hidden rounded-md","data-sentry-component":"LoadingState","data-sentry-source-file":"dynamic-image.tsx",children:(0,y.jsx)(nh.A,{className:"text-text-primary size-4 animate-spin","data-sentry-element":"Loader","data-sentry-source-file":"dynamic-image.tsx"})})}function nb(e){let{className:t}=e;return(0,y.jsx)("div",{className:(0,B.cn)("bg-surface-secondary flex flex-col items-center justify-center overflow-hidden rounded-lg",t),"data-sentry-component":"ErrorState","data-sentry-source-file":"dynamic-image.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 p-3",children:[(0,y.jsx)(ng.A,{size:24,className:"text-interactive-negative","data-sentry-element":"AlertTriangle","data-sentry-source-file":"dynamic-image.tsx"}),(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("div",{className:"text-text-primary text-sm font-medium",children:"Image unavailable"}),(0,y.jsx)("div",{className:"text-text-secondary mt-1 text-xs",children:"Failed to load"})]})]})})}let nj=(0,nf.default)(()=>Promise.all([a.e(8585),a.e(2701),a.e(1872)]).then(a.bind(a,11872)).then(e=>({default:e.VideoPlayer})),{loadableGenerated:{webpack:()=>[11872]},ssr:!1});function nw(e){var t,a,n,s,r;let{attachment:l,role:i,onOpenLightbox:o,messageId:d}=e,[c,u]=(0,M.useState)(l.url),m=(0,e5.d)("md"),p=(0,M.useRef)(0),x=(0,U.g)(e=>e.markVideoAsViewed),f=(0,M.useCallback)(()=>{p.current+=1,nx(l.url,p.current,e=>u(e),()=>{})},[l.url]),h=(0,M.useCallback)(()=>{i===b.PG.ASSISTANT&&d&&x(d)},[x,d,i]);if((null==l?void 0:l.contentType)&&(null==(t=l.contentType)?void 0:t.startsWith("video"))){let e=i===b.PG.USER?"w-64 max-w-full":"w-auto h-auto";return(0,y.jsx)(nj,{videoUrl:l.url,onPlay:h,videoSizeClass:e,poster:l.thumbnailUrl})}return(null==l?void 0:l.contentType)&&(null==(a=l.contentType)?void 0:a.length)>0&&!(null==(n=l.contentType)?void 0:n.startsWith("image"))?(0,y.jsx)(N.Link,{href:l.url,className:"break-all",children:l.name}):i===b.PG.USER?(0,y.jsx)("div",{className:"w-fit",children:(0,y.jsx)(nv,{src:c,alt:null!=(s=l.name)?s:"",className:"aspect-square w-32 cursor-pointer overflow-hidden rounded-lg object-cover object-center opacity-100 transition-opacity duration-300",onClick:o,onError:f,onRetry:e=>{p.current=e},showLoadingState:!0})}):(0,y.jsx)("div",{className:m?"h-[50vh] flex justify-center items-center":"w-fit","data-sentry-component":"MessageAttachment","data-sentry-source-file":"message-attachment.tsx",children:(0,y.jsx)(nv,{src:c,alt:null!=(r=l.name)?r:"",className:m?"max-h-[50vh] cursor-pointer overflow-hidden rounded-lg opacity-100 transition-opacity duration-300":"aspect-square h-[50vh] w-[50vh] max-w-full cursor-pointer overflow-hidden rounded-lg object-cover object-center opacity-100 transition-opacity duration-300",loading:"lazy",onClick:o,onError:f,onRetry:e=>{p.current=e},showLoadingState:!0,"data-sentry-element":"DynamicImage","data-sentry-source-file":"message-attachment.tsx"})})}function nN(e){let{isActive:t,className:a,interval:n=100}=e,[s,r]=(0,M.useState)(0),l=(0,M.useRef)(null);return(0,M.useEffect)(()=>{if(!t){r(0),l.current=null;return}l.current=Date.now();let e=setInterval(()=>{l.current&&r(Date.now()-l.current)},n);return()=>clearInterval(e)},[t,n]),(0,y.jsxs)("span",{className:"text-base font-normal ".concat(a||""),"data-sentry-component":"LoadingTimer","data-sentry-source-file":"loading-timer.tsx",children:[(s/1e3).toFixed(1),"s"]})}function nE(e){let{className:t}=e;return(0,y.jsx)("div",{className:(0,B.cn)("bg-surface-skeleton/60 relative flex aspect-square max-h-full max-w-full animate-pulse items-center justify-center overflow-hidden rounded-lg object-cover object-center",t),"data-sentry-component":"PendingImageAttachment","data-sentry-source-file":"pending-image-attachment.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,y.jsx)(nh.A,{className:"text-text-primary size-4 animate-spin","data-sentry-element":"Loader","data-sentry-source-file":"pending-image-attachment.tsx"}),(0,y.jsx)(nN,{isActive:!0,className:"text-text-primary","data-sentry-element":"LoadingTimer","data-sentry-source-file":"pending-image-attachment.tsx"})]})})}function nA(e){let{message:t}=e,{messageLayoutMode:a}=nc(),{experimental_attachments:n=[],role:s,status:r}=t,l=(0,U.g)(e=>e.modality),[i,o]=(0,M.useState)(null);if(s===b.PG.ASSISTANT&&(null==n?void 0:n.length)===0&&l===b.Jg.IMAGE&&r===b.nH.PENDING)return(0,y.jsx)("div",{className:(0,B.cn)("flex w-full flex-row items-center","page"===a?"justify-start":"justify-center"),children:(0,y.jsx)(nE,{className:"h-[50vh] w-[50vh] max-w-[calc(100vw-4rem)]"})});if(s===b.PG.ASSISTANT&&(null==n?void 0:n.length)===0&&l===b.Jg.VIDEO&&r===b.nH.PENDING)return(0,y.jsx)("div",{className:(0,B.cn)("flex w-full flex-row items-center justify-start"),children:(0,y.jsx)(nl,{children:"Generating video..."})});if((null==n?void 0:n.length)===0)return null;let d=s===b.PG.USER;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,B.cn)("flex w-full flex-row items-center gap-2",d&&"ml-auto max-w-2xl flex-wrap",d?"justify-end":"page"===a?"justify-start":"justify-center"),children:n.map(e=>(0,y.jsx)(nw,{attachment:e,role:s,messageId:t.id,onOpenLightbox:()=>o(e)},e.url))}),i&&(0,y.jsx)(nu,{imageUrl:i.url,imageName:i.name,onClose:()=>o(null)})]})}var nC=a(34171),nT=a.n(nC),n_=a(8673),nk=a(57982);function nI(e){let{className:t}=e,{resolvedTheme:a}=(0,nk.D)(),{RiveComponent:n}=(0,n_.useRive)({src:"dark"===a?"/rive/searching-lg-dark.riv":"/rive/searching-lg-light.riv",autoplay:!0});return(0,y.jsx)(n,{className:t,"data-sentry-element":"RiveComponent","data-sentry-component":"LoadingSearch","data-sentry-source-file":"loading-search.tsx"},a)}var nS=a(89185);let nR=new Set;function nM(e){var t;let{source:a,tabIndex:n}=e,s=(0,M.useRef)(null),[r,l]=(0,M.useState)(()=>!!a.favicon&&nR.has(a.favicon)),[i,o]=(0,M.useState)(()=>!!a.thumbnail&&nR.has(a.thumbnail));return(0,y.jsxs)(N.Link,{ref:s,href:a.url,className:"hover:bg-surface-secondary focus-visible:ring-ring group flex min-h-[80px] w-full items-center justify-start gap-2 self-stretch overflow-hidden rounded-xl p-2 no-underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset sm:min-h-[96px] sm:gap-4 [&::after]:content-none",tabIndex:n,"data-sentry-element":"Link","data-sentry-component":"CitationSourceCard","data-sentry-source-file":"citation-source-card.tsx",children:[(0,y.jsx)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-center gap-2 overflow-hidden",children:(0,y.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-start gap-2",children:[a.favicon&&!r?(0,y.jsx)("div",{className:"border-border-faint/30 relative h-8 w-8 flex-shrink-0 overflow-hidden rounded-lg border",children:(0,y.jsx)(nS.default,{src:a.favicon,alt:"favicon",width:32,height:32,className:"object-cover",referrerPolicy:"no-referrer",onError:()=>{a.favicon&&nR.add(a.favicon),l(!0)}})}):(0,y.jsx)("div",{className:"bg-surface-secondary border-border-faint/30 relative flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg border",children:(0,y.jsx)(eJ.A,{className:"text-interactive-normal h-4 w-4"})}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-start gap-0.5",children:[(0,y.jsxs)("div",{className:"flex w-full min-w-0 items-start justify-start gap-1",children:[(0,y.jsx)("div",{className:"bg-surface-raised mt-0.5 inline-flex w-4 flex-shrink-0 items-center justify-center rounded p-0.5",children:(0,y.jsx)("p",{className:"text-interactive-link text-center text-[10px] leading-3",children:a.id})}),(0,y.jsx)("p",{className:"text-text-primary min-w-0 flex-1 truncate text-sm font-medium leading-tight",children:null!=(t=a.title)?t:"Untitled"})]}),(0,y.jsx)("p",{className:"text-interactive-link w-full truncate text-xs leading-normal",children:a.url||""})]})]})}),a.thumbnail&&!i&&(0,y.jsx)("div",{className:"bg-surface-secondary relative hidden aspect-video w-1/4 max-w-[220px] overflow-hidden rounded-lg min-[425px]:block",children:(0,y.jsx)(nS.default,{src:a.thumbnail,alt:"preview",fill:!0,sizes:"(max-width: 425px) 0vw, (max-width: 768px) 25vw, 220px",className:"object-cover",quality:85,onError:()=>{a.thumbnail&&nR.add(a.thumbnail),o(!0)}})})]})}function nD(e){let{sources:t,isComplete:a}=e,[n,s]=(0,M.useState)(!1),[r,l]=(0,M.useState)(0),i=(0,M.useRef)(null),[o,d]=(0,M.useState)(!1);(0,M.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{l(n?e.scrollHeight:0)};if(t(),n){let a=new ResizeObserver(t);return a.observe(e),()=>a.disconnect()}},[n,t]),(0,M.useEffect)(()=>{if(a){let e=setTimeout(()=>d(!0),10);return()=>clearTimeout(e)}d(!1),s(!1)},[a]);let c=(null==t?void 0:t.length)&&t.every(e=>e&&e.url&&e.title&&e.favicon);return o&&(!t||0===t.length)?(0,y.jsx)("div",{className:"border-border-faint flex w-full flex-col rounded-md border p-3",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(eJ.A,{className:"text-interactive-normal h-4 w-4"}),(0,y.jsx)("div",{className:"text-interactive-normal text-sm",children:"No Sources"})]})}):a&&c?(0,y.jsxs)("div",{className:(0,B.cn)("border-border-faint flex w-full flex-col border",n?"rounded-xl":"rounded-md"),"data-sentry-component":"SourcesAccordion","data-sentry-source-file":"sources-accordion.tsx",children:[(0,y.jsxs)("button",{onClick:e=>{var t;e.preventDefault();let a=null==(t=i.current)?void 0:t.closest(".overflow-y-auto");if(a){let e=a.scrollTop,t=()=>{a.scrollTop=e};a.addEventListener("scroll",t),setTimeout(()=>a.removeEventListener("scroll",t),250)}s(!n)},className:"focus-visible:ring-ring focus-visible:ring-offset-surface-primary group relative z-10 flex w-full items-center justify-between rounded-md p-3 text-left hover:no-underline focus-visible:rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","aria-expanded":n,children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(eJ.A,{className:"text-interactive-link h-4 w-4","data-sentry-element":"Globe","data-sentry-source-file":"sources-accordion.tsx"}),(0,y.jsx)("div",{className:"text-interactive-active text-sm leading-none",children:"Sources"})]}),(0,y.jsx)(eI.A,{className:(0,B.cn)("text-interactive-normal h-5 w-5 shrink-0 transition-transform duration-200",n&&"rotate-180"),"data-sentry-element":"ChevronDown","data-sentry-source-file":"sources-accordion.tsx"})]}),(0,y.jsx)("div",{className:"relative z-0 w-full overflow-hidden transition-all duration-200 ease-out",style:{height:"".concat(r,"px"),opacity:+!!n},children:(0,y.jsx)("div",{ref:i,children:(0,y.jsx)("div",{className:"relative z-0 flex flex-col px-3 pb-3",children:null==t?void 0:t.map(e=>(0,y.jsx)(nM,{source:e,tabIndex:n?0:-1},e.id))})})})]}):(0,y.jsx)("div",{className:"border-border-faint flex w-full flex-col rounded-md border p-3",children:(0,y.jsxs)("div",{className:"jsx-d200430162549f6e flex items-center gap-2",children:[(0,y.jsx)(nI,{className:"h-4 w-4"}),(0,y.jsx)(nl,{className:"text-sm",duration:2,children:"Searching..."}),(0,y.jsx)(nT(),{id:"d200430162549f6e",children:".light [data-shimmer].jsx-d200430162549f6e{--base-gradient-color:rgba(0, 0, 0, 0.15)}.dark [data-shimmer].jsx-d200430162549f6e{--base-gradient-color:rgba(255, 255, 255, 0.3)}"})]})})}var nz=a(63252),nO=a(37705),nL=a(52370),nP=a(83502),nB=a(22747);a(3536);var nU=a(30707);let nF=nU.bL,nH=nU.l9,nV=M.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:s=4,...r}=e;return(0,y.jsx)(nU.UC,{ref:t,align:n,sideOffset:s,className:(0,B.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-[--radix-hover-card-content-transform-origin] rounded-md border p-4 shadow-md outline-none",a),...r})});nV.displayName=nU.UC.displayName;let nG=new Set;function nW(e){var t;let{citation:a,children:n}=e,[s,r]=(0,M.useState)(!1),[l,i]=(0,M.useState)(()=>!!a.favicon&&nG.has(a.favicon)),[o,d]=(0,M.useState)(()=>!!a.thumbnail&&nG.has(a.thumbnail)),c=()=>{s&&r(!1)},u=(0,y.jsxs)("div",{className:"bg-surface-primary outline-border-faint/30 inline-flex w-[14rem] flex-col items-start justify-center gap-2 rounded-lg p-2 shadow-[2px_4px_24px_0px_rgba(0,0,0,0.12)] outline outline-1 outline-offset-[-1px]",children:[a.thumbnail&&!o&&(0,y.jsx)("div",{className:"border-border-faint/10 relative h-28 self-stretch overflow-hidden rounded border",children:(0,y.jsx)(nS.default,{src:a.thumbnail,alt:"preview",fill:!0,className:"object-cover",quality:65,loading:"eager",priority:!0,sizes:"224px",onError:()=>{a.thumbnail&&nG.add(a.thumbnail),d(!0)}})}),(0,y.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1.5 self-stretch",children:[(0,y.jsx)("div",{className:"w-full",children:(0,y.jsx)("div",{className:"text-text-primary line-clamp-2 font-['Inter'] text-sm font-medium leading-tight",children:null!=(t=a.title)?t:"Untitled"})}),(0,y.jsxs)("div",{className:"flex w-full min-w-0 items-center gap-1",children:[a.favicon&&!l?(0,y.jsx)("div",{className:"border-border-faint/30 h-5 w-5 flex-shrink-0 overflow-hidden rounded-sm border",children:(0,y.jsx)(nS.default,{src:a.favicon,alt:"favicon",width:20,height:20,className:"object-cover",loading:"eager",priority:!0,onError:()=>{a.favicon&&nG.add(a.favicon),i(!0)}})}):(0,y.jsx)("div",{className:"bg-surface-secondary border-border-faint/30 flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-sm border",children:(0,y.jsx)(eJ.A,{className:"text-interactive-normal h-3 w-3"})}),(0,y.jsx)("a",{className:"text-interactive-normal hover:text-interactive-link min-w-0 flex-1 truncate font-['Inter'] text-xs font-normal leading-normal no-underline transition-colors",target:"_blank",href:a.url,rel:"noopener noreferrer",children:(e=>{try{let t=new URL(e);return t.hostname.replace(/^www\./,"")+t.pathname+t.search+t.hash}catch(t){return e}})(a.url)})]})]})]});return(0,y.jsxs)(nF,{openDelay:150,"data-sentry-element":"HoverCard","data-sentry-component":"CitationHoverCard","data-sentry-source-file":"citation-hover-card.tsx",children:[(0,y.jsx)(nH,{asChild:!0,"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"citation-hover-card.tsx",children:(0,y.jsx)("span",{className:"inline-flex p-0.5",onClick:()=>{r(!0)},onMouseEnter:c,onKeyDown:c,children:n})}),!s&&(0,y.jsx)(nV,{className:"not-prose z-50 border-none bg-transparent p-0 shadow-none",side:"top",align:"center",sideOffset:8,avoidCollisions:!0,collisionPadding:10,children:u})]})}function nJ(e){let{citation:t,isComplete:a=!0}=e,n=(0,y.jsx)("span",{className:(0,B.cn)("bg-surface-raised inline-flex h-4 w-4 items-center justify-center rounded-sm p-0.5",a?"cursor-pointer":"cursor-default"),children:(0,y.jsx)("span",{className:(0,B.cn)("text-center font-['Inter'] text-[10px] font-normal leading-3",a?"text-interactive-link":"text-interactive-normal"),children:t.id})});return a?(0,y.jsx)(nW,{citation:t,"data-sentry-element":"CitationHoverCard","data-sentry-component":"InlineCitation","data-sentry-source-file":"inline-citation.tsx",children:(0,y.jsx)(N.Link,{href:t.url,className:"focus-visible:ring-ring inline-flex rounded-sm no-underline focus-visible:outline-none focus-visible:ring-2",disableLinkColor:!0,"data-sentry-element":"Link","data-sentry-source-file":"inline-citation.tsx",children:n})}):(0,y.jsx)("span",{className:"inline-flex cursor-default rounded-sm p-0.5",children:n})}var nY=a(38490);let nQ="\x3c!--citation:";function nq(){return e=>{let t=(e,a,n)=>{var s;let r="html"===e.type,l="text"===e.type&&(null==(s=e.value)?void 0:s.includes(nQ));if((r||l)&&e.value){let t,s=RegExp("".concat(nQ,"([^-]+?)").concat("--\x3e"),"g"),r=[],l=0;for(;null!==(t=s.exec(e.value));){if(t.index>l){let a=e.value.slice(l,t.index);a&&r.push({type:e.type,value:a})}r.push({type:"inlineCode",value:"citation:".concat(t[1]),data:{hProperties:{className:"citation-marker"}}}),l=t.index+t[0].length}if(l<e.value.length&&r.push({type:e.type,value:e.value.slice(l)}),r.length>0&&n&&null!==a)return n.children.splice(a,1,...r),a+r.length-1}if(e.children){let a=0;for(;a<e.children.length;){let n=t(e.children[a],a,e);a="number"==typeof n?n+1:a+1}}};t(e,null,null)}}let n$=(0,M.createContext)(new Map),nK=(0,M.memo)(e=>{let{content:t,sources:a,className:n,isComplete:s}=e,r=(0,M.useMemo)(()=>new Map((null==a?void 0:a.map(e=>[e.id,e]))||[]),[a]),l=(0,M.useMemo)(()=>(function(e,t){if(!e||!t.length)return e||"";let a=new Map;t.forEach(e=>{var t;null==(t=e.charLocation)||t.forEach(t=>{var n;let s=null!=(n=a.get(t))?n:[];s.push(e.id),a.set(t,s)})});let n=e;return Array.from(a.keys()).sort((e,t)=>t-e).forEach(e=>{var t;let s=(null!=(t=a.get(e))?t:[]).map(e=>"".concat(nQ).concat(e).concat("--\x3e")).join("");e<=n.length&&(n=n.slice(0,e)+s+n.slice(e))}),n})(t||"",a||[]),[t,a]);return l?(0,y.jsx)(n$.Provider,{value:r,children:(0,y.jsx)("div",{className:(0,B.cn)("prose prose-sm prose-pre:bg-transparent prose-pre:p-0 text-wrap break-words",n),children:(0,y.jsx)(nO.oz,{remarkPlugins:[nP.A,[nB.A,{singleDollarTextMath:!0}],nq],rehypePlugins:[[nL.A,{displayMode:!0,throwOnError:!1,errorColor:"#cc0000"}]],components:{code(e){let{children:t,className:a,...n}=e;if("citation-marker"===a&&"string"==typeof t){let e=t.replace("citation:",""),a=r.get(e);return a?(0,y.jsx)(nJ,{citation:a,isComplete:s}):null}return(0,y.jsx)(nY.Hd,{className:a,...n,children:t})}},children:l})})}):null},(e,t)=>e.content===t.content&&e.id===t.id&&JSON.stringify(e.sources)===JSON.stringify(t.sources)&&e.className===t.className&&e.isComplete===t.isComplete);nK.displayName="CitationAwareMarkdown";var nX=a(19463),nZ=a(59203),n0=a(5197);let n1=(0,M.memo)(e=>{let{className:t,...a}=e;return(0,y.jsx)(n0.jH,{className:(0,B.cn)("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",t),...a})});n1.displayName="Response";let n2=(0,M.createContext)(null),n4=(0,M.memo)(e=>{let{className:t,isStreaming:a=!1,isReasoningComplete:n=!1,open:s,defaultOpen:r=!0,onOpenChange:l,duration:i,reasoningText:o,children:d,...c}=e,[u,m]=(0,nX.i)({prop:s,defaultProp:r,onChange:l}),p=!o||a||i?0:Math.max(1,Math.ceil(o.length/500)),[x,f]=(0,nX.i)({prop:i,defaultProp:p}),[h,g]=(0,M.useState)(!1),[v,b]=(0,M.useState)(null),[j,w]=(0,M.useState)(!1);return(0,M.useEffect)(()=>{a&&!j?(b(Date.now()),w(!0)):j&&n&&null!==v&&(f(Math.ceil((Date.now()-v)/1e3)),b(null))},[a,n,v,j,f]),(0,M.useEffect)(()=>{if(r&&n&&u&&!h&&x>0){let e=setTimeout(()=>{m(!1),g(!0)},1500);return()=>clearTimeout(e)}},[n,u,r,m,h,x]),(0,y.jsx)(n2.Provider,{value:{isStreaming:a,isOpen:u,setIsOpen:m,duration:x},children:(0,y.jsx)(nZ.Nt,{className:(0,B.cn)("not-prose mb-4",t),onOpenChange:e=>{m(e)},open:u,...c,children:d})})}),n3=(0,M.memo)(e=>{let{className:t,children:a,...n}=e,{isStreaming:s,isOpen:r,duration:l}=(()=>{let e=(0,M.useContext)(n2);if(!e)throw Error("Reasoning components must be used within Reasoning");return e})();return(0,y.jsx)(nZ.R6,{className:(0,B.cn)("text-text-secondary hover:text-text-tertiary flex w-full items-center gap-1.5 text-sm transition-colors",t),...n,children:null!=a?a:(0,y.jsxs)(y.Fragment,{children:[((e,t)=>e?(0,y.jsx)(nl,{className:"text-sm",children:"Thinking..."}):void 0===t||0===t?(0,y.jsx)("p",{children:"Thought for a few seconds"}):(0,y.jsxs)("p",{className:"leading-[normal]","data-sentry-component":"getThinkingMessage","data-sentry-source-file":"reasoning.tsx",children:["Thought for ",(e=>{if(e<60)return"".concat(e," second").concat(1===e?"":"s");let t=Math.floor(e/60),a=e%60;return 0===a?"".concat(t," minute").concat(1===t?"":"s"):"".concat(t," minute").concat(1===t?"":"s"," and ").concat(a," second").concat(1===a?"":"s")})(t)]}))(s,l),(0,y.jsx)(eI.A,{className:(0,B.cn)("size-4 transition-transform",r?"rotate-180":"rotate-0")})]})})}),n5=e=>{let{className:t,children:a,...n}=e;return(0,y.jsx)(nZ.Ke,{className:(0,B.cn)("mt-4 text-sm","data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2","data-[state=closed]:animate-out data-[state=open]:animate-in","data-[state=closed]:duration-150 data-[state=open]:duration-150","text-text-secondary outline-none",t),...n,"data-sentry-element":"CollapsibleContent","data-sentry-component":"ReasoningContent","data-sentry-source-file":"reasoning.tsx",children:(0,y.jsxs)("div",{className:"relative pl-6 pr-2",children:[(0,y.jsx)("div",{className:"absolute bottom-0 left-1 top-0 w-px bg-gray-200 dark:bg-gray-800"}),(0,y.jsx)(n1,{className:"font-mono text-xs leading-relaxed","data-sentry-element":"Response","data-sentry-source-file":"reasoning.tsx",children:a})]})})};function n6(e){let{errorMessage:t}=e;return(0,y.jsx)("p",{className:"text-interactive-negative text-sm font-normal","data-sentry-component":"ErrorMessage","data-sentry-source-file":"error-message.tsx",children:null!=t?t:"Something went wrong with this response, please try again."})}n4.displayName="Reasoning",n3.displayName="ReasoningTrigger",n5.displayName="ReasoningContent";var n8=a(45232),n9=a(91765),n7=a(45598),se=a(20263),st=a(21439),sa=a(56417);function sn(e){let{toolCall:t,className:a}=e;return(0,y.jsxs)("div",{className:(0,B.cn)("flex w-full items-center gap-2 py-1",a),"data-sentry-component":"ToolCall","data-sentry-source-file":"tool-call.tsx",children:[(0,y.jsx)("div",{children:(()=>{let e=t.toolName,a="h-4 w-4 text-text-secondary";switch(e){case"create_file":return(0,y.jsx)(ee.A,{className:a});case"edit_file":return(0,y.jsx)(n8.A,{className:a});case"read_file":return(0,y.jsx)(e9.A,{className:a});case"list_files":return(0,y.jsx)(n9.A,{className:a});case"delete_file":return(0,y.jsx)(n7.A,{className:a});case"install_npm_packages":return(0,y.jsx)(se.A,{className:a});default:return(0,y.jsx)(st.A,{className:a})}})()}),(0,y.jsx)(nl,{duration:1,spread:2,className:"text-sm","data-sentry-element":"TextShimmer","data-sentry-source-file":"tool-call.tsx",children:(()=>{var e,a,n,s,r;let l=t.toolName,i=t.args;switch(l){case"create_file":return"Creating ".concat(null!=(e=null==i?void 0:i.path)?e:"file");case"edit_file":return"Editing ".concat(null!=(a=null==i?void 0:i.path)?a:"file");case"read_file":return"Reading ".concat(null!=(n=null==i?void 0:i.path)?n:"file");case"list_files":return"Listing files";case"delete_file":return"Deleting ".concat(null!=(s=null==i?void 0:i.path)?s:"file");case"install_npm_packages":return"Installing npm packages: ".concat(null!=(r=null==i?void 0:i.packages)?r:"packages");default:return"Executing ".concat(l.replace(/_/g," "))}})()}),(0,y.jsx)(sa.A,{className:"text-text-secondary h-3 w-3 animate-spin","data-sentry-element":"Loader2","data-sentry-source-file":"tool-call.tsx"})]})}function ss(e){return null!==e&&"object"==typeof e&&"type"in e&&"text"===e.type}function sr(e){return null!==e&&"object"==typeof e&&"type"in e&&"tool-call"===e.type}function sl(e){return null!==e&&"object"==typeof e&&"type"in e&&"tool-result"===e.type}function si(e){let t=[],a=[],n=[];return e.forEach(e=>{"string"==typeof e?n.push(e):sr(e)?t.push(e):sl(e)?a.push(e):ss(e)&&n.push(e.text||"")}),{toolCalls:t,toolResults:a,textContent:n}}var so=a(21203),sd=a(15423),sc=a(87812),su=a(76518),sm=a.n(su),sp=a(91508);let sx=(0,M.memo)(function(e){let{oldCode:t,newCode:a,language:n,className:s}=e,{highlightedHtml:r,isHighlighting:l}=function(e){let{code:t,language:a,operation:n}=e,[s,r]=(0,M.useState)(""),[l,i]=(0,M.useState)(!1),{resolvedTheme:o}=(0,nk.D)();return(0,M.useEffect)(()=>{let e=!1;return async function(){if(!t)return r("");i(!0);try{let s=await (0,sp.pY)(t,a,"dark"===o?"github-dark":"github-light",n);e||r(s)}catch(a){if(console.error("Error highlighting diff code:",a),!e){let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),a="create"===n?"add":"delete"===n?"remove":"add",s=e.split("\n").map(e=>'<span class="line diff '.concat(a,'">').concat(e,"</span>")).join("\n");r('<pre class="shiki-code-block has-diff"><code>'.concat(s,"</code></pre>"))}}finally{e||i(!1)}}(),()=>{e=!0}},[t,a,n,o]),{highlightedHtml:s,isHighlighting:l}}({code:[...t.length>0?t.split("\n").map(e=>"-".concat(e)):[],...a.length>0?a.split("\n").map(e=>"+".concat(e)):[]].join("\n"),language:n,operation:"update"});return l?(0,y.jsx)("div",{className:(0,B.cn)("max-h-96 overflow-y-auto font-mono text-[11px]",s),children:(0,y.jsx)("div",{className:"text-muted-foreground flex items-center justify-center p-4",children:"Loading..."})}):r?(0,y.jsx)("div",{className:(0,B.cn)(sm().container,"max-h-96 overflow-y-auto font-mono text-[11px]",s),dangerouslySetInnerHTML:{__html:r}}):(0,y.jsx)("div",{className:(0,B.cn)("max-h-96 overflow-y-auto font-mono text-[11px]",s),children:(0,y.jsx)("div",{className:"text-muted-foreground flex items-center justify-center p-4",children:"No content available"})})});function sf(e){let{result:t}=e;return(0,y.jsx)("div",{className:"rounded-md border p-3","data-sentry-component":"ErrorContent","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)("div",{className:"text-sm text-red-600",children:"string"==typeof t?t:JSON.stringify(t)})})}function sh(e){let{result:t}=e,a=as.safeParse(t);if(!a.success||"edit_file"!==a.data.op&&"create_file"!==a.data.op)return null;let n="edit_file"===a.data.op?a.data.replacement:a.data.file.content,s="edit_file"===a.data.op?a.data.context:"";return(0,y.jsx)("div",{className:"border-border-faint overflow-hidden rounded-md border","data-sentry-component":"FileOperationContent","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)(sx,{newCode:n,oldCode:s,language:(0,so.sQ)(a.data.file.path),"data-sentry-element":"FileOperationPreview","data-sentry-source-file":"tool-result.tsx"})})}function sg(e){let{result:t}=e,a=as.safeParse(t);if(!a.success||"install_npm_packages"!==a.data.op)return null;let{packages:n}=a.data;return(0,y.jsxs)("div",{className:"rounded-md border p-3","data-sentry-component":"NpmInstallContent","data-sentry-source-file":"tool-result.tsx",children:[(0,y.jsx)("div",{className:"mb-2 text-sm font-medium",children:"Installed packages:"}),(0,y.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,y.jsx)("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e},e))})]})}function sv(e){let{toolResult:t,className:a,onOpenChange:n}=e,[s,r]=(0,M.useState)(!1),{result:l,toolName:i}=t,o=ar.safeParse(l),d=o.success,c=as.safeParse(l),u=!d&&!!c.success&&("edit_file"===c.data.op?c.data.replacement.length+c.data.context.length>0:"create_file"===c.data.op?c.data.file.content.length>0:"install_npm_packages"===c.data.op&&c.data.packages.length>0),m={success:{icon:(0,y.jsx)(sd.A,{className:"h-3 w-3"}),color:"text-green-500",label:"Success"},error:{icon:(0,y.jsx)(sc.A,{className:"h-3 w-3"}),color:"text-red-500",label:"Error"}},p=d?m.error:m.success,x=()=>{if(!i)return(0,y.jsx)(st.A,{className:"text-text-secondary h-4 w-4"});let e="h-4 w-4 text-text-secondary group-hover:text-text-primary transition-colors duration-200";switch(i){case"create_file":return(0,y.jsx)(ee.A,{className:e});case"edit_file":return(0,y.jsx)(n8.A,{className:e});case"read_file":return(0,y.jsx)(e9.A,{className:e});case"list_files":return(0,y.jsx)(n9.A,{className:e});case"delete_file":return(0,y.jsx)(n7.A,{className:e});case"install_npm_packages":return(0,y.jsx)(se.A,{className:e});default:return(0,y.jsx)(st.A,{className:e})}},f=()=>{if(o.success){let e=o.data.path;switch(i){case"create_file":return"Creating ".concat(e," failed");case"edit_file":return"Editing ".concat(e," failed");case"read_file":return"Reading ".concat(e," failed");case"list_files":return"Listing files failed";case"delete_file":return"Deleting ".concat(e," failed");case"install_npm_packages":return"Installing npm packages failed";default:return"Tool call failed"}}if(!c.success)return"".concat(i," executed");switch(c.data.op){case"create_file":return"Created ".concat(c.data.file.path);case"edit_file":return"Edited ".concat(c.data.file.path);case"read_file":return"Read ".concat(c.data.file.path);case"list_files":return"Listed ".concat(c.data.files.length," files");case"delete_file":return"Deleted ".concat(c.data.path);case"install_npm_packages":{let e=c.data.packages.length;return"Installed ".concat(e," ").concat(1===e?"package":"packages")}default:return"Executed ".concat(i?i.replace(/_/g," "):"tool")}};return u?(0,y.jsxs)(nZ.Nt,{open:s,onOpenChange:e=>{r(e),null==n||n(e)},className:(0,B.cn)("leading-[1]",a),"data-sentry-element":"Collapsible","data-sentry-component":"ToolResult","data-sentry-source-file":"tool-result.tsx",children:[(0,y.jsx)(nZ.R6,{asChild:!0,"data-sentry-element":"CollapsibleTrigger","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)("button",{className:"group h-auto w-full justify-start px-0",children:(0,y.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)("div",{className:(0,B.cn)("transition-opacity duration-200",s?"hidden":"group-hover:hidden"),children:x()}),(0,y.jsx)("div",{className:(0,B.cn)("transition-opacity duration-200",s?"block":"hidden group-hover:block"),children:(0,y.jsx)(st.A,{className:(0,B.cn)("text-text-secondary group-hover:text-text-primary h-4 w-4 transition-transform duration-200",s?"rotate-90":"rotate-0"),"data-sentry-element":"ChevronRight","data-sentry-source-file":"tool-result.tsx"})}),(0,y.jsx)("span",{className:"text-text-secondary group-hover:text-text-primary text-sm transition-colors duration-200",children:f()}),(0,y.jsx)("div",{className:(0,B.cn)("flex items-center gap-1 text-xs",p.color),children:p.icon})]}),(0,y.jsx)("div",{className:"flex-1"})]})})}),(0,y.jsx)(nZ.Ke,{"data-sentry-element":"CollapsibleContent","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)("div",{className:"space-y-3",children:d?(0,y.jsx)(sf,{result:l}):i&&["create_file","edit_file","read_file","list_files","delete_file"].includes(i)?(0,y.jsx)(sh,{result:l}):c.success&&"install_npm_packages"===c.data.op?(0,y.jsx)(sg,{result:l}):null})})]}):(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none leading-[1]",a),children:(0,y.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[x(),(0,y.jsx)("span",{className:"text-text-secondary text-sm",children:f()}),(0,y.jsx)("div",{className:(0,B.cn)("flex items-center gap-1 text-xs",p.color),children:p.icon})]})})})}function sy(e){var t;let{message:a,onToolResultOpenChange:n,isCollapsed:s=!1,contentHeight:r=null}=e,{hasError:l,contentString:i,reasoningText:o,shouldShowErrorOnly:d}=nn(a),c=a.role===b.PG.USER,u=(0,U.g)(e=>e.modality),m=null!=(t=null==a?void 0:a.sources)?t:[],p=Array.isArray(a.content)&&si(a.content).toolCalls.length>0,x=i.length>0||p,f=a.status===b.nH.PENDING&&!x;if(d){let e=u===b.Jg.WEBDEV&&a.failureReason===ni.Bt?ni.Bt:void 0;return(0,y.jsx)(n6,{errorMessage:e})}if(u===b.Jg.SEARCH&&!c)return(0,y.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,y.jsx)(nD,{sources:m,isComplete:a.status!==b.nH.PENDING}),(0,y.jsx)(nK,{id:a.id,content:i,sources:m,isComplete:a.status!==b.nH.PENDING}),(0,y.jsx)(nA,{message:a}),l&&(0,y.jsx)(n6,{})]});if(u===b.Jg.WEBDEV&&Array.isArray(a.content)&&!c){let{toolResults:e}=si(a.content),t=new Map;e.forEach(e=>{t.set(e.toolCallId,e)});let i=new Set,d=[],c=a.content,u=c.findIndex(e=>sl(e)||sr(e)&&t.has(e.toolCallId)),m=(e,t,a)=>(0,y.jsx)("div",{className:(0,B.cn)("overflow-hidden transition-all duration-300 ease-in-out"),style:a?{maxHeight:"0px",marginTop:"-0.75rem"}:{maxHeight:r?"".concat(r+800,"px"):"9999px"},"data-sentry-component":"renderAnimatedWrapper","data-sentry-source-file":"message-content.tsx",children:t},e);return c.forEach((e,r)=>{var o;let c=sr(e)||sl(e)?e.toolCallId:"string"==typeof e?"string-".concat(r):ss(e)?"text-".concat(r):"unknown-".concat(r),p=s&&-1!==u&&r>u;if("string"==typeof e&&e.trim())d.push(m(c,(0,y.jsx)(nz.A,{id:"".concat(a.id,"-").concat(c),content:e}),p));else if(ss(e)&&(null==(o=e.text)?void 0:o.trim()))d.push(m(c,(0,y.jsx)(nz.A,{id:"".concat(a.id,"-").concat(c),content:e.text}),p));else if(sr(e)){let a=t.get(e.toolCallId);i.add(e.toolCallId),a?d.push(m(c,(0,y.jsx)(sv,{toolResult:a,onOpenChange:n}),p)):l||d.push(m(c,(0,y.jsx)(sn,{toolCall:e}),p))}else sl(e)&&!i.has(e.toolCallId)&&(d.push(m(c,(0,y.jsx)(sv,{toolResult:e,onOpenChange:n}),p)),i.add(e.toolCallId))}),(0,y.jsxs)("div",{className:(0,B.cn)("flex flex-col","gap-3"),children:[o&&(0,y.jsxs)(n4,{isStreaming:f,defaultOpen:a.status===b.nH.PENDING,isReasoningComplete:x,reasoningText:o,children:[(0,y.jsx)(n3,{}),(0,y.jsx)(n5,{children:o})]}),d,(0,y.jsx)(nA,{message:a}),l&&(0,y.jsx)(n6,{errorMessage:a.failureReason===ni.Bt?ni.Bt:void 0})]})}return(0,y.jsxs)(y.Fragment,{children:[!c&&o&&(0,y.jsxs)(n4,{isStreaming:f,defaultOpen:a.status===b.nH.PENDING,isReasoningComplete:x,reasoningText:o,children:[(0,y.jsx)(n3,{}),(0,y.jsx)(n5,{children:o})]}),(0,y.jsx)(nz.A,{id:a.id,content:i,"data-sentry-element":"MemoizedMarkdown","data-sentry-source-file":"message-content.tsx"}),(0,y.jsx)(nA,{message:a,"data-sentry-element":"MessageAttachments","data-sentry-source-file":"message-content.tsx"}),l&&!c&&(0,y.jsx)(n6,{})]})}function sb(e){let{message:t,messageLayoutMode:a,shouldShowGeneratingText:n,onToolResultOpenChange:s,messageRef:r,contentRef:l,isScrollable:i,checkOverflow:o,hasOverflow:d,scrollToBottom:c}=e,u=(0,e5.d)("md"),m=(0,U.g)(e=>e.isPredictingModality);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,B.cn)("no-scrollbar relative flex w-full flex-1 flex-col overflow-x-auto transition-[max-height] duration-300",{"max-h-[max(50svh,350px)] overflow-y-auto":i,"border-border-faint border-t":"container"===a}),ref:r,onScroll:o,children:(0,y.jsx)("div",{className:(0,B.cn)("min-w-0",{"p-3":"container"===a}),ref:l,children:m?(0,y.jsx)(nl,{className:"text-sm",children:"Thinking..."}):n?(0,y.jsx)(nl,{className:"text-sm",children:"Generating..."}):(0,y.jsx)(sy,{message:t,onToolResultOpenChange:s})})}),d&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:u?"from-surface-primary via-surface-primary/90 pointer-events-none absolute bottom-0 left-0 h-20 w-full rounded-b-2xl bg-gradient-to-t to-transparent":"from-surface-primary via-surface-primary/80 pointer-events-none absolute bottom-0 left-0 h-16 w-full rounded-b-2xl bg-gradient-to-t to-transparent"}),(0,y.jsx)("div",{className:"pointer-events-none absolute bottom-3 left-0 flex w-full justify-center",children:(0,y.jsx)(E.$,{className:u?"pointer-events-auto size-8 transition-all duration-200 hover:scale-105":"bg-surface-secondary/90 hover:bg-surface-secondary border-border-faint/50 pointer-events-auto size-8 rounded-lg border shadow-lg backdrop-blur-sm transition-all duration-200 hover:scale-105 hover:shadow-xl",size:"icon",variant:"ghost",onClick:c,children:(0,y.jsx)(nr.A,{size:u?18:16})})})]})]})}let sj=(0,j.createServerReference)("60fb54a5dde46a4c75a35c9738809f483e40b657ce",j.callServer,void 0,j.findSourceMapURL,"createPointwiseFeedback");var sw=a(14309),sN=a(28958),sE=a(72152),sA=a(68385);function sC(){return"undefined"!=typeof navigator&&"share"in navigator&&"canShare"in navigator}async function sT(e,t,a,n,s,r){let l,i="data:".concat(r,"/");try{let u=function(e,t,a,n,s){var r,l,i;let o=(n?a3(n):"").substring(0,20).replace(/\s+/g,"_"),d=null!=(i=null==(l=e.contentType)||null==(r=l.split("/")[1])?void 0:r.split(";")[0])?i:s_(s),c=t.participantPosition,u="".concat(c,"_").concat(o,".").concat(d);return a&&(u="".concat(a,"_").concat(u)),u}(e,t,a,n,r);if(l=e.url.startsWith(i)?"base64":"url",sA.un&&sC()){var o;let t="".concat(r,"/").concat(s_(r)),a=await sI(e.url,u,null!=(o=e.contentType)?o:t,r);await sR(a,e.url)}else{var d=await sS(e.url,r),c=u;let t=document.createElement("a");t.href=d,t.download=c,document.body.appendChild(t),t.click(),document.body.removeChild(t)}"image"===r&&T.z.capture({action:"image_download",params:{message_id:t.id,user_id:s,status:"success",image_type:l}}),T.z.capture({action:"media_download",params:{message_id:t.id,user_id:s,status:"success",media_type:r,source_type:l}})}catch(a){if(sA.un&&a instanceof Error&&"AbortError"===a.name)return void console.info("User cancelled share sheet - no action taken");console.error("Error downloading ".concat(r,":"),a),window.open(e.url,"_blank"),"image"===r&&T.z.capture({action:"image_download",params:{status:"error",image_type:l,message_id:t.id,user_id:s}}),T.z.capture({action:"media_download",params:{status:"error",media_type:r,source_type:l,message_id:t.id,user_id:s}})}}function s_(e){switch(e){case"video":return"mp4";case"audio":return"mp3";default:return"png"}}function sk(e){return"/nextjs-api/proxy/media?url=".concat(encodeURIComponent(e))}async function sI(e,t,a,n){var s,r,l;let i="data:".concat(n,"/");if(("video"===n||"audio"===n)&&!e.startsWith(i)){let n=sk(e),s=await fetch(n);if(!s.ok)throw Error("Failed to fetch media for sharing");return new File([await s.blob()],t,{type:null!=(r=s.headers.get("content-type"))?r:a,lastModified:Date.now()})}let[o,d=""]=(await sS(e,n)).split(","),c=null!=(l=null==o||null==(s=o.match(/:(.*?);/))?void 0:s[1])?l:a,u=atob(d),m=new Uint8Array(u.length);for(let e=0;e<u.length;e++)m[e]=u.charCodeAt(e);return new File([new Blob([m],{type:c})],t,{type:c,lastModified:Date.now()})}async function sS(e,t){if(e.startsWith("data:".concat(t,"/")))return e;if("image"===t){let{getProxyImage:t}=await a.e(4278).then(a.bind(a,24278)),n=await t(e);if(!n.success)throw Error("Failed to fetch image through proxy");return n.data}return"video"===t||"audio"===t?sk(e):e}async function sR(e,t){navigator.canShare&&navigator.canShare({files:[e]})?await navigator.share({files:[e]}):await navigator.share({url:t})}var sM=a(50501),sD=a(4145),sz=a(73088),sO=a(95042);let sL=(0,k.eU)(!1);function sP(){let[e,t]=(0,I.fp)(sL),a=(0,M.useCallback)(()=>{t(!0)},[t]);return{shown:e,show:a,dismiss:(0,M.useCallback)(()=>{t(!1)},[t]),reset:(0,M.useCallback)(()=>{t(!1)},[t])}}function sB(){let[e]=(0,I.fp)(eP),{show:t}=sP(),a=(0,M.useRef)(e.length);return(0,M.useEffect)(()=>{10===e.length&&a.current<10&&t(),a.current=e.length},[e.length,t]),e.length>=10}function sU(e){let{message:t}=e,[a,n]=(0,I.fp)(eP),[s,r]=(0,M.useState)(!1),l=sB(),i=(0,_.kH)(e=>e.userId),{mode:o,modality:d}=(0,U.g)((0,H.k)(e=>({mode:e.mode,modality:e.modality}))),[c,u,m]=(0,ef.g)((0,H.k)(e=>[e.modelAId,e.modelBId,e.models])),p=(0,M.useMemo)(()=>ev(o,c,u,m,d),[o,c,u,m,d]);(0,M.useEffect)(()=>{var e,n;if(!s)return;let l=null==(n=t.experimental_attachments)||null==(e=n[0])?void 0:e.url;a.some(e=>(e.uploadedUrl||e.preview)===l)||r(!1)},[a,s,t.experimental_attachments]);let x=(0,M.useCallback)(()=>{var e,o;if(!s&&(null==(e=t.experimental_attachments)?void 0:e.length)&&!l){T.z.capture({action:"edit_image_button_clicked",params:{user_id:i,message_id:t.id,current_attachments_count:a.length}});try{let e=t.experimental_attachments[0];if(!e)throw Error("Invalid attachment: missing attachment");let a=new Blob([],{type:e.contentType}),s=new File([a],null!=(o=e.name)?o:"",{type:e.contentType});n(t=>[...t,{file:s,preview:e.url,isAlreadyUploaded:!0,uploadedUrl:e.url}]),r(!0)}catch(e){D.oR.error("Failed to add image to chat")}}},[t,n,s,l,i,a.length]);return s?(0,y.jsxs)(E.$,{variant:"outline",size:"sm",className:"border-interactive-positive h-6 cursor-not-allowed gap-1 bg-green-500/10 px-1.5 py-0",disabled:!0,children:[(0,y.jsx)(eR.A,{size:12,className:"text-interactive-positive"}),(0,y.jsx)("span",{className:"text-interactive-positive text-xs font-medium leading-none",children:"Added"})]}):!p||l?(0,y.jsxs)(E.$,{variant:"outline",size:"sm",className:"h-6 cursor-not-allowed gap-1 px-1.5 py-0 opacity-50",disabled:!0,children:[(0,y.jsx)(n8.A,{size:12}),(0,y.jsx)("span",{className:"text-xs font-medium leading-none",children:"Edit"})]}):(0,y.jsxs)(E.$,{variant:"outline",size:"sm",className:"h-6 gap-1 px-1.5 py-0",onClick:x,"data-sentry-element":"Button","data-sentry-component":"EditImageButton","data-sentry-source-file":"edit-image-button.tsx",children:[(0,y.jsx)(n8.A,{size:12,"data-sentry-element":"Pencil","data-sentry-source-file":"edit-image-button.tsx"}),(0,y.jsx)("span",{className:"text-interactive-normal text-xs font-medium leading-none",children:"Edit"})]})}var sF=a(22294),sH=a(99455);let sV=e=>{let{initialValue:t=null,onChange:a,className:n}=e,s=t===b.ut.UPVOTE,r=t===b.ut.DOWNVOTE,l=null!==t,i=e=>{l||null==a||a(e)},o="size-3 rounded-md p-3 transition-all";return(0,y.jsxs)(y.Fragment,{children:[!r&&(0,y.jsx)(eB.G,{content:s?"Liked":"Like",children:(0,y.jsx)(E.$,{variant:"ghost","aria-label":s?"Liked":"Like this response",className:(0,B.cn)(o,s&&"bg-green-500/10 hover:bg-green-500/10",!l&&"hover:bg-accent",l&&"cursor-default",n),onClick:()=>i(b.ut.UPVOTE),children:(0,y.jsx)(sF.A,{size:14,className:(0,B.cn)("transition-colors",s&&"text-interactive-positive")})})}),!s&&(0,y.jsx)(eB.G,{content:r?"Disliked":"Dislike",children:(0,y.jsx)(E.$,{variant:"ghost","aria-label":r?"Disliked":"Dislike this response",className:(0,B.cn)(o,r&&"bg-red-500/10 hover:bg-red-500/10",!l&&"hover:bg-accent",l&&"cursor-default",n),onClick:()=>i(b.ut.DOWNVOTE),children:(0,y.jsx)(sH.A,{size:14,className:(0,B.cn)("transition-colors",r&&"text-interactive-negative")})})})]})};var sG=a(11534),sW=a(89347);function sJ(e,t){let a=t.find(t=>t.id===e.pairwiseFeedbackId);return null==a?null:a.value===b.sb.TIE?"tie":a.value===b.sb.BOTH_BAD?"bothbad":e.participantPosition===aD.BQ.a?a.value===b.sb.MODEL_A?"win":"lose":a.value===b.sb.MODEL_B?"win":"lose"}function sY(e){let{message:t,participantPosition:a}=e,n=sJ(t,(0,U.g)(e=>e.pairwiseFeedbacks)),s=(0,U.g)(e=>"a"===a?e.leftVoteHoverState:e.rightVoteHoverState);return null!=n?null:(0,y.jsxs)("div",{className:"pointer-events-none absolute right-2 top-2 flex size-6 items-center justify-center","data-sentry-component":"VoteHoverIcon","data-sentry-source-file":"vote-hover-icon.tsx",children:[(0,y.jsx)(sG.A,{size:16,className:(0,B.cn)("absolute opacity-0 transition-opacity duration-300",{"opacity-100":"tie"===s}),"data-sentry-element":"Handshake","data-sentry-source-file":"vote-hover-icon.tsx"}),(0,y.jsx)(sW.A,{size:16,className:(0,B.cn)("absolute opacity-0 transition-opacity duration-300",{"opacity-100":"win"===s}),"data-sentry-element":"Trophy","data-sentry-source-file":"vote-hover-icon.tsx"}),(0,y.jsx)(sH.A,{size:16,className:(0,B.cn)("absolute opacity-0 transition-opacity duration-300",{"opacity-100":"bothbad"===s}),"data-sentry-element":"ThumbsDown","data-sentry-source-file":"vote-hover-icon.tsx"})]})}var sQ=a(86699);let sq=Error("Message failed to build");function s$(e){var t;let{data:a,error:n}=(0,sQ.useQuery)({...aU(null!=(t=null==e?void 0:e.id)?t:""),retry:!1,enabled:(null==e?void 0:e.status)===b.nH.SUCCESS});return(null==e?void 0:e.status)===b.nH.FAILED?{data:void 0,error:sq}:{data:a,error:n}}function sK(e){var t;let{data:a=!1}=(0,sQ.useQuery)({...aU(null!=(t=null==e?void 0:e.id)?t:""),select:e=>{switch(e.status){case"success":case"pending":return!1;case"build-error":return 0===e.files.length}},retry:!1,enabled:(null==e?void 0:e.status)===b.nH.SUCCESS});return a||(null==e?void 0:e.status)===b.nH.FAILED}function sX(e){let[t,a,n,s]=(0,U.g)((0,H.k)(e=>[e.viewedWebDevPreviews,e.pairwiseFeedbacks,e.mode,e.lastMessageIds])),r=sK(e);return(0,M.useMemo)(()=>!(n!==b.lY.BATTLE||r||null==e||e.status!==b.nH.SUCCESS||t.includes(e.id))&&!!s.includes(e.id)&&a.every(t=>t.id!==e.pairwiseFeedbackId),[n,e,t,a,r,s])}function sZ(e){let[,t]=aT(),[,a]=a_(),[,n]=aR(),s=(0,e5.d)("md"),r=e.parentMessageIds[0];return(0,M.useCallback)(()=>{t(e.participantPosition,"message",r),a("preview","message"),s&&n(!0)},[s,e.participantPosition,r,n,t,a])}let s0=(0,M.forwardRef)((e,t)=>{let{message:a,model:n,className:s,setRenderExpandedMessage:r}=e,{messageLayoutMode:l}=nc(),i=(0,U.g)(e=>e.isVoteSubmitting),o=(0,U.g)(e=>e.modality),d=(0,ef.g)(e=>e.models),c=null!==(0,U.g)(e=>"a"===a.participantPosition?e.leftVoteHoverState:e.rightVoteHoverState);return(0,y.jsxs)("div",{ref:t,className:(0,B.cn)("bg-surface-primary sticky top-0 flex w-full flex-none items-center justify-between gap-2",{"h-[76px] cursor-grab rounded-t-3xl border pt-8 active:cursor-grabbing md:h-[40px] md:rounded-t-xl md:pt-2":"drawer"===l,"h-[40px]":"container"===l,"py-2 pl-3 pr-2":"container"===l||"drawer"===l},s),children:[(0,y.jsx)(sY,{message:a,participantPosition:a.participantPosition}),(0,y.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:null==a.modelId&&i?(0,y.jsx)(sE.E,{className:"h-5 w-[100px]"}):(0,y.jsxs)(y.Fragment,{children:[a.status===b.nH.PENDING&&(0,y.jsx)(sw.R,{className:"h-5 w-5 flex-shrink-0 animate-spin"}),(0,y.jsxs)("span",{className:(0,B.cn)("xs:max-w-full flex min-w-0 max-w-[250px] items-center gap-1 font-mono","page"===l?"text-sm font-normal":"text-xs font-medium"),children:[(null==n?void 0:n.organization)==null?null:(0,y.jsx)(eM.D,{variant:"colored",className:(0,B.cn)("mr-2 flex-shrink-0","page"===l?"size-4":"size-3.5"),organization:n.organization}),o===b.Jg.WEBDEV?(0,y.jsx)(s1,{message:a,models:d}):(0,y.jsx)("span",{className:"truncate",children:ne(a,d)})]})]})}),"page"!==l&&(0,y.jsx)(s2,{className:(0,B.cn)({"pointer-events-none opacity-0":c,"opacity-100":!c}),message:a,setRenderExpandedMessage:r})]})});function s1(e){let{message:t,models:a}=e,n=sX(t),s=ne(t,a,"Option");return n?(0,y.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,y.jsx)("span",{children:s}),(0,y.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500"})]}):(0,y.jsx)("span",{className:"truncate","data-sentry-component":"WebDevModelName","data-sentry-source-file":"message-header.tsx",children:s})}function s2(e){let{className:t,message:a,setRenderExpandedMessage:n}=e,{messageLayoutMode:s}=nc(),r=(0,U.g)(e=>e.modality),l=(0,U.g)(e=>e.mode),i=(0,_.kH)(e=>e.userId),[,o]=(0,sO.A)(),d=(0,U.g)(e=>e.messages),c=(0,U.g)(e=>e.lastMessageIds),{appendStream:u}=function(){let e=(0,M.useContext)(U.P),t=(0,M.useContext)(ef.Y),a=(0,M.useContext)(_.wm),n=(0,M.useContext)(ei.cY),{setLocation:s}=(0,eL.G)(),{getRecaptchaV2Token:r}=(0,a0.eN)(),l=(0,W._P)("edit-image-button-enabled"),[,i]=aM(),o=(0,az.b)(),d=aH(),c=aV(),u=aF(),m=function(){let e=(0,aL.useQueryClient)();return(0,M.useCallback)(t=>{e.removeQueries(aU(t))},[e])}();return{appendStream:(0,M.useCallback)(async p=>{var x;if(null==e)throw Error("Evaluation session store is not available");if(null==t)throw Error("Model store is not available");if(null==a)throw Error("User store is not available");if(null==n)throw Error("Evaluation session notification store is not available");let f=e.getState(),h=n.getState(),{setImageModalityRateLimitedUntil:g,userId:v}=a.getState(),{updateModel:y}=t.getState(),{modelAId:j,modelBId:w}=aW(f),N=f.messages.find(e=>e.id===p);if(null==N)throw Error("Model message not found");f.updateMessage({id:N.id,content:[],reasoning:"",experimental_attachments:[],sources:[],status:b.nH.PENDING}),o&&h.addNotification({evaluationSessionId:f.id,modality:f.modality,mode:f.mode,modelAId:j,modelBId:w,userPrompt:f.title}),f.modality===b.Jg.WEBDEV&&(m(p),i(e=>e+1)),f.modality===b.Jg.VIDEO&&f.removeViewedVideo(p),T.z.capture({action:"chat_retry",params:{mode:f.mode,user_id:v,modality:f.modality,evaluation_session_id:f.id}});let E=null;try{E=await (0,a0.ic)("chat_retry")}catch(e){}let A=e=>fetch("/nextjs-api/stream/retry-evaluation-session-message/".concat(f.id,"/messages/").concat(p),{method:"PUT",body:JSON.stringify({recaptchaV3Token:E,...f.modality===b.Jg.IMAGE&&l?{featureFlags:{editImageButtonEnabled:l}}:{},...e?{recaptchaV2Token:e,recaptchaV3Token:void 0}:{}})}),C=await A();if(!C.ok){let{error:e}=await C.clone().json();if(e===aj.EV){let e=await r();C=await A(e)}}if(!C.ok){if(C.status===ab.TOO_MANY_REQUESTS){let e=a6(C.headers);if(null!=e)s("image-modality-rate-limit-modal"),g(e);else{let e=await (null==C?void 0:C.clone().json()),t=null==e?void 0:e.modelId,a=a7(C.headers);null!=t&&null!=a&&y({id:t,rateLimitedUntil:new Date(new Date().getTime()+a).toISOString()})}}else{let{error:e}=await a9(C);null!=e&&e===aj.f$&&D.oR.error(aj.f$),null!=e&&e===aj.kU&&D.oR.error(aj.kU)}f.updateMessage({id:N.id,content:N.content,reasoning:N.reasoning,status:N.status,experimental_attachments:N.experimental_attachments}),o&&h.updateStatus(f.id,"error");return}T.z.capture({action:"chat_retry_success",params:{mode:f.mode,user_id:v,modality:f.modality,evaluation_session_id:f.id}});let _="",k=[],I=[],S=[],R=null==(x=C.body)?void 0:x.getReader();if(!R){o&&h.updateStatus(f.id,"error");return}return ay(R,{onTextChunk:(e,t)=>{let a=k.at(-1);(null==a?void 0:a.type)==="text"?a.text+=t:k=[...k,{type:"text",text:t}],f.updateMessage({id:p,content:k})},onReasoningChunk:(e,t)=>{_+=t,f.updateMessage({id:p,reasoning:_,content:k})},onSourceChunk:(e,t)=>{I=Array.isArray(t)?t:a5(I,t),f.updateMessage({id:p,sources:I})},onImageChunk:(e,t)=>{var a;S.push({url:t.image,contentType:null!=(a=t.mimeType)?a:"image/png"}),f.updateMessage({id:p,experimental_attachments:S})},onVideoChunk:(e,t)=>{var a;S.push({url:t.url,contentType:null!=(a=t.mimeType)?a:"video/mp4",thumbnailUrl:t.thumbnailUrl}),f.updateMessage({id:p,experimental_attachments:S})},onWebDevChunk:(e,t)=>{"init"===t.type&&d(N.id,t.files)},onToolCallChunk:(e,t)=>{let a=k.findIndex(e=>"tool-call"===e.type&&e.toolCallId===t.toolCallId);-1!==a?(k=[...k])[a]={...t,type:"tool-call"}:k=[...k,{...t,type:"tool-call"}],f.updateMessage({id:p,content:k})},onToolResultChunk:(e,t)=>{let a=as.safeParse(t.result);a.success&&c(N.id,a.data);let n=k.find(e=>"tool-call"===e.type&&e.toolCallId===t.toolCallId);n&&(k=[...k,{...t,type:"tool-result",toolName:n.toolName}]),f.updateMessage({id:p,content:k})},onFinish:()=>{f.updateMessage({id:p,status:b.nH.SUCCESS}),T.z.capture({action:"chat_response_success",params:{response_type:"retry",mode:f.mode,user_id:v,modality:f.modality,evaluation_session_id:f.id,model_id:N.modelId,has_attachments:S.length>0,attachments_count:S.length,response_length:k.length}}),T.z.capture({action:"chat_responses_success",params:{response_type:"retry",mode:f.mode,user_id:v,modality:f.modality}}),f.modality===b.Jg.WEBDEV&&u(p),o&&h.updateStatus(f.id,"success")},onError:(e,t)=>{f.updateMessage({id:p,status:b.nH.FAILED,failureReason:null!=t?t:null}),o&&h.updateStatus(f.id,"error")}})},[e,t,a,s,r,l,i,d,c,u,m,n,o])}}(),m=(0,U.g)(e=>e.addPointwiseFeedback),p=(0,U.g)(e=>e.deletePointwiseFeedback),x=(0,U.g)(e=>e.getPointwiseFeedbackById),f=(0,W._P)("pointwise-feedback-enabled"),h=(0,W._P)("edit-image-button-enabled"),g=sZ(a),v=(0,e5.d)("md"),j=null!=a.pairwiseFeedbackId,[w]=aT(),N=aI(w),A=(null==N?void 0:N.id)===a.id,C=a.status===b.nH.PENDING,k=a.status===b.nH.FAILED,I=C||k,S=(0,M.useMemo)(()=>Array.isArray(a.content)?a.content.map(e=>"text"===e.type?e.text:"").join(""):a.content,[a.content]),R="drawer"!==s,z="drawer"===s,O=r!==b.Jg.IMAGE&&r!==b.Jg.VIDEO,L=(0,M.useMemo)(()=>{let e=c.some(e=>{let t=d.find(t=>t.id===e);return(null==t?void 0:t.pairwiseFeedbackId)!=null});return(l!==b.lY.BATTLE||a.status===b.nH.FAILED)&&c.includes(a.id)&&!e&&!C&&R},[C,c,a.id,d,R,l,a.status]),P=(0,M.useMemo)(()=>f&&l===b.lY.DIRECT&&!I,[f,l,I]),F=(0,ef.g)(e=>e.models),H=(0,M.useMemo)(()=>!a.modelId||F.some(e=>e.id===a.modelId),[F,a.modelId]),V=(0,M.useMemo)(()=>{var e,t;return a.pointwiseFeedbackId&&null!=(t=null==(e=x(a.pointwiseFeedbackId))?void 0:e.value)?t:null},[a.pointwiseFeedbackId,x]),G=(0,M.useMemo)(()=>{var e,t;return null!=(t=a.role===b.PG.ASSISTANT&&(null==(e=a.experimental_attachments)?void 0:e.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("image")})))&&t},[a]),J=(0,M.useMemo)(()=>{var e,t;return null!=(t=a.role===b.PG.ASSISTANT&&(null==(e=a.experimental_attachments)?void 0:e.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("video")})))&&t},[a]),Y=(0,M.useCallback)(()=>{null!=a.id&&u(a.id)},[u,a.id]),{downloadMedia:Q,shouldShowMediaDownloadButton:q}=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image",n=(0,_.kH)(e=>e.userId),s=(0,U.g)(t=>t.messages.find(t=>t.id===e.parentMessageIds[0])),r=(0,ef.g)(t=>t.models.find(t=>t.id===e.modelId)),l=(null==(t=e.experimental_attachments)?void 0:t.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith(a)}))&&(!sA.un||sC());return{downloadMedia:(0,M.useCallback)(async()=>{e.experimental_attachments&&await Promise.all(e.experimental_attachments.map(async t=>{var l;(null==(l=t.contentType)?void 0:l.startsWith(a))&&await sT(t,e,null==r?void 0:r.publicName,s,n,a)}))},[e,null==r?void 0:r.publicName,s,n,a]),shouldShowMediaDownloadButton:l}}(a,G?"image":J?"video":void 0),$=(0,M.useCallback)(async e=>{if(null==e||null==a.modelId||a.pointwiseFeedbackId)return;T.z.capture({action:"pointwise_feedback",params:{mode:l,user_id:i,modality:r,value:e,evaluation_session_id:a.evaluationSessionId}});let t=m({messageId:a.id,modelId:a.modelId,value:e}),n=null;try{n=await (0,a0.ic)("pointwise_feedback")}catch(e){}try{let t=await sj({messageId:a.id,value:e,recaptchaV3Token:n});if(!t.success)throw Error("Failed to submit pointwise feedback: ".concat(t.error));T.z.capture({action:"pointwise_feedback_success",params:{mode:l,user_id:i,modality:r,value:e,evaluation_session_id:a.evaluationSessionId}})}catch(e){p(t.id),D.oR.error("Error submitting feedback")}},[a.id,a.modelId,a.pointwiseFeedbackId,a.evaluationSessionId,m,p,l,i,r]),K=(0,M.useMemo)(()=>{let e=[],t=!G&&!J;return!I&&G&&r===b.Jg.IMAGE&&l===b.lY.DIRECT&&"treatment-1"===h&&e.push((0,y.jsx)(sU,{message:a},"edit")),L&&!a.pointwiseFeedbackId&&H&&e.push((0,y.jsx)(eB.G,{content:"Retry",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:Y,children:(0,y.jsx)(sM.A,{size:14})})},"retry")),R&&r===b.Jg.WEBDEV&&!v&&e.push((0,y.jsx)(eB.G,{content:"View Preview",children:(0,y.jsx)(E.$,{variant:"ghost",disabled:A,className:(0,B.cn)("rounded-md px-3 py-1 text-sm font-medium",A&&!C&&"!opacity-30",C||j?"bg-surface-primary text-interactive-normal border-border-faint hover:bg-surface-secondary hover:text-interactive-active border":"bg-header-primary text-primary-foreground hover:bg-header-secondary hover:text-primary-foreground"),onClick:g,children:A?"Viewing":"View"})},"view-preview")),!I&&r!==b.Jg.WEBDEV&&(q?(e.push((0,y.jsx)(eB.G,{content:"Download",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>void Q(),children:(0,y.jsx)(sD.A,{size:14})})},"download")),r===b.Jg.IMAGE&&l!==b.lY.DIRECT&&"treatment-1"===h&&e.push((0,y.jsx)(sU,{message:a},"edit"))):t&&e.push((0,y.jsx)(eB.G,{content:"Copy",children:(0,y.jsx)(sN.i,{variant:"ghost",className:"size-3 rounded-md p-3",size:14,onClick:()=>o(S)})},"copy")),R&&null!=n&&O&&e.push((0,y.jsx)(eB.G,{content:"Expand",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>n(!0),children:(0,y.jsx)(sz.A,{size:14})})},"expand"))),R&&null!=n&&C&&O&&r!==b.Jg.WEBDEV&&e.push((0,y.jsx)(eB.G,{content:"Expand",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>n(!0),children:(0,y.jsx)(sz.A,{size:14})})},"expand")),z&&null!=n&&e.push((0,y.jsx)(eB.G,{content:"Close",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>n(!1),children:(0,y.jsx)(eS.A,{size:14})})},"close")),P&&e.push((0,y.jsx)(sV,{initialValue:V,onChange:$},"pointwise-feedback")),e},[O,l,o,Q,h,$,G,J,j,A,z,C,I,v,H,a,S,r,R,V,Y,n,q,P,L,g]);return(0,y.jsx)("div",{className:(0,B.cn)("text-text-primary flex items-center gap-2 transition-opacity duration-300",t),"data-sentry-component":"MessageActions","data-sentry-source-file":"message-header.tsx",children:K})}function s4(e){let{renderExpandedMessage:t,setRenderExpandedMessage:a,message:n}=e,s=(0,ef.g)(e=>e.models),r=(0,M.useMemo)(()=>s.find(e=>n.modelId===e.id),[s,n.modelId]);return(0,y.jsxs)(tw._s,{open:t,onClose:()=>a(!1),"data-sentry-element":"Drawer","data-sentry-component":"MessageDrawer","data-sentry-source-file":"message-drawer.tsx",children:[(0,y.jsxs)(tw.gk,{className:"hidden","data-sentry-element":"DrawerTitle","data-sentry-source-file":"message-drawer.tsx",children:["Message from ",ne(n,s)]}),(0,y.jsx)(tw.zj,{className:"h-[calc(100%-4rem)] rounded-t-3xl md:absolute md:h-full md:rounded-t-3xl md:p-2 md:pb-0",container:"undefined"==typeof document?void 0:document.getElementById(tP),hideOverlay:!0,"data-sentry-element":"DrawerContent","data-sentry-source-file":"message-drawer.tsx",children:(0,y.jsxs)(nd,{messageLayoutMode:"drawer","data-sentry-element":"MessageContextProvider","data-sentry-source-file":"message-drawer.tsx",children:[(0,y.jsx)(s0,{message:n,model:r,setRenderExpandedMessage:a,selectedMessage:null,"data-sentry-element":"MessageHeader","data-sentry-source-file":"message-drawer.tsx"}),(0,y.jsx)("div",{className:"bg-surface-primary md:border-border-faint h-full !select-text overflow-y-auto md:border-x",onPointerDownCapture:e=>{e.nativeEvent.stopImmediatePropagation()},children:(0,y.jsx)("div",{className:"grid w-full gap-4 p-2 md:mx-auto md:max-w-[640px]",children:(0,y.jsx)("div",{className:"overflow-x-auto",children:(0,y.jsx)(sy,{message:n,"data-sentry-element":"MessageContent","data-sentry-source-file":"message-drawer.tsx"})})})})]})})]})}s0.displayName="MessageHeader";var s3=a(3574);function s5(e){let{message:t,messageLayoutMode:a,shouldShowGeneratingText:n,onToolResultOpenChange:s,messageRef:r}=e,[l,i]=(0,M.useState)(!1),o=t.status!==b.nH.PENDING&&r.current?r.current.scrollHeight:null,d=t.status!==b.nH.PENDING&&function(e){let t=Array.isArray(e.content)?si(e.content):null;return!!t&&t.toolCalls.length>0}(t),c=d&&!l,u=d&&l,m=()=>{i(e=>!e)};return(0,y.jsx)("div",{className:(0,B.cn)("relative flex w-full flex-1 flex-col overflow-x-auto",{"border-border-faint border-t":"container"===a}),ref:r,"data-sentry-component":"WebDevMessageContentContainer","data-sentry-source-file":"webdev-message-content-container.tsx",children:(0,y.jsx)("div",{className:(0,B.cn)("min-w-0",{"p-3":"container"===a}),children:n?(0,y.jsx)(nl,{className:"text-sm",children:"Generating..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(sy,{message:t,onToolResultOpenChange:s,isCollapsed:c,contentHeight:o}),c&&(0,y.jsx)("div",{className:"flex justify-start pt-2",children:(0,y.jsxs)(E.$,{variant:"ghost",size:"sm",className:"text-text-tertiary flex items-center gap-1 p-0 text-sm hover:bg-transparent hover:opacity-100",onClick:m,children:["Show More ",(0,y.jsx)(eI.A,{size:16,className:"ml-1"})]})}),u&&(0,y.jsx)("div",{className:"flex justify-start pt-2",children:(0,y.jsxs)(E.$,{variant:"ghost",size:"sm",className:"text-text-tertiary flex items-center gap-1 px-0 py-1 text-sm hover:bg-transparent hover:opacity-100",onClick:m,children:["Show Less ",(0,y.jsx)(s3.A,{size:16,className:"ml-1"})]})})]})})})}var s6=a(11183),s8=a(76158);let s9="index.html",s7={PENDING:{statusText:"Building...",actionText:"Preview will be available soon"},ERROR:{statusText:"Something went wrong",actionText:"No preview available"},WINNER:{statusText:"",actionText:"Click to view"},LOSER:{statusText:"",actionText:"Click to view"},DONE:{statusText:"",actionText:"Click to view"}};function re(e){let{message:t,onClick:a,voteStatus:n}=e,[s]=aT(),r=aI(s),{data:l}=s$(null!=r?r:null),{RiveComponent:i}=(0,n_.useRive)({src:"/rive/building-loop.riv",autoplay:!0}),o=function(e,t,a){if(e.status===b.nH.PENDING)return{status:"pending",...s7.PENDING,tileClassName:"bg-surface-secondary border-border-faint",iconColor:"text-interactive-normal",icon:s6.A,useRiveAnimation:!0};if(e.status===b.nH.FAILED||e.status===b.nH.FLAGGED)return{status:"error",...s7.ERROR,tileClassName:"bg-surface-secondary border-border-faint",iconColor:"text-interactive-normal",icon:s8.A};if(null!==t&&null!=e.pairwiseFeedbackId)return"win"===t||"tie"===t?{status:"winner",statusText:a,actionText:s7.WINNER.actionText,tileClassName:"bg-interactive-positive/10 border-interactive-positive",iconColor:"text-interactive-positive",icon:s6.A}:"bothbad"===t?{status:"bothbad",statusText:a,actionText:s7.LOSER.actionText,tileClassName:"bg-interactive-negative/10 border-interactive-negative",iconColor:"text-interactive-negative",icon:s6.A}:{status:"done",statusText:a,actionText:s7.DONE.actionText,tileClassName:"bg-interactive-link/10 border-interactive-link/30",iconColor:"text-interactive-link",icon:s6.A};return{status:"done",statusText:a,actionText:s7.DONE.actionText,tileClassName:"bg-interactive-link/10 border-interactive-link/30",iconColor:"text-interactive-link",icon:s6.A}}(t,n,(()=>{var e,t,a;let n=null!=(t=null==l?void 0:l.files)?t:[];return 0===n.length?s9:null!=(a=null==(e=n[0])?void 0:e.path)?a:s9})()),d=o.icon,c=t.status===b.nH.FAILED||t.status===b.nH.FLAGGED;return(0,y.jsx)("div",{className:"mx-3 my-2","data-sentry-component":"WebDevTile","data-sentry-source-file":"webdev-tile.tsx",children:(0,y.jsx)(E.$,{variant:"ghost",className:"h-auto w-full p-0 hover:bg-transparent",onClick:()=>{c||null==a||a()},"data-sentry-element":"Button","data-sentry-source-file":"webdev-tile.tsx",children:(0,y.jsx)("div",{className:(0,B.cn)("w-full rounded-lg border p-4 transition-colors",c?"cursor-not-allowed":"cursor-pointer",o.tileClassName),children:(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("div",{className:"flex-shrink-0",children:(0,y.jsx)("div",{className:"bg-surface-primary flex h-10 w-10 items-center justify-center rounded-lg",children:o.useRiveAnimation?(0,y.jsx)(i,{className:"h-5 w-5"}):(0,y.jsx)(d,{className:(0,B.cn)("h-5 w-5",o.iconColor)})})}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-center",children:[(0,y.jsx)("div",{className:(0,B.cn)("mb-1 text-sm font-medium","error"===o.status?"text-text-tertiary":"text-text-primary"),children:o.statusText}),(0,y.jsx)("div",{className:"text-text-tertiary text-xs",children:o.actionText})]})]})})})})}var rt=a(75319);let ra=(0,j.createServerReference)("605972150fdc74fb661d126f3173493f87b53be12a",j.callServer,void 0,j.findSourceMapURL,"createPairwiseFeedback");function rn(){let e=(0,_.kH)(e=>e.userId),t=(0,U.g)((0,H.k)(e=>({id:e.id,mode:e.mode,modality:e.modality,setIsVoteSubmitting:e.setIsVoteSubmitting,addPairwiseFeedback:e.addPairwiseFeedback,deletePairwiseFeedback:e.deletePairwiseFeedback,updatePairwiseFeedbackModels:e.updatePairwiseFeedbackModels,resetViewedWebDevPreviews:e.resetViewedWebDevPreviews,resetViewedVideos:e.resetViewedVideos}))),{modelAId:a,modelBId:n}=(0,ef.g)(e=>e);return{handlePairwiseFeedbackSubmit:(0,M.useCallback)(async(s,r,l,i,o)=>{if(null!=l&&null!=i)try{t.setIsVoteSubmitting(!0);let u={evaluationSessionId:t.id,messageAId:l,messageBId:i,modelAId:t.mode===b.lY.BATTLE?void 0:null!=a?a:void 0,modelBId:t.mode===b.lY.BATTLE?void 0:null!=n?n:void 0,value:s,didInspectBothMobileHorizontalResponses:o};if(T.z.capture({action:"chat_vote",params:{mode:t.mode,user_id:e,modality:t.modality}}),t.mode===b.lY.BATTLE){var d,c;null==(c=window)||null==(d=c.gtag)||d.call(c,"event","conversion_event_default")}let{id:m}=t.addPairwiseFeedback(u),p=null;try{p=await r.challenge(),null==p&&console.error("Failed to get turnstile token")}catch(e){console.error("Turnstile challenge failed")}let x=null;try{x=await (0,a0.ic)("pairwise_feedback")}catch(e){console.error("Failed to get recaptcha v3 token")}T.z.capture({action:"chat_vote_turnstile_success",params:{mode:t.mode,user_id:e,modality:t.modality}});let f=await ra({...u,turnstileToken:p,recaptchaV3Token:x});if(!f.success)throw t.deletePairwiseFeedback(m),D.oR.error("Failed to submit feedback"),Error("Failed to submit pairwise feedback");t.updatePairwiseFeedbackModels({pairwiseFeedbackId:m,modelAId:f.data.modelAId,modelBId:f.data.modelBId}),T.z.capture({action:"chat_vote_success",params:{mode:t.mode,user_id:e,modality:t.modality,arenaId:f.data.arenaId}})}finally{t.resetViewedWebDevPreviews(),t.resetViewedVideos(),t.setIsVoteSubmitting(!1)}},[t,e,a,n])}}function rs(){let{handlePairwiseFeedbackSubmit:e}=rn(),t=(0,U.g)(e=>e.setLeftVoteHoverState),a=(0,U.g)(e=>e.setRightVoteHoverState),n=(0,rt.bj)(e=>e),[s,r]=(0,U.g)(e=>e.lastMessageIds),l=()=>{t(null),a(null)};return{handleVote:t=>{e(t,n,s,r),l()},createIndividualVoteHandlers:e=>({handleMouseEnter:()=>{e===aD.BQ.a?t("win"):a("win")},handleMouseLeave:l}),createTieVoteHandlers:()=>{let e="bothbad";return{handleTieMouseEnter:()=>{t("tie"),a("tie")},handleBothBadMouseEnter:()=>{t(e),a(e)},handleMouseLeave:l}}}}function rr(){let{messageThreads:e}=ns(),t=e[0],a=null==t?void 0:t.get("a"),n=null==t?void 0:t.get("b"),s=sK(null!=a?a:null),r=sK(null!=n?n:null),[l,i]=(0,U.g)((0,H.k)(e=>[e.isVoteSubmitting,e.viewedWebDevPreviews]));return(0,M.useMemo)(()=>{if(l)return!1;let e=s||(null==a?void 0:a.id)!=null&&i.includes(a.id),t=r||(null==n?void 0:n.id)!=null&&i.includes(n.id);return e&&t},[l,i,null==a?void 0:a.id,null==n?void 0:n.id,s,r])}function rl(e){let{participantPosition:t}=e,{handleVote:a,createIndividualVoteHandlers:n}=rs(),s=rr(),r=t===aD.BQ.a?b.sb.MODEL_A:b.sb.MODEL_B,{handleMouseEnter:l,handleMouseLeave:i}=n(t);return(0,y.jsx)("div",{className:"p-2","data-sentry-component":"WebDevVoteButton","data-sentry-source-file":"webdev-vote-button.tsx",children:(0,y.jsx)(eB.G,{content:"View both previews to vote",wrapDisabled:!s,open:!s&&void 0,"data-sentry-element":"BasicTooltip","data-sentry-source-file":"webdev-vote-button.tsx",children:(0,y.jsx)(E.$,{onClick:()=>{a(r)},disabled:!s,variant:"outline",className:"hover:bg-interactive-positive/12 hover:text-interactive-positive hover:border-interactive-positive rounded-lg",onMouseEnter:l,onMouseLeave:i,"data-sentry-element":"Button","data-sentry-source-file":"webdev-vote-button.tsx",children:"".concat(t.toUpperCase()," is Better")})})})}function ri(e){let{message:t,selectedMessage:a,messageLayoutMode:n,className:s}=e,[r,l]=(0,M.useState)(!1),i=(0,M.useRef)(null),o=(0,M.useRef)(null),[d,c]=(0,M.useState)(!1),u=(0,M.useRef)(0),m=(0,ef.g)(e=>e.models.find(e=>t.modelId===e.id)),p=(0,U.g)(e=>e.modality),x=(0,U.g)(e=>e.mode),f=(0,U.g)(e=>e.pairwiseFeedbacks),h=(0,U.g)(e=>e.lastMessageIds.includes(t.id)),{latestMessages:g}=ns(),v=(0,e5.d)("md"),j=sZ(t),{hasError:w,contentString:N,reasoningText:E}=nn(t),A=Array.isArray(t.content)&&si(t.content).toolCalls.length>0,C=null==a&&p!==b.Jg.IMAGE,T=C&&p!==b.Jg.WEBDEV,_=sJ(t,f),k=(0,U.g)(e=>(0,X.au)(e).includes(t.id)?t.participantPosition===aD.BQ.a?e.leftVoteHoverState:e.rightVoteHoverState:null),I=(p===b.Jg.CHAT||p===b.Jg.WEBDEV)&&""===N&&!w&&!E&&!A,S=function(e){let{voteStatus:t,isSelected:a=!1,voteHoverState:n=null,isInDrawer:s=!1}=e;return["win","tie"].includes(null!=t?t:"")?a?"border-border-faint text-interactive-positive":s?"border-transparent text-interactive-positive":"border-interactive-positive text-interactive-positive":"bothbad"===t?s?"border-transparent text-interactive-negative":"border-interactive-negative text-interactive-negative":"win"===n||"tie"===n?"border-interactive-positive text-interactive-positive":"bothbad"===n?"border-interactive-negative text-interactive-negative":"lose"===t?"border-border-faint text-interactive-normal":null===t?"border-border-faint":null}({voteStatus:_,voteHoverState:k,isSelected:a===t.participantPosition}),R=(0,M.useCallback)(()=>{if(!i.current||!T)return;let{scrollTop:e,scrollHeight:t,clientHeight:a}=i.current;c(e+a<t-1)},[T]);(0,M.useEffect)(()=>{R()},[R]),(0,M.useEffect)(()=>{if(!o.current||!T)return;let e=new ResizeObserver(()=>{R()});return e.observe(o.current),()=>{e.disconnect()}},[R,T]);let{stayScrolled:D}=function(e){let{initialScroll:t=null,margin:a=0,runScroll:n=tF(e)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,M.useRef)(null),r=(0,M.useCallback)(()=>{let t;return null!==e.current&&Math.ceil(e.current.scrollTop)>=(t=e.current).scrollHeight-t.clientHeight-a},[e,a]);(0,M.useEffect)(()=>{let t=()=>{s.current=r()},a=e.current;if(null!==a)return a.addEventListener("scroll",t),()=>a.removeEventListener("scroll",t)},[e,r]);let l=(0,M.useCallback)(t=>{let a;null!=e.current&&n(Math.min((a=e.current).scrollHeight-a.clientHeight,t))},[e,n]),i=(0,M.useCallback)(()=>{l(1/0)},[l]),o=(0,M.useCallback)(()=>(s.current&&i(),s.current),[i]);return tH(()=>{null!==t&&l(t),s.current=r()},[]),{scroll:l,stayScrolled:o,scrollBottom:i,isScrolled:r}}(i,{margin:20});(0,M.useLayoutEffect)(()=>{h&&D()},[D,t.content.length,h]);let z=(0,M.useCallback)(()=>{null!=i.current&&i.current.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})},[]),O=(0,M.useCallback)(e=>{e?u.current+=1:u.current=Math.max(0,u.current-1)},[]);return(0,y.jsxs)(nd,{messageLayoutMode:n,"data-sentry-element":"MessageContextProvider","data-sentry-component":"AssistantMessage","data-sentry-source-file":"assistant-message.tsx",children:[(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-primary relative flex w-full min-w-0 flex-1 flex-col overflow-hidden transition-all duration-300",{"rounded-xl border":"container"===n,"gap-2":"page"===n},S,s),children:[(0,y.jsx)(s0,{message:t,model:m,setRenderExpandedMessage:l,selectedMessage:a,"data-sentry-element":"MessageHeader","data-sentry-source-file":"assistant-message.tsx"}),p===b.Jg.WEBDEV&&v&&(0,y.jsx)(re,{message:t,onClick:j,voteStatus:_}),p===b.Jg.WEBDEV?(0,y.jsx)(s5,{message:t,messageLayoutMode:n,shouldShowGeneratingText:I,onToolResultOpenChange:O,messageRef:i}):(0,y.jsx)(sb,{message:t,messageLayoutMode:n,shouldShowGeneratingText:I,onToolResultOpenChange:O,messageRef:i,contentRef:o,isScrollable:C,checkOverflow:R,hasOverflow:d,scrollToBottom:z}),(()=>{let e=g.every(e=>(null==e?void 0:e.status)===b.nH.SUCCESS||(null==e?void 0:e.status)===b.nH.FAILED);return p===b.Jg.WEBDEV&&null==_&&t.status!==b.nH.PENDING&&e&&x!==b.lY.DIRECT&&h})()&&(0,y.jsx)(rl,{participantPosition:t.participantPosition}),"page"===n&&(0,y.jsx)(s2,{message:t})]}),(0,y.jsx)(s4,{renderExpandedMessage:r,setRenderExpandedMessage:l,message:t,"data-sentry-element":"MessageDrawer","data-sentry-source-file":"assistant-message.tsx"})]})}function ro(e){let{message:t}=e,[,a]=(0,sO.A)(),{contentString:n}=nn(t),s=na(t),r=(0,M.useRef)(null),[l,i]=(0,M.useState)(null);return(0,M.useEffect)(()=>{let e=r.current;if(!e)return;let t=new ResizeObserver(e=>{for(let t of e)i(t.contentRect.height)});return t.observe(e),()=>{t.disconnect()}},[]),(0,y.jsx)(nd,{messageLayoutMode:"container","data-sentry-element":"MessageContextProvider","data-sentry-component":"UserMessage","data-sentry-source-file":"user-message.tsx",children:(0,y.jsx)("div",{className:"group flex max-w-[min(768px,100%)] flex-col gap-1 self-end",children:(0,y.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,y.jsx)(nA,{message:t,"data-sentry-element":"MessageAttachments","data-sentry-source-file":"user-message.tsx"}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2",children:[(0,y.jsx)(sN.i,{variant:"ghost",size:12,className:"text-text-secondary hover:text-text-primary size-6 flex-shrink-0 rounded-md p-0 opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>a(n),"data-sentry-element":"CopyButton","data-sentry-source-file":"user-message.tsx"}),(0,y.jsx)("div",{ref:r,className:(0,B.cn)("bg-surface-secondary w-fit min-w-0 max-w-prose flex-1 rounded-lg px-3 py-2 transition-[border-radius] duration-150",{"rounded-3xl":(null!=l?l:40)<=40}),children:(0,y.jsx)(nz.A,{id:t.id,content:n,className:(0,B.cn)({"text-interactive-negative":s}),"data-sentry-element":"MemoizedMarkdown","data-sentry-source-file":"user-message.tsx"})})]})]})})})}var rd=a(66965),rc=a(75646),ru=a(52378),rm=a(31924),rp=a(34828);let rx=M.createContext({scrollLeftOnCarouselId:()=>{},scrollRightOnCarouselId:()=>{},registerCarousel:()=>{}}),rf=e=>{let{children:t}=e,[a,n]=M.useState({}),s=M.useCallback(e=>{var t;a[e]&&(null==(t=a[e])||t.left())},[a]),r=M.useCallback(e=>{var t;a[e]&&(null==(t=a[e])||t.right())},[a]);return(0,y.jsx)(rx.Provider,{value:{scrollLeftOnCarouselId:s,scrollRightOnCarouselId:r,registerCarousel:(e,t,a)=>{n(n=>({...n,[e]:{left:t,right:a}}))}},"data-sentry-element":"unknown","data-sentry-component":"CarouselTouchAreaContextProvider","data-sentry-source-file":"carousel.tsx",children:t})},rh=M.createContext(null);function rg(){let e=M.useContext(rh);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}function rv(){let e=M.useContext(rx);if(!e)throw Error("useCarouselTouchArea must be used within a <CarouselTouchArea />");return e}let ry=e=>{let{className:t,latestMessages:a,...n}=e,s=M.useRef(null),{scrollLeftOnCarouselId:r,scrollRightOnCarouselId:l}=rv(),i=(0,ru.J)(...a.map(e=>e.id)),o=M.useCallback(e=>{let t=e.touches[0];t&&(s.current={x:t.clientX,y:t.clientY})},[]),d=M.useCallback(e=>{if(!s.current)return;let t=e.changedTouches[0];if(!t)return;let a=t.clientX-s.current.x;Math.abs(a)>Math.abs(t.clientY-s.current.y)&&Math.abs(a)>50&&(a>0?r(i):l(i)),s.current=null},[s,r,l]);return(0,y.jsx)("div",{className:(0,B.cn)("h-full min-h-12 w-full flex-grow",t),onTouchStart:o,onTouchEnd:d,...n,"data-sentry-component":"CarouselTouchArea","data-sentry-source-file":"carousel.tsx"})},rb=e=>{let{orientation:t="horizontal",opts:a,setApi:n,plugins:s,edgeToEdgePadding:r,className:l,children:i,messageA:o,messageB:d,...c}=e,[u,m]=(0,rm.A)({...a,axis:"horizontal"===t?"x":"y"},s),[p,x]=M.useState(!1),[f,h]=M.useState(!1),[g,v]=M.useState(!1),{registerCarousel:b}=rv(),j=M.useCallback(e=>{x(e.canScrollPrev()),h(e.canScrollNext())},[]),w=M.useCallback(()=>{null==m||m.scrollPrev()},[m]),N=M.useCallback(()=>{null==m||m.scrollNext()},[m]),E=M.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),w()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[w,N]);return M.useEffect(()=>{b((0,ru.J)(null==o?void 0:o.id,null==d?void 0:d.id),w,N)},[w,N]),M.useEffect(()=>{m&&n&&n(m)},[m,n]),M.useEffect(()=>{if(m)return j(m),m.on("reInit",j),m.on("select",j),()=>{null==m||m.off("select",j)}},[m]),(0,y.jsx)(rh.Provider,{value:{carouselRef:u,api:m,opts:a,orientation:t||((null==a?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:w,scrollNext:N,canScrollPrev:p,canScrollNext:f,edgeToEdgePadding:r,hasInteracted:g,setHasInteracted:v},"data-sentry-element":"unknown","data-sentry-component":"Carousel","data-sentry-source-file":"carousel.tsx",children:(0,y.jsx)("div",{onKeyDownCapture:E,className:(0,B.cn)("relative h-full",l,{"-mx-[--e2e-padding]":"horizontal"===t,"-my-[--e2e-padding]":"vertical"===t}),style:{"--e2e-padding":r},role:"region","aria-roledescription":"carousel",...c,children:i})})};rb.displayName="Carousel";let rj=e=>{let{className:t,ref:a,...n}=e,{carouselRef:s,orientation:r}=rg();return(0,y.jsx)("div",{ref:s,className:(0,B.cn)("overflow-hidden",{"px-[--e2e-padding]":"horizontal"===r,"py-[--e2e-padding]":"vertical"===r}),"data-sentry-component":"CarouselContent","data-sentry-source-file":"carousel.tsx",children:(0,y.jsx)("div",{ref:a,className:(0,B.cn)("flex","horizontal"===r?"-ml-4":"-mt-4 flex-col",t),...n})})},rw=e=>{let{className:t,ref:a,...n}=e,{orientation:s}=rg();return(0,y.jsx)("div",{ref:a,role:"group","aria-roledescription":"slide",className:(0,B.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===s?"pl-4":"pt-4",t),...n,"data-sentry-component":"CarouselItem","data-sentry-source-file":"carousel.tsx"})},rN=M.forwardRef((e,t)=>{let{className:a,variant:n="outline",size:s="icon",hideOnDisable:r=!1,...l}=e,{orientation:i,scrollPrev:o,canScrollPrev:d}=rg();return(0,y.jsxs)(E.$,{ref:t,variant:n,size:s,className:(0,B.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",{hidden:r&&!d},a),disabled:!d,onClick:o,...l,children:[(0,y.jsx)(rp.A,{className:"h-4 w-4"}),(0,y.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});rN.displayName="CarouselPrevious";let rE=e=>{let{className:t,variant:a="outline",size:n="icon",hideOnDisable:s=!1,shouldDim:r=!1,ref:l,...i}=e,{orientation:o,scrollNext:d,canScrollNext:c,hasInteracted:u}=rg(),m=r||u;return(0,y.jsxs)(E.$,{ref:l,variant:m?a:"tertiary",size:n,className:(0,B.cn)("absolute h-8 w-8 rounded-full","horizontal"===o?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",{hidden:s&&!c},t),disabled:!c,onClick:()=>d(),...i,"data-sentry-element":"Button","data-sentry-component":"CarouselNext","data-sentry-source-file":"carousel.tsx",children:[(0,y.jsx)(S.A,{className:(0,B.cn)("h-4 w-4",m?"text-interactive":"text-interactive-inverted"),"data-sentry-element":"ArrowRight","data-sentry-source-file":"carousel.tsx"}),(0,y.jsx)("span",{className:"sr-only",children:"Next slide"})]})},rA=e=>{let{className:t,messageA:a,messageB:n,ref:s,...r}=e,{api:l,setHasInteracted:i}=rg(),[o,d]=M.useState(0),[c,u]=M.useState(0),[m,p]=M.useState(new Set),x=(e=>{let[t,a]=e;return(0,U.g)((e=>{let[t,a]=e,n="string"==typeof t?t:null==t?void 0:t.id,s="string"==typeof a?a:null==a?void 0:a.id;return(0,aG.Mz)([e=>e.pairwiseFeedbacks],e=>{var t;return null==(t=e.find(e=>e.messageAId===n||e.messageBId===s))?void 0:t.value})})([t,a]))})([a,n]),f=(0,U.g)(e=>e.setDidInspectBothMobileHorizontalResponses),h=null==a?void 0:a.status,g=null==n?void 0:n.status;M.useEffect(()=>{x===b.sb.MODEL_A?null==l||l.scrollTo(0):x===b.sb.MODEL_B&&(null==l||l.scrollTo(1))},[x,l]);let v=M.useCallback(e=>{u(e.scrollSnapList().length),d(e.selectedScrollSnap())},[]);M.useEffect(()=>{if(l)return l.on("reInit",v),l.on("select",v),l.on("slidesChanged",v),()=>{null==l||l.off("reInit",v),null==l||l.off("select",v),null==l||l.off("slidesChanged",v)}},[l]),M.useEffect(()=>{0!==o&&i(!0),(0!==o||h!==b.nH.PENDING)&&(1!==o||g!==b.nH.PENDING)&&p(e=>{let t=new Set(e);return t.add(o),t})},[o,h,g]),M.useEffect(()=>{a&&n&&f(2===m.size,a.id,n.id)},[m,f]);let j=M.useMemo(()=>Array.from({length:c}).map((e,t)=>(0,y.jsx)(rC,{isSelected:t===o,onSelected:()=>null==l?void 0:l.scrollTo(t)},t)),[c,o]);return c<=1?null:(0,y.jsx)("div",{ref:s,className:(0,B.cn)("flex w-full justify-center",t),...r,"data-sentry-component":"CarouselControls","data-sentry-source-file":"carousel.tsx",children:j})};rA.displayName="CarouselControls";let rC=e=>{let{className:t,isSelected:a,onSelected:n,ref:s,...r}=e;return(0,y.jsx)("button",{ref:s,className:(0,B.cn)("cursor-pointer px-1 py-2",t),onClick:n,...r,"data-sentry-component":"CarouselControlChip","data-sentry-source-file":"carousel.tsx",children:(0,y.jsx)("div",{className:(0,B.cn)("bg-interactive-normal hover:bg-interactive-active h-2 rounded-lg transition-all",a?"w-6":"w-2 opacity-[24%]")})})};rC.displayName="CarouselControlChip";let rT=(0,k.eU)(!1);function r_(){let e=(0,I.Xr)(rT);return{dismiss:(0,M.useCallback)(()=>{e(!0)},[e]),reset:(0,M.useCallback)(()=>{e(!1)},[e])}}let rk=(0,j.createServerReference)("704c681bf5e0cd5b2fa1d372aa8a5895b908e4efc5",j.callServer,void 0,j.findSourceMapURL,"generateUploadUrl"),rI=(0,j.createServerReference)("60327d59e2f2a297bbbbe70416a3b96e515c1bb820",j.callServer,void 0,j.findSourceMapURL,"getSignedUrl");async function rS(e){try{let t=await rk(e.name,e.type);if(!t.success||null==t.data)throw Error("Failed to generate upload URL");let{uploadUrl:a,key:n}=t.data;if(!(await fetch(a,{method:"PUT",body:e})).ok)throw Error("Failed to upload file");let s=await rI(n.startsWith("/")?n.slice(1):n);if(!s.success||null==s.data)throw Error("Failed to get signed url");let r=s.data.url;return{key:n,url:r,mimeType:e.type}}catch(e){throw console.error("File upload failed:",e),e}}let rR=(0,M.memo)(function(){let e,{dismiss:t}=r_(),{suggestedModality:a,messages:n,autoModalityMetadata:s,evaluationSessionId:r}=(0,U.g)((0,H.k)(e=>{var t;return{suggestedModality:null==(t=e.autoModalityMetadata)?void 0:t.suggestedModality,messages:e.messages,autoModalityMetadata:e.autoModalityMetadata,evaluationSessionId:e.id}})),{handleAutoModalityRerun:l}=function(){let e=(0,F.useRouter)(),t=(0,M.useContext)(U.P),a=(0,U.g)((0,H.k)(e=>e.reset)),[,n]=(0,I.fp)(eP),{appendMultiStream:s}=a1(),{reset:r}=r_();return{handleAutoModalityRerun:(0,M.useCallback)(async l=>{var i;if(!t)return;a({mode:t.getState().mode,modality:l.modality});let o=t.getState().id;e.replace("/c/".concat(o));let d=(null==(i=l.attachments)?void 0:i.length)?l.attachments.map(e=>{var t,a;let n="string"==typeof e?e:e.url,s="string"==typeof e?"image/png":null!=(t=e.contentType)?t:"image/png",r="string"==typeof e?"":null!=(a=e.name)?a:"";return{file:new File([new Blob([],{type:s})],r,{type:s}),preview:n,isAlreadyUploaded:!0,uploadedUrl:n}}):[];n(d);let c=d.length>0?await Promise.all(d.map(async e=>e.isAlreadyUploaded&&e.uploadedUrl?{key:e.file.name,url:e.uploadedUrl,mimeType:e.file.type}:await rS(e.file))):[];n([]),r();let u={autoModalitySuggestionAcceptance:{previousEvaluationSessionId:l.previousEvaluationSessionId,originalPredictedModality:l.originalAutoModalityMetadata.modality,acceptedSuggestedModality:l.modality,originalConfidence:l.originalAutoModalityMetadata.confidence,userAcceptedSuggestion:!0}};s({content:l.content,experimental_attachments:c.map(e=>({name:e.key,contentType:e.mimeType,url:e.url})),metadata:u})},[t,a,e,n,s,r])}}(),i=(0,M.useCallback)(()=>{if(!a||!s)return;let e=n.filter(e=>e.role===b.PG.USER).pop();e&&(T.z.capture({action:"auto_modality_suggestion_accepted",params:{suggested_modality:a,evaluation_session_id:r}}),l({content:a3(e),attachments:e.experimental_attachments,modality:a,previousEvaluationSessionId:r,originalAutoModalityMetadata:s}),t())},[n,a,l,t,r,s]),o=(0,M.useCallback)(()=>{a&&(T.z.capture({action:"auto_modality_suggestion_dismissed",params:{suggested_modality:a,evaluation_session_id:r}}),t())},[a,r,t]);if(!a||!s)return null;let d=e$(a),c=d.Icon;switch(a){case b.Jg.SEARCH:e="Did you mean to search the web?";break;case b.Jg.IMAGE:e="Did you mean to generate an image?";break;case b.Jg.WEBDEV:e="Did you mean to generate a site?";break;case b.Jg.CHAT:e="Did you mean to generate text?";break;case b.Jg.VIDEO:e="Did you mean to generate a video?";break;default:e="Did you mean ".concat(d.title," mode?")}return(0,y.jsx)("div",{className:"mt-4 flex w-full justify-center px-4",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2",children:[(0,y.jsx)("p",{className:"text-sm font-normal leading-none",children:e}),(0,y.jsxs)("div",{className:"flex items-center gap-1",children:[(0,y.jsxs)(E.$,{variant:"outline",size:"xs",onClick:i,className:(0,B.cn)("border-medium h-6 gap-1 rounded-full px-2 py-1","hover:bg-surface-secondary focus-visible:ring-1"),children:[(0,y.jsx)(c,{className:"text-interactive-normal size-2.5"}),(0,y.jsx)("span",{className:"text-interactive-normal text-xs font-medium",children:"Yes"})]}),(0,y.jsx)(E.$,{variant:"ghost",size:"icon",onClick:o,"aria-label":"Dismiss",className:"hover:bg-surface-tertiary h-6 w-6 p-0.5 focus-visible:ring-1",children:(0,y.jsx)(eS.A,{className:"text-tertiary size-3"})})]})]})})});var rM=a(54302);let rD="l-mvo",rz=(0,k.eU)(function(){try{let e=localStorage.getItem(rD);return"true"===e}catch(e){return!1}}());function rO(){let[e,t]=(0,I.fp)(rz);return{hasBeenShown:e,markAsShown:()=>{try{localStorage.setItem(rD,"true")}catch(e){console.error("Failed to save shown state:",e)}t(!0)}}}function rL(e){let{open:t,onOpenChange:a}=e,{hasBeenShown:n,markAsShown:s}=rO(),{resolvedTheme:r}=(0,nk.D)(),l=()=>{s(),null==a||a(!1)};return(0,y.jsx)(tw._s,{open:null!=t?t:!n,onOpenChange:e=>{e||l(),null==a||a(e)},"data-sentry-element":"Drawer","data-sentry-component":"MobileVoteOnboarding","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:(0,y.jsxs)(tw.zj,{"data-sentry-element":"DrawerContent","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:[(0,y.jsxs)(tw.BE,{className:"flex flex-col items-center gap-3","data-sentry-element":"DrawerHeader","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:[(0,y.jsx)("div",{className:"h-2"}),(0,y.jsx)(eo.A,{size:32,"data-sentry-element":"Swords","data-sentry-source-file":"mobile-vote-onboarding.tsx"}),(0,y.jsx)(tw.gk,{"data-sentry-element":"DrawerTitle","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:"How voting works"}),(0,y.jsx)(tw.I6,{"data-sentry-element":"DrawerDescription","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:'We\'ll show you 2 responses from 2 anonymous models. Please vote on the response you think is best. We will reveal the models afterwards. If you like both responses, use "It\'s a tie" button. If you do not like either, please use the "Both are bad" button.'}),(0,y.jsx)("div",{children:(0,y.jsxs)(N.Link,{href:"/how-it-works",className:"flex items-center gap-1",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:[(0,y.jsx)("span",{className:"text-sm font-normal",children:"Learn more about How it Works"}),(0,y.jsx)(S.A,{size:14,"data-sentry-element":"ArrowRight","data-sentry-source-file":"mobile-vote-onboarding.tsx"})]})}),(0,y.jsx)("img",{src:"dark"===r?"/images/mobile-vote-onboarding-dark.png":"/images/mobile-vote-onboarding-light.png",alt:"Mobile Voting Onboarding Experience",className:"mt-3 w-full"})]}),(0,y.jsx)(tw.tb,{"data-sentry-element":"DrawerFooter","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:(0,y.jsx)(tw.cp,{asChild:!0,"data-sentry-element":"DrawerClose","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:(0,y.jsx)(E.$,{size:"lg",variant:"primary",onClick:l,"data-sentry-element":"Button","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:"Got it"})})})]})})}var rP=a(41936),rB=a(14475),rU=a(15049),rF=a(87869);function rH(e){let{onFileSelect:t,isImageUploadEnabled:a}=e,[n,s]=(0,M.useState)(!1),r=sB();return a?(0,y.jsx)(eB.G,{content:"Upload Image","data-sentry-element":"BasicTooltip","data-sentry-component":"AttachmentsMenu","data-sentry-source-file":"attachments-menu.tsx",children:(0,y.jsx)(E.$,{type:"button",variant:"outline",size:"icon","aria-label":"Add files and more",onClick:t,disabled:r,className:"touch-hitbox","data-sentry-element":"Button","data-sentry-source-file":"attachments-menu.tsx",children:(0,y.jsx)(rU.A,{className:"size-4","data-sentry-element":"Plus","data-sentry-source-file":"attachments-menu.tsx"})})}):null}function rV(e){let{onModalitySelect:t,disabled:a=!1}=e,{currentModality:n,mode:s}=(0,U.g)((0,H.k)(e=>({currentModality:e.modality,mode:e.mode}))),r=eK(),l=(0,W._P)("auto-modality-enabled"),i=s===b.lY.BATTLE,o=n!==b.Jg.AUTO||i?n:b.Jg.CHAT,d=e=>{let a=null!=e?e:b.Jg.CHAT;n===b.Jg.AUTO&&a!==b.Jg.AUTO&&T.z.capture({action:"auto_modality_toggle_off",params:{new_modality:a}}),t(a)};if("treatment-1"===l){let e=i?[b.Jg.AUTO,...r]:r,t=o!==b.Jg.CHAT&&o!==b.Jg.AUTO&&r.includes(o);return(0,y.jsx)("div",{className:"flex items-center gap-2",children:e.map(e=>{let n=eq[e],s=o===e;return t&&!s?null:(0,y.jsx)(eU,{icon:n.Icon,label:e===b.Jg.AUTO?void 0:n.title,tooltipContent:n.descriptionText,selectedTooltipContent:e===b.Jg.AUTO?"Turn off Auto-Modality":void 0,selected:s,onClick:d,modality:e,disabled:a},e)})})}let c=i?[b.Jg.CHAT,...r,b.Jg.AUTO]:[b.Jg.CHAT,...r],u=o===b.Jg.AUTO,m=eq[o],p=u?eH.A:m.Icon,x=u?"Auto":m.title;return(0,y.jsxs)(tM.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"AutoModalityButton","data-sentry-source-file":"auto-modality-button.tsx",children:[(0,y.jsx)(tM.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"auto-modality-button.tsx",children:(0,y.jsxs)(E.$,{variant:"outline",size:"icon",disabled:a,className:"bg-surface-primary hover:bg-surface-secondary group h-8 w-auto gap-1 px-2","data-sentry-element":"Button","data-sentry-source-file":"auto-modality-button.tsx",children:[(0,y.jsx)(p,{className:"size-4","data-sentry-element":"CurrentIcon","data-sentry-source-file":"auto-modality-button.tsx"}),(0,y.jsx)("span",{className:"text-xs font-medium",children:x}),(0,y.jsx)(eI.A,{className:"size-3 transition-transform duration-200 group-data-[state=open]:-rotate-180","data-sentry-element":"ChevronDown","data-sentry-source-file":"auto-modality-button.tsx"})]})}),(0,y.jsx)(tM.SQ,{align:"start",side:"top",sideOffset:8,className:"bg-surface-primary border-faint z-[10] min-w-[180px] p-0 data-[state=closed]:pointer-events-none data-[state=closed]:invisible",onCloseAutoFocus:e=>e.preventDefault(),"data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"auto-modality-button.tsx",children:c.map((e,t)=>{let a=eq[e],n=a.Icon,s=o===e,r=t===c.length-1;return(0,y.jsxs)(tM._2,{onClick:()=>d(e),className:(0,B.cn)("rounded-none px-2 py-2.5",!r&&"border-medium/40 border-b",s&&"bg-green-50 dark:bg-green-500/10"),children:[(0,y.jsx)(n,{className:"size-4"}),(0,y.jsx)("span",{className:"text-sm font-medium",children:a.title}),s&&(0,y.jsx)(eR.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]},e)})})]})}a(7439),a(73042),a(92365);var rG=a(81180);let rW=(0,M.forwardRef)((e,t)=>{let{className:a,minRows:n=1,...s}=e;return(0,y.jsx)(rG.A,{ref:t,rows:n,minRows:n,className:(0,B.cn)("bg-surface-primary box-border w-full flex-none resize-none p-2 focus:outline-none active:outline-none",a),...s})});rW.displayName="AutoResizeTextarea";var rJ=a(87135);let rY=(0,a(61252).F)("bg-surface-primary flex items-center gap-3",{variants:{layout:{default:"justify-between",centered:"justify-center"},padding:{compact:"p-2",comfortable:"py-2 px-4"},responsive:{mobile:"w-full border-t border-x border-border-faint rounded-t-xl",desktop:"w-auto mx-0 border border-border-faint rounded-xl shadow-sm"}},defaultVariants:{layout:"default",padding:"comfortable"}});function rQ(e){let{children:t,className:a,layout:n="default",padding:s="comfortable"}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"flex w-full flex-col items-center gap-2 md:hidden",children:(0,y.jsx)("div",{className:(0,B.cn)(rY({layout:n,padding:s,responsive:"mobile"}),a),children:t})}),(0,y.jsx)("div",{className:"hidden md:absolute md:top-0 md:z-10 md:flex md:-translate-y-full md:justify-center md:pb-2",children:(0,y.jsx)("div",{className:(0,B.cn)(rY({layout:n,padding:s,responsive:"desktop"}),a),children:t})})]})}var rq=a(808);function r$(){let{appendMultiStream:e}=a1(),t=(0,U.g)(e=>e.deleteMessage),a=(0,U.g)(e=>e.messages),n=(0,F.useRouter)(),s=(0,_.kH)(_.Q_),{setLocation:r}=(0,eL.G)(),l=(0,U.g)(e=>{if(1!==e.lastMessageIds.length)return null;let t=e.messages.find(t=>t.id===e.lastMessageIds[0]);return t&&t.role===b.PG.USER?t:null}),i=function(){var e,t,a;let{models:n,modelAId:s,modelBId:r}=(0,ef.g)(e=>e),l=null==(e=n.find(e=>e.id===s))?void 0:e.rateLimitedUntil,i=null==(t=n.find(e=>e.id===r))?void 0:t.rateLimitedUntil,o=null!=l?l:i,d=l?s:r,c=n.find(e=>e.id===d),[u,m]=(0,M.useState)(()=>new Date);if((0,M.useEffect)(()=>{if(!o)return;let e=setInterval(()=>{m(new Date)},1e3);return()=>clearInterval(e)},[o]),!o)return{isRateLimited:!1,message:null};let p=(0,rJ.FO)(o,u);return p?{isRateLimited:!0,message:"You have reached your rate limit for ".concat(null!=(a=null==c?void 0:c.publicName)?a:"this model",". Please try again in ").concat(p,".")}:{isRateLimited:!1,message:null}}(),o=function(){let e=(0,U.g)(e=>e.modality),t=(0,_.kH)(e=>e.imageModalityRateLimitedUntil),[a,n]=(0,M.useState)(()=>new Date);return((0,M.useEffect)(()=>{if(!t)return;let e=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(e)},[t]),t&&e===b.Jg.IMAGE&&(0,rJ.FO)(t,a))?{isRateLimited:!0}:{isRateLimited:!1}}(),d=(null==l?void 0:l.status)===b.nH.FLAGGED,c=1===a.length,u=!d&&!c&&!i.isRateLimited;return o.isRateLimited&&s?(0,y.jsxs)(rQ,{className:"space-between flex items-center gap-2",children:[(0,y.jsx)("p",{className:"text-interactive text-center text-xs font-medium sm:text-left sm:text-sm",children:"Please login or create an account to generate more images"}),(0,y.jsx)(E.$,{variant:"tertiary",size:"md",className:"flex-1 gap-1 sm:flex-initial",onClick:()=>r("image-modality-rate-limit-cta"),children:"Login"})]}):(0,y.jsx)(rQ,{"data-sentry-element":"FloatingBar","data-sentry-component":"ErrorBar","data-sentry-source-file":"error-bar.tsx",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:[(0,y.jsx)("p",{className:"text-interactive-negative text-center text-xs font-medium sm:text-left sm:text-sm",children:i.isRateLimited&&i.message?(0,y.jsx)("span",{children:i.message}):d?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("span",{className:"sm:hidden",children:["Violates"," ",(0,y.jsx)(N.Link,{href:"/terms-of-use",target:"_blank",children:"Terms of Use"})]}),(0,y.jsxs)("span",{className:"hidden sm:inline",children:["This content violates our"," ",(0,y.jsx)(N.Link,{href:"/terms-of-use",target:"_blank",children:"Terms of Use"})]})]}):o.isRateLimited&&!s?(0,y.jsx)("span",{children:"Image generation is rate limited. Please try again later."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"sm:hidden",children:"Something went wrong. Please try again."}),(0,y.jsx)("span",{className:"hidden sm:inline",children:"Something went wrong while generating the response. Please try again."})]})}),(0,y.jsxs)("div",{className:"flex w-full gap-2 sm:w-auto",children:[u&&(0,y.jsxs)(E.$,{variant:"outline",size:"md",className:"flex-1 gap-1 sm:flex-initial",onClick:()=>{l&&e({content:l.content,experimental_attachments:l.experimental_attachments})},children:[(0,y.jsx)(sM.A,{size:12}),"Retry"]}),l&&(0,y.jsxs)(E.$,{variant:"outline",size:"md",className:"flex-1 gap-1 sm:flex-initial",onClick:()=>{l&&(c?n.replace("/"):t(l.id))},children:[(0,y.jsx)(rq.A,{size:16}),"Clear"]})]})]})})}let rK={[b.lY.SIDE_BY_SIDE]:{requiresModelA:!0,requiresModelB:!0},[b.lY.DIRECT]:{requiresModelA:!0,requiresModelB:!1},[b.lY.BATTLE]:{requiresModelA:!1,requiresModelB:!1}};function rX(e){let{formState:t,latestMessages:a,messageValue:n}=e,[s,r]=(0,U.g)((0,H.k)(e=>[e.mode,e.isVoteSubmitting])),{modelAId:l,modelBId:i,models:o}=(0,ef.g)(e=>e),[d]=(0,I.fp)(eP);return(0,M.useMemo)(()=>{let e=rK[s],c=(!e.requiresModelA||null!=l)&&(!e.requiresModelB||null!=i),u=a.some(e=>e.status===b.nH.PENDING),m=function(e,t,a,n){switch(e){case b.lY.BATTLE:return!1;case b.lY.SIDE_BY_SIDE:return eb(t,n)||eb(a,n);case b.lY.DIRECT:default:return eb(t,n)}}(s,l,i,o),p=d.length>0,x=m&&!p,f=n.length>0;return{canSubmit:t.isValid&&!t.isSubmitting&&c&&!u&&!r&&!x,isTextAreaDisabled:!1,missingRequiredImages:x,shouldShowImageUploadBanner:x&&f}},[t.isValid,t.isSubmitting,a,s,r,l,i,o,d,n])}function rZ(){let{messageThreads:e}=ns(),t=e[0],a=null==t?void 0:t.get("a"),n=null==t?void 0:t.get("b"),{isVoteSubmitting:s,viewedVideos:r}=(0,U.g)((0,H.k)(e=>({isVoteSubmitting:e.isVoteSubmitting,viewedVideos:e.viewedVideos})));return(0,M.useMemo)(()=>{var e,t;if(s)return!1;let l=null==a||null==(e=a.experimental_attachments)?void 0:e.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("video")}),i=null==n||null==(t=n.experimental_attachments)?void 0:t.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("video")}),o=!l||!!(null==a?void 0:a.id)&&r.includes(a.id),d=!i||!!(null==n?void 0:n.id)&&r.includes(n.id);return o&&d},[s,r,a,n])}let r0={VIEW_VIDEO_TO_VOTE:"Please view both videos to vote"};function r1(){let[e,t,a]=(0,ef.g)((0,H.k)(e=>[e.models,e.modelAId,e.modelBId]));return(0,U.g)(s=>{let{messages:r,lastMessageIds:l,mode:i}=s,o=l.map(e=>r.find(t=>t.id===e)).filter(e=>null!=e);return!!o&&(o.some(e=>e.role===b.PG.ASSISTANT)?(()=>{switch(i){case n.DIRECT:return[t].filter(e=>null!=e);case n.SIDE_BY_SIDE:return[t,a].filter(e=>null!=e);default:return[]}})().some(t=>{var a;return(null==(a=e.find(e=>e.id===t))?void 0:a.rateLimitedUntil)!=null}):!!o.some(e=>e.role===b.PG.USER)&&o.some(e=>[b.nH.FAILED,b.nH.FLAGGED].includes(e.status)))})}!function(e){e.DIRECT="direct",e.SIDE_BY_SIDE="side-by-side",e.BATTLE="battle"}(n||(n={})),function(e){e.UPVOTE="upvote",e.DOWNVOTE="downvote"}(s||(s={})),function(e){e.MODEL_A="model_a",e.MODEL_B="model_b",e.TIE="tie",e.BOTH_BAD="both_bad"}(r||(r={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(l||(l={})),function(e){e.EMAIL="email",e.GOOGLE="google"}(i||(i={})),function(e){e.SYSTEM="system",e.USER="user",e.ASSISTANT="assistant",e.DATA="data"}(o||(o={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.FAILED="failed",e.FLAGGED="flagged"}(d||(d={})),function(e){e.SYSTEM="system",e.USER="user",e.ASSISTANT="assistant",e.TOOL="tool"}(c||(c={})),function(e){e.AUTO="auto",e.CHAT="chat",e.WEBDEV="webdev",e.SEARCH="search",e.IMAGE="image",e.P2L="p2l",e.VIDEO="video"}(u||(u={})),function(e){e.USER_ID="user_id",e.USER_IP="user_ip",e.USER_ID_AND_IP="user_id_and_ip"}(m||(m={})),function(e){e.HEALTHY="healthy",e.UNHEALTHY="unhealthy"}(p||(p={})),function(e){e.ACTIVE="active",e.DEPRECATED="deprecated"}(x||(x={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(f||(f={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(h||(h={})),t$.z.enum(["text","vision","text-to-image","image-edit","multi-image-edit","webdev","search","text-to-video","image-to-video"]),function(e){e.CREATE="create",e.UPDATE="update"}(g||(g={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.PAUSED="paused",e.COMPLETED="completed",e.ARCHIVED="archived",e.CANCELLED="cancelled",e.REJECTED="rejected",e.PASSED_DEADLINE="passed_deadline"}(v||(v={}));let r2=(0,k.eU)(!1);function r4(){let[e,t]=(0,I.fp)(r2);return{seen:e,dismiss:()=>{t(!0)},reset:()=>{t(!1)}}}function r3(){let{loading:e,mode:t,lastMessageIds:a,messages:n,hasViewedLatestResponses:s,modality:r}=(0,U.g)(e=>e);return(0,M.useMemo)(()=>{if(e||t===b.lY.DIRECT||0===a.length||r===b.Jg.WEBDEV)return!1;let l=a.map(e=>n.find(t=>t.id===e)).filter(e=>null!=e),i=l.filter(e=>e.role===b.PG.ASSISTANT);return!!(i.length>=2&&i.some(e=>"a"===e.participantPosition)&&i.some(e=>"b"===e.participantPosition))&&l.every(e=>(null==e?void 0:e.status)!=b.nH.PENDING&&(null==e?void 0:e.pairwiseFeedbackId)==null)&&s},[e,t,a,n,s,r])}function r5(){let{seen:e}=r4(),t=r3(),{latestMessages:a}=ns(),n=r1(),s=(0,W._P)("edit-image-button-enabled"),r=(0,U.g)(e=>e.modality),l=(0,U.g)(e=>e.loading),i=(0,U.g)(e=>e.messages),o=(0,U.g)(e=>e.mode);if(e||r!==b.Jg.IMAGE||"treatment-1"!==s||l||0===i.length||t||n)return!1;let d=a.some(e=>null!=e.pairwiseFeedbackId),c=o===b.lY.DIRECT;return d||c}function r6(){let{dismiss:e}=r4();return(0,y.jsx)(rQ,{"data-sentry-element":"FloatingBar","data-sentry-component":"ImageModalityDisclaimer","data-sentry-source-file":"image-modality-disclaimer.tsx",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:[(0,y.jsxs)("p",{className:"text-text-primary text-center text-xs font-medium sm:text-left sm:text-sm",children:[(0,y.jsx)("span",{className:"sm:hidden",children:"Chat history won't carry over to new conversations"}),(0,y.jsx)("span",{className:"hidden sm:inline",children:"Previous chat history will not be carried over to new conversations"})]}),(0,y.jsx)(E.$,{variant:"primary",size:"md",className:"w-full flex-shrink-0 sm:w-auto",onClick:e,"data-sentry-element":"Button","data-sentry-source-file":"image-modality-disclaimer.tsx",children:"Got it"})]})})}function r8(){return(0,y.jsx)(rQ,{layout:"centered",padding:"comfortable","data-sentry-element":"FloatingBar","data-sentry-component":"ImageUploadRequiredBar","data-sentry-source-file":"image-upload-required-bar.tsx",children:(0,y.jsx)("div",{className:"text-red-600",children:(0,y.jsx)("span",{className:"text-sm font-medium",children:"Model requires image upload"})})})}function r9(){let{dismiss:e}=sP();return(0,y.jsx)(rQ,{"data-sentry-element":"FloatingBar","data-sentry-component":"MaxImagesNotification","data-sentry-source-file":"max-images-notification.tsx",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:[(0,y.jsx)("p",{className:"text-interactive-negative text-center text-sm font-normal leading-none sm:text-left",children:"Uh oh. You have reached the max amount of images you can upload."}),(0,y.jsx)(E.$,{variant:"tertiary",size:"md",className:"w-full flex-shrink-0 sm:w-auto",onClick:e,"data-sentry-element":"Button","data-sentry-source-file":"max-images-notification.tsx",children:"Got it"})]})})}function r7(e){let{message:t}=e;return(0,y.jsx)(rQ,{layout:"centered",padding:"comfortable","data-sentry-element":"FloatingBar","data-sentry-component":"RequiredBeforeVoteBar","data-sentry-source-file":"required-before-vote-bar.tsx",children:(0,y.jsx)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:(0,y.jsx)("p",{className:"text-text-primary text-center text-xs font-medium sm:text-left sm:text-sm",children:t})})})}var le=a(82324),lt=a(65434);function la(){let e=(0,rt.bj)(e=>e),{isVoteSubmitting:t,messageAId:a,messageBId:n,didInspectBothResponsesMap:s,modality:r,setLeftVoteHoverState:l,setRightVoteHoverState:i}=(0,U.g)((0,H.k)(e=>({isVoteSubmitting:e.isVoteSubmitting,messageAId:e.lastMessageIds[0],messageBId:e.lastMessageIds[1],didInspectBothResponsesMap:e.didInspectBothResponsesByPairwiseFeedbackKey,modality:e.modality,setLeftVoteHoverState:e.setLeftVoteHoverState,setRightVoteHoverState:e.setRightVoteHoverState}))),o=r===b.Jg.WEBDEV,d=r===b.Jg.VIDEO,c=rZ(),{handlePairwiseFeedbackSubmit:u}=rn(),m=t||d&&!c,p=(0,M.useCallback)(t=>{u(t,e,a,n,s[(0,ru.J)(a,n)]),l(null),i(null)},[u,a,n,l,i,e,s]),x=(0,M.useCallback)((e,t)=>{l(e),i(t)},[l,i]),f="hover:text-interactive-positive focus:text-interactive-positive hover:border-interactive-positive focus:border-interactive-positive hover:bg-interactive-positive/10 focus:bg-interactive-positive/10",h=(0,B.cn)("flex-1",!o&&"md:flex-none md:w-[180px]"),g=(0,B.cn)("flex-none",!o&&"md:w-[140px]"),v=[{value:b.sb.MODEL_A,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0",f,h),mobileText:"A is better",desktopText:o?"A is better":"Left is Better",icon:(0,y.jsx)(rp.A,{size:12,className:"hidden md:block"}),iconPosition:"left",onHover:()=>x("win",null)},{value:b.sb.TIE,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0",f,g),desktopText:o?null:"It's a tie",icon:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(le.A,{size:15,className:"md:hidden"}),(0,y.jsx)(sG.A,{size:12,className:"hidden md:block"})]}),onHover:()=>x("tie","tie")},{value:b.sb.BOTH_BAD,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0","hover:text-interactive-negative focus:text-interactive-negative hover:border-interactive-negative focus:border-interactive-negative hover:bg-interactive-negative/10 focus:bg-interactive-negative/10",g),desktopText:o?"":"Both are bad",icon:(0,y.jsx)(lt.A,{size:15,className:"md:size-3"}),onHover:()=>x("bothbad","bothbad")},{value:b.sb.MODEL_B,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0",f,h),mobileText:"B is better",desktopText:o?"B is better":"Right is Better",icon:(0,y.jsx)(S.A,{size:12,className:"hidden md:block"}),iconPosition:"right",onHover:()=>x(null,"win")}];return(0,y.jsx)(rQ,{padding:"compact",className:"items-stretch","data-sentry-element":"FloatingBar","data-sentry-component":"VoteBar","data-sentry-source-file":"vote-bar.tsx",children:v.map(e=>(0,y.jsxs)(E.$,{variant:"outline",className:e.className,onClick:()=>p(e.value),onMouseEnter:e.onHover,onMouseLeave:()=>x(null,null),onFocus:e.onHover,onBlur:()=>x(null,null),disabled:m,children:["left"===e.iconPosition&&e.icon,e.mobileText&&(0,y.jsx)("span",{className:"md:hidden",children:e.mobileText}),e.desktopText&&(0,y.jsx)("span",{className:"hidden md:block",children:e.desktopText}),"right"===e.iconPosition&&e.icon,!e.iconPosition&&e.icon]},e.value))})}function ln(e){let{formState:t,latestMessages:a,messageValue:n}=e,s=r1(),r=r3(),{shouldShowImageUploadBanner:l}=rX({formState:t,latestMessages:a,messageValue:n}),i=r5(),{shown:o}=sP(),{message:d}=function(){var e;let t=(0,F.useSearchParams)(),a=(0,U.g)(e=>e.modality),n=null!=(e=t.get("chat-modality"))?e:a,s=rZ();return(0,M.useMemo)(()=>{let e;return n!==b.Jg.VIDEO||s||(e=r0.VIEW_VIDEO_TO_VOTE),{message:e}},[n,s])}();return(0,M.useMemo)(()=>s?(0,y.jsx)(r$,{}):l?(0,y.jsx)(r8,{}):r?d?(0,y.jsx)(r7,{message:d}):(0,y.jsx)(la,{}):i?(0,y.jsx)(r6,{}):o?(0,y.jsx)(r9,{}):null,[s,l,r,i,o,d])}function ls(){return(0,y.jsx)("div",{className:"bg-surface-primary text-text-secondary border-border-faint animate-in fade-in rounded-xl border p-3 opacity-100 shadow-sm transition-all duration-300","data-sentry-component":"LegalCopy","data-sentry-source-file":"legal-copy.tsx",children:(0,y.jsxs)("div",{className:"text-xs leading-relaxed",children:[(0,y.jsx)("p",{children:"Your conversations and certain other personal information will be disclosed to the relevant AI providers and may otherwise be disclosed publicly to help support our community and advance AI research."}),(0,y.jsx)("p",{className:"mt-3",children:"Do not submit to our Services any personal information or other sensitive information that you would not want to be shared publicly. By continuing to use our Services, you acknowledge and direct us to engage in such sharing."})]})})}var lr=a(10358);let ll={initial:{rotate:0,translateY:0,stroke:"currentColor"},hover:{rotate:5,translateY:1,stroke:"var(--interactive-active)",transition:{duration:.3,type:"spring",stiffness:200,damping:20}}},li={initial:{translateY:0,scale:1,fill:"transparent",stroke:"currentColor"},hover:{translateY:-2,scale:1.1,fill:"hsl(var(--interactive-negative))",stroke:"transparent",transition:{duration:.2,type:"spring",stiffness:200,damping:25}}},lo=(0,M.forwardRef)((e,t)=>{let{size:a,className:n,disabled:s,onClick:r}=e;return(0,y.jsx)(tr.P.button,{ref:t,type:"button",disabled:s,onClick:r,className:(0,B.cn)("text-interactive-normal hover:text-interactive-active focus-visible:text-interactive-active flex cursor-pointer select-none items-center justify-center transition-colors duration-200",n),whileHover:"hover",whileFocus:"hover",initial:"initial",children:(0,y.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"2 2 19 19",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",style:{overflow:"visible"},strokeLinejoin:"round",children:[(0,y.jsxs)(tr.P.g,{variants:ll,children:[(0,y.jsx)("path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16"}),(0,y.jsx)("path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"}),(0,y.jsx)("path",{d:"m2 15 6 6"})]}),(0,y.jsx)(tr.P.path,{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",variants:li})]})})});lo.displayName="HandHeartButton";let ld="Your prompts may be shared publicly to support AI research",lc="Your conversations may be shared to support our community, improve our service, and advance the development of reliable AI. This includes posting conversations publicly online. Any data that we share is always anonymous and never linked to you.",lu="View FAQ";function lm(){return(0,e5.d)("md")?(0,y.jsx)(lp,{}):(0,y.jsx)(lx,{"data-sentry-element":"PublicNoticeDesktop","data-sentry-component":"PublicNoticeButton","data-sentry-source-file":"public-notice-button.tsx"})}function lp(){return(0,y.jsxs)(tw._s,{"data-sentry-element":"Drawer","data-sentry-component":"PublicNoticeMobile","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsx)(tw.zj,{"data-sentry-element":"DrawerContent","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col gap-4 px-2 pb-12 pt-10",children:[(0,y.jsxs)("div",{className:"flex flex-col gap-4 px-3",children:[(0,y.jsx)(tw.gk,{className:"font-heading text-base font-medium","data-sentry-element":"DrawerTitle","data-sentry-source-file":"public-notice-button.tsx",children:ld}),(0,y.jsx)(tw.I6,{className:"text-sm font-normal","data-sentry-element":"DrawerDescription","data-sentry-source-file":"public-notice-button.tsx",children:lc})]}),(0,y.jsx)(tw.tb,{className:"p-0","data-sentry-element":"DrawerFooter","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(E.$,{size:"md",variant:"outline",asChild:!0,"data-sentry-element":"Button","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(N.Link,{href:"/faq",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"public-notice-button.tsx",children:lu})})})]})}),(0,y.jsx)(tw.Uz,{asChild:!0,className:"touch-hitbox","data-sentry-element":"DrawerTrigger","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(lo,{size:16,className:"rounded-md p-2","data-sentry-element":"HandHeartButton","data-sentry-source-file":"public-notice-button.tsx"})})]})}function lx(){let[e,t]=(0,M.useState)(!1);return(0,y.jsxs)(ek.AM,{open:e,onOpenChange:t,"data-sentry-element":"Popover","data-sentry-component":"PublicNoticeDesktop","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsxs)(lr.m_,{open:!e&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsx)(lr.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)("div",{children:(0,y.jsx)(ek.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(lo,{size:16,className:"rounded-md p-2","data-sentry-element":"HandHeartButton","data-sentry-source-file":"public-notice-button.tsx"})})})}),(0,y.jsx)(lr.ZI,{className:"max-w-60","data-sentry-element":"TooltipContent","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsxs)("p",{className:"text-interactive-on-cta text-center text-xs",children:[ld," ",(0,y.jsx)("span",{onClick:()=>t(!0),className:"text-interactive-cta-focus dark:text-interactive-cta-hover cursor-pointer",children:"Learn more"})]})})]}),(0,y.jsxs)(ek.hl,{className:"bg-surface-primary border-medium flex w-64 flex-col gap-2 rounded-xl border p-4",align:"end",side:"top","data-sentry-element":"PopoverContent","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsx)("h2",{className:"text-header-primary font-heading text-sm font-medium",children:ld}),(0,y.jsx)("p",{className:"text-text-secondary text-xs font-normal",children:lc}),(0,y.jsx)(E.$,{size:"sm",variant:"outline",asChild:!0,className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(N.Link,{href:"/faq",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"public-notice-button.tsx",children:lu})})]})]})}let lf=t$.z.object({message:t$.z.string().trim().min(1,"Please enter a message").max(b.Kd,"Message is too long")});function lh(e){let{sendMessage:t,latestMessages:a,isSubmitting:n,textAreaRef:s,fileInputRef:r,fileUploaderProps:l,isImageUploadEnabled:i,handlePaste:o}=e,d=(0,e5.d)("md"),c=(0,F.usePathname)(),u=(0,M.useRef)(null),m=(0,M.useRef)(null),p=null!=s?s:m,x=(0,M.useRef)(null),f=(0,U.g)(e=>e.modality),[h]=(0,I.fp)(eP),g=(0,rB.mN)({resolver:(0,rM.u)(lf),defaultValues:{message:""},mode:"onChange"}),{register:v,handleSubmit:j,reset:w,watch:N,formState:A}=g,C=N("message",""),T=function(e){let{messageValue:t,formState:a,latestMessages:n}=e,s=(0,e5.d)("md"),r=(0,U.g)(e=>e.messages),l=(0,_.kH)(e=>e.user),{hasBeenShown:i}=rO(),o=r3(),d=r1(),{shouldShowImageUploadBanner:c}=rX({formState:a,latestMessages:n,messageValue:t}),u=r5(),{shown:m}=sP();return(0,M.useMemo)(()=>{let e=0===r.length,a=e&&(null==l?void 0:l.touConsentTimestamp)==null&&t.length>=1,n=d||o||c||u||m,p=o&&s&&!i;return{showWelcomeScreen:e,showLegalCopy:a,shouldShowErrorBar:d,shouldShowVoteBar:o,shouldShowImageDisclaimer:u,shouldShowMaxImagesNotification:m,shouldShowMobileVoteFtue:p,hasBarAboveForm:n}},[r.length,null==l?void 0:l.touConsentTimestamp,t.length,d,o,c,u,m,s,i])}({messageValue:C,formState:A,latestMessages:a}),k=rX({formState:A,latestMessages:a,messageValue:C}),S=function(e){let{isTextAreaDisabled:t,modality:a,showWelcomeScreen:n,attachments:s=[]}=e;return(0,M.useMemo)(()=>t?"Please vote to continue":a===b.Jg.IMAGE?s.length>0?"Describe how you want to edit this image":"Describe the image you want to generate":a===b.Jg.WEBDEV?n?"Describe the website or app you want to build":"Ask a follow up...":"Ask ".concat(n?"anything":"followup",""),[t,a,n,s])}({isTextAreaDisabled:k.isTextAreaDisabled,modality:f,showWelcomeScreen:T.showWelcomeScreen,attachments:h}),R="treatment-2"===(0,W._P)("3m-model-selector"),D=(0,W._P)("auto-modality-enabled"),z=e3(p),O=function(e){let{modality:t,setModality:a,messagesLength:n}=(0,U.g)((0,H.k)(e=>({modality:e.modality,setModality:e.setModality,messagesLength:e.messages.length}))),{setModelAId:s,setModelBId:r}=(0,ef.g)((0,H.k)(e=>({setModelAId:e.setModelAId,setModelBId:e.setModelBId}))),[,l]=(0,eF.Uh)(),{showModal:i}=e2();return(0,M.useCallback)(o=>{var d,c;if(o===t&&t!==b.Jg.AUTO)return n>0?void i("/?chat-modality=auto"):(a(b.Jg.AUTO),l(b.Jg.AUTO),s(null),r(null),void(null==e||null==(d=e.current)||d.focus()));if(n>0){let e=(0,eF.YS)(o);i("/?chat-modality=".concat(e))}else a(o),l(o),null==e||null==(c=e.current)||c.focus()},[t,n,i,a,l,s,r,e])}(p),L=j(async e=>{try{await t(e.message),w()}catch(e){console.error("Form submission error:",e)}});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-primary relative flex flex-col rounded-[0.9rem] md:items-center md:gap-2",{"gap-0 md:gap-2":T.shouldShowVoteBar}),onClick:e=>{var t;let a=e.target;a&&(a.closest("button,input,textarea,select,a,[role=button],[role=menu],[role=listbox],[contenteditable=true],[data-prevent-form-autofocus]")||null==(t=p.current)||t.focus())},children:[(0,y.jsx)(ln,{formState:A,latestMessages:a,messageValue:C,"data-sentry-element":"BannerSelector","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsxs)("div",{className:(0,B.cn)("border-border-faint bg-surface-primary relative mx-auto min-h-0 w-full flex-none rounded-[14px] border md:mx-4",{"rounded-none rounded-b-[14px]":d&&T.hasBarAboveForm}),children:[(0,y.jsxs)("form",{ref:u,onSubmit:e=>void L(e),className:(0,B.cn)("flex w-full flex-col items-start justify-center p-2",{"rounded-[calc(1rem-1px)]":d&&!T.hasBarAboveForm,"rounded-none rounded-b-[calc(1rem-1px)]":d&&T.hasBarAboveForm}),children:[i&&l.renderAttachments(),(0,y.jsxs)("div",{className:"flex w-full flex-col justify-between gap-5 md:gap-2",children:[(0,y.jsx)("input",{...l.getInputProps(),ref:e=>{x.current=e,r&&(r.current=e)},className:"hidden",onClick:e=>{e.stopPropagation(),e.target.value=""}}),(0,y.jsx)(rW,{...v("message",{onChange:()=>{g.trigger("message")}}),autoFocus:!d,disabled:k.isTextAreaDisabled,minRows:1,maxRows:10,ref:e=>{v("message").ref(e),e&&null!==e.offsetParent&&p&&"current"in p&&(p.current=e)},autoComplete:"off",placeholder:S,onPaste:o,className:(0,B.cn)("max-h-[40vh] p-1 md:p-3",{"text-text-muted placeholder:text-text-muted":k.isTextAreaDisabled}),onKeyDown:e=>{if("Enter"===e.code&&!(sA.Fr||e.shiftKey||e.nativeEvent.isComposing)&&(e.preventDefault(),k.canSubmit)){var t;null==(t=u.current)||t.requestSubmit()}},"data-sentry-element":"AutoResizeTextarea","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,y.jsxs)("div",{className:"mr-1 flex h-8 flex-none gap-2",children:[(0,y.jsx)(rH,{onFileSelect:()=>{var e;return null==(e=x.current)?void 0:e.click()},isImageUploadEnabled:i,"data-sentry-element":"AttachmentsMenu","data-sentry-source-file":"evaluation-form.tsx"}),R&&(0,y.jsx)(tR,{variant:"compact"}),"control"===D?(0,y.jsx)(eZ,{handleModalityChange:z}):(0,y.jsx)(rV,{onModalitySelect:O,disabled:n})]}),(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(lm,{"data-sentry-element":"PublicNoticeButton","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsx)(E.$,{size:"icon",type:"submit",className:"bg-header-primary hover:bg-header-primary/90 text-interactive-on-cta touch-hitbox",disabled:!k.canSubmit||n,"data-sentry-element":"Button","data-sentry-source-file":"evaluation-form.tsx",children:(0,y.jsx)(rP.A,{className:"size-4","data-sentry-element":"ArrowUp","data-sentry-source-file":"evaluation-form.tsx"})})]})]})]}),l.isDragActive&&(0,y.jsx)("div",{className:(0,B.cn)("bg-surface-primary/90 absolute inset-[-1px] flex items-center justify-center backdrop-blur-sm transition-all duration-200",{"rounded-[calc(1rem-1px)]":d&&!T.hasBarAboveForm,"rounded-none rounded-b-[calc(1rem-1px)]":d&&T.hasBarAboveForm,"rounded-[0.6875rem]":!d}),style:{border:"2px dashed hsl(var(--interactive-active) / 0.12)"},children:(0,y.jsxs)("div",{className:"flex flex-col items-center gap-2 rounded-lg px-4 py-3",children:[(0,y.jsx)("p",{className:"text-text-primary text-sm font-medium",children:"Drop files here"}),(0,y.jsx)("p",{className:"text-text-secondary text-center text-xs",children:"Images: PNG, JPG, JPEG, WEBP (max 3MB)"})]})}),(0,y.jsx)("div",{className:(0,B.cn)("absolute -bottom-5 flex w-full justify-center",{hidden:T.showWelcomeScreen}),children:(0,y.jsx)("p",{className:"text-text-muted whitespace-nowrap text-[10px]",children:"Inputs are processed by third-party AI and responses may be inaccurate."})})]}),(0,y.jsx)("div",{className:(0,B.cn)("absolute z-10 w-full","/c/new"===c||d?"-top-2 -translate-y-full":"-bottom-2 translate-y-full",!T.showLegalCopy&&"hidden"),inert:!T.showLegalCopy,children:(0,y.jsx)(ls,{"data-sentry-element":"LegalCopy","data-sentry-source-file":"evaluation-form.tsx"})})]})]}),(0,y.jsx)(rL,{open:T.shouldShowMobileVoteFtue,"data-sentry-element":"MobileVoteOnboarding","data-sentry-source-file":"evaluation-form.tsx"})]})}function lg(e){let{checkpointInView:t,lastMessagesArr:a}=e,n=(0,U.g)((0,H.k)(e=>({lastMessageIds:e.lastMessageIds,hasViewedLatestResponses:e.hasViewedLatestResponses,setHasViewedLatestResponses:e.setHasViewedLatestResponses})));(0,M.useEffect)(()=>{var e;0!==n.lastMessageIds.length&&0!==a.length&&!n.hasViewedLatestResponses&&t&&(null==(e=a[0])?void 0:e.role)!==b.PG.USER&&a.every(e=>[b.nH.SUCCESS,b.nH.FAILED].includes(e.status))&&n.setHasViewedLatestResponses(!0)},[n,t,a])}var lv=a(41823);function ly(e,t,a){let{pairwiseFeedbacks:n,mode:s,modality:r}=(0,U.g)((0,H.k)(e=>({pairwiseFeedbacks:e.pairwiseFeedbacks,mode:e.mode,modality:e.modality})));return(0,M.useMemo)(()=>{var l;return r===b.Jg.IMAGE||r===b.Jg.VIDEO?null:s===b.lY.DIRECT?"a":(null==a||null==(l=a.get("a"))?void 0:l.pairwiseFeedbackId)!=null?null:null!=e&&"win"===sJ(e,n)?"a":null!=t&&"win"===sJ(t,n)?"b":null},[r,s,a,e,t,n])}function lb(e,t,a,n){if(n===b.Jg.WEBDEV)return{shouldShowA:null!=t,shouldShowB:null!=a,shouldRenderBoth:null!=t&&null!=a};let s=null!=t&&(null==a||"b"!==e),r=null!=a&&(null==t||"a"!==e);return{shouldShowA:s,shouldShowB:r,shouldRenderBoth:s&&r}}function lj(e){let{messageA:t,messageB:a,firstMessageMap:n}=e,s=(0,U.g)(e=>e.mode),[r,l]=(0,M.useState)(!1),i=ly(t,a,n),o=function(e,t,a,n){if(null!=e&&n!==b.lY.DIRECT)return"a"===e?a:t}(i,t,a,s);return(0,y.jsxs)(y.Fragment,{children:[o&&(0,y.jsx)("div",{className:"flex w-full flex-col",children:(0,y.jsxs)("div",{children:[(0,y.jsxs)(E.$,{variant:"textLink",className:"gap-1 pl-0",onClick:()=>l(!0),children:[(0,y.jsx)(lv.A,{size:18}),(0,y.jsx)("span",{children:"See other response"})]}),(0,y.jsx)(s4,{renderExpandedMessage:r,setRenderExpandedMessage:l,message:o})]})}),(0,y.jsx)(lN,{messageA:t,messageB:a,selectedMessage:i,"data-sentry-element":"CarouselMessageGroup","data-sentry-source-file":"message-group.tsx"})]})}function lw(e){let{messageA:t,messageB:a,selectedMessage:n}=e,s=(0,U.g)(e=>e.modality),{shouldShowA:r,shouldShowB:l}=lb(n,t,a,s),i=s===b.Jg.WEBDEV;return(0,y.jsxs)("div",{className:(0,B.cn)("flex min-w-0",i?"flex-col gap-4":"flex-col gap-2 lg:flex-row lg:gap-3"),"data-sentry-component":"SideBySideOrStackedMessageGroup","data-sentry-source-file":"message-group.tsx",children:[r&&t&&(0,y.jsx)(ri,{message:t,selectedMessage:n,messageLayoutMode:"container",className:(0,B.cn)({"max-w-full":i,"lg:max-w-[768px]":!i&&!l})},"agent-a--message"),l&&a&&(0,y.jsx)(ri,{message:a,selectedMessage:n,messageLayoutMode:"container",className:(0,B.cn)({"max-w-full":i,"lg:max-w-[768px]":!i&&!r})},"agent-b--message")]})}function lN(e){let{messageA:t,messageB:a,selectedMessage:n}=e,s=(0,U.g)(e=>e.modality),r=(e=>{let[t,a]=e;return(0,U.g)((e=>{let[t,a]=e,n="string"==typeof t?t:null==t?void 0:t.id,s="string"==typeof a?a:null==a?void 0:a.id;return(0,aG.Mz)([e=>e.pairwiseFeedbacks],e=>e.some(e=>e.messageAId===n||e.messageBId===s))})([t,a]))})([t,a]),{shouldShowA:l,shouldShowB:i,shouldRenderBoth:o}=(0,M.useMemo)(()=>lb(n,t,a,s),[n,t,a,s]),d=!r||sA.xl,c=(0,M.useCallback)(e=>sA.Fr&&o&&(e.canScrollNext()||e.canScrollPrev()),[o]);return(0,y.jsxs)(rb,{edgeToEdgePadding:"var(--chat-padding)",opts:{watchDrag:c,duration:15},messageA:t,messageB:a,"data-sentry-element":"Carousel","data-sentry-component":"CarouselMessageGroup","data-sentry-source-file":"message-group.tsx",children:[(0,y.jsxs)(rj,{className:"@container/carousel","data-sentry-element":"CarouselContent","data-sentry-source-file":"message-group.tsx",children:[l&&t&&(0,y.jsx)(lE,{message:t,selectedMessage:n,isRenderingAlone:!i},"agent-a-message"),i&&a&&(0,y.jsx)(lE,{message:a,selectedMessage:n,isRenderingAlone:!l},"agent-b-message")]}),d&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(rN,{className:"left-2 drop-shadow",variant:"secondary",hideOnDisable:!0}),(0,y.jsx)(rE,{className:"right-2 drop-shadow",variant:"secondary",shouldDim:r,hideOnDisable:!0})]}),(0,y.jsx)(rA,{messageA:t,messageB:a,"data-sentry-element":"CarouselControls","data-sentry-source-file":"message-group.tsx"})]})}function lE(e){let{message:t,selectedMessage:a,isRenderingAlone:n}=e;return(0,y.jsx)(rw,{className:n?"max-w-[768px]":"@[752px]/carousel:basis-1/2 basis-[calc(100%-theme(spacing.8))]","data-sentry-element":"CarouselItem","data-sentry-component":"CarouselMessage","data-sentry-source-file":"message-group.tsx",children:(0,y.jsx)(ri,{message:t,selectedMessage:a,messageLayoutMode:"container","data-sentry-element":"AssistantMessage","data-sentry-source-file":"message-group.tsx"})})}var lA=a(58932);function lC(e){let{mode:t}=e,a=(0,lA.m)(),[n]=(0,M.useState)(nt()),[s]=(0,M.useState)(nt());return(0,y.jsxs)("div",{className:(0,B.cn)("flex gap-4 p-4 duration-500",{"animate-in fade-in":a,"opacity-0":!a}),"data-sentry-component":"MessagesSkeleton","data-sentry-source-file":"message-skeleton.tsx",children:[(0,y.jsx)("div",{className:"flex flex-1 flex-col gap-4",children:n.map(e=>(0,y.jsx)(sE.E,{className:e.className},e.id))}),t===b.lY.DIRECT?null:(0,y.jsx)("div",{className:"flex flex-1 flex-col gap-4",children:s.map(e=>(0,y.jsx)(sE.E,{className:e.className},e.id))})]})}let lT=[{icon:a(42126).A,label:"Generate Image",tooltip:"Generate Image",modality:b.Jg.IMAGE},{icon:eJ.A,label:"Search the Web",tooltip:"Search the Web",modality:b.Jg.SEARCH},{icon:rF.A,label:"Edit an Image",tooltip:"Upload an image to edit",modality:"EDIT_IMAGE"},{icon:eW.A,label:"Build something",tooltip:"Build something",modality:b.Jg.WEBDEV}];function l_(e){let{focusInput:t,openFilePicker:a}=e,n=(0,U.g)(e=>e.setModality),s=(0,U.g)(e=>e.mode),[r,l]=(0,eF.Uh)();return(0,y.jsx)(rd.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"SuggestionsButtons","data-sentry-source-file":"suggestions-buttons.tsx",children:r===b.Jg.CHAT&&s===b.lY.BATTLE&&(0,y.jsx)(tr.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"no-scrollbar flex flex-row items-start gap-2 overflow-x-auto sm:flex-wrap sm:items-center sm:justify-center",children:(0,y.jsx)("div",{className:"flex w-full shrink-0 flex-nowrap items-center justify-start gap-2 pl-4 sm:flex-wrap sm:justify-center sm:pl-0 sm:pr-0",children:(0,y.jsx)("div",{className:"flex w-auto shrink-0 flex-nowrap items-center gap-2 pr-4 sm:w-full sm:flex-wrap sm:justify-center",children:lT.map((e,s)=>{let r=e.icon;return(0,y.jsxs)(E.$,{variant:"outline",size:"md",onClick:()=>(e=>{let s="EDIT_IMAGE"===e?b.Jg.IMAGE:e;T.z.capture({action:"modality_suggestion_button_click",params:{extendedModality:e}}),n(s),l(s),"EDIT_IMAGE"===e&&a?a():t&&t()})(e.modality),className:"bg-surface-primary shrink-0",children:[(0,y.jsx)(r,{className:"size-4"}),e.label]},s)})})})})})}var lk=a(27735),lI=a(66696),lS=a(32158),lR=a(55120);let lM=[{icon:lk.A,name:"Game",variations:[{label:"Flappy Bird Game",prompt:"Build a Flappy Bird clone with gravity physics, scrolling pipes with collision detection, score tracking, persistent high scores, particle effects, sound effects, and start/game-over screens."},{label:"Snake Game",prompt:"Create a classic Snake game with smooth movement, growing snake mechanics, food spawning, collision detection, score tracking, game over screen, and increasing difficulty speed."},{label:"Tetris Clone",prompt:"Build a Tetris game with falling tetrominoes, rotation mechanics, line clearing, score system, next piece preview, level progression, hold piece feature, and smooth animations."},{label:"Breakout Game",prompt:"Design a Breakout/Arkanoid game with paddle controls, bouncing ball physics, destructible brick blocks, power-ups (multi-ball, wider paddle), lives system, level progression, and particle effects."},{label:"Space Invaders",prompt:"Create a Space Invaders game with player ship movement, shooting mechanics, enemy formations, progressive difficulty, shield blocks, UFO bonus enemies, sound effects, and wave-based progression."},{label:"Pong Game",prompt:"Build a Pong game with two paddles, ball physics, score tracking, AI opponent, difficulty levels, power-ups (speed boost, paddle size), smooth animations, and multiplayer support."},{label:"Asteroids Game",prompt:"Design an Asteroids game with ship rotation and thrust, asteroid destruction, shooting mechanics, wrap-around screen edges, particle effects, UFO enemies, lives system, and progressive difficulty."},{label:"2048 Puzzle",prompt:"Create a 2048 tile-sliding puzzle game with swipe gestures, tile merging animations, score tracking, undo functionality, best score persistence, smooth transitions, and win condition detection."},{label:"Candy Crush Clone",prompt:"Build a Candy Crush-style match-3 puzzle game with colorful candy pieces, swipe mechanics, match detection, cascading combos, special candy effects, level progression, score multipliers, and satisfying animations."}]},{icon:lI.A,name:"Clone",variations:[{label:"Spotify Player Clone",prompt:"Create a Spotify player clone with play/pause controls, progress bar, volume slider, song queue, album art display, track information, shuffle/repeat modes, and smooth transitions."},{label:"Stripe Homepage Clone",prompt:"Build a Stripe-style homepage with beautiful gradient animations, smooth scroll effects, interactive product demos, elegant typography, and mesmerizing background patterns."},{label:"Figma Clone",prompt:"Design a Figma-like design tool with canvas interactions, layer panels, vector editing tools, zoom/pan controls, selection handles, and collaborative cursors."},{label:"Notion Clone",prompt:"Create a Notion-style note-taking app with block-based editing, drag-and-drop reorganization, markdown support, inline databases, and beautiful typography."},{label:"Linear Clone",prompt:"Build a Linear-style project management interface with command palette, keyboard shortcuts, smooth animations, issue tracking, and polished interactions."},{label:"Stripe Checkout Clone",prompt:"Design a Stripe-style checkout form with animated inputs, real-time validation, card number formatting, smooth transitions, and elegant error handling."},{label:"Discord Clone",prompt:"Create a Discord-style chat interface with server sidebar, channel navigation, message threads, real-time updates, and smooth scroll behavior."},{label:"VS Code Clone",prompt:"Build a VS Code-style code editor with sidebar, file explorer, tab system, syntax highlighting, command palette, and extension-like architecture."},{label:"GitHub Dashboard Clone",prompt:"Design a GitHub-style dashboard with activity graphs, repository cards, contribution heatmap, issue tracking, pull request overview, and clean, developer-focused UI."}]},{icon:lS.A,name:"3D",variations:[{label:"Colosseum Simulator",prompt:"Design an elaborate, detailed, and vibrant voxel-art scene depicting the Colosseum in Ancient Rome with surrounding architecture, atmospheric lighting, and interactive camera controls."},{label:"Statue of Liberty",prompt:"Create a dawn fly-around of the Statue of Liberty on Liberty Island with a reflective harbor and the Lower Manhattan skyline beyond, featuring realistic lighting, textures, and smooth camera movements."},{label:"Mechanical Watch Mechanism",prompt:"Build a realistic, working, and accurate 3D mechanical watch mechanism with interactive controls, multiple layers, camera navigation, and detailed inspection of different mechanism elements."},{label:"Weather App 3D",prompt:"Create a polished, creative weather app with vivid, 3D-animated weather types taken to the extreme, allowing users to switch between different cities and weather conditions with stunning visuals."},{label:"Solar System 3D",prompt:"Build an interactive 3D solar system with orbiting planets, realistic textures, orbital paths, zoom controls, planet information tooltips, time speed controls, and celestial body scaling."},{label:"3D Terrain Generator",prompt:"Build a 3D terrain generator with procedurally generated landscapes, height maps, texture mapping, camera controls, fog effects, and interactive terrain editing."},{label:"3D Building Viewer",prompt:"Design a 3D building viewer with architectural models, floor plan navigation, room highlighting, interactive hotspots, camera presets, and smooth transitions."},{label:"Three-Body Simulation",prompt:"Create a 3D three-body gravitational simulation with constrained environment edges, interactive controls, and visually impressive orbital mechanics."},{label:"Subway Map Generator",prompt:"Procedurally generate beautiful 3D transit maps in the style of classic designs (e.g., London Underground), handling routing, station placement, and line intersections elegantly."}]},{icon:eH.A,name:"Animation",variations:[{label:"Boids Flocking Simulation",prompt:"Create a mesmerizing flocking simulation with thousands of individuals (birds/fish) using simple rules to create emergent patterns, realistic group behavior, and highly performant optimization."},{label:"Lightning Generator",prompt:"Design fractal lightning with realistic branching, 3D volumetric glow effects, interactive clicks to create strikes, adjustable voltage and atmosphere, featuring cloud-to-ground, Tesla coil, and Jacob's ladder types."},{label:"Strange Attractors",prompt:"Visualize Lorenz, Roessler, or other chaotic attractors showing trajectories that never repeat but stay confined to butterfly-shaped patterns, with highly engaging visualization and free camera controls."},{label:"Fluid Dynamics Simulator",prompt:"Build a real-time water/smoke simulation with particle physics, interactive obstacles, viscosity changes, wind adjustment, 3D visualization with realistic lighting, and support for different fluid types (water, honey, gas)."},{label:"Sorting Algorithm Race",prompt:"Show multiple sorting algorithms running simultaneously on the same data, racing each other, making it mesmerizing to watch with clear differences and factually correct implementations."},{label:"Fireworks Display",prompt:"Create a spectacular fireworks show with multiple rocket types, realistic explosions, particle trails, sound synchronization, celebratory timing and choreography, ensuring high performance and optimization."},{label:"Falling Sand Sandbox",prompt:"Build a falling sand simulation with multiple materials (sand, water, oil, fire, smoke, steam), simple interactions between materials, brush sizes, erase and fill tools, and save/load functionality."},{label:"Soft-Body Playground",prompt:"Design squishy 2D/3D blobs that jiggle and collide, with tear, merge, and pin areas featuring delightful motion, slow-mo effects, and trails for juicy visuals."},{label:"Cloth and Wind Simulator",prompt:"Simulate flag-like cloth that ripples in wind, with pin/unpin corners and points, collision with simple shapes, pause/reset functionality, and adjustable wind strength."}]},{icon:lR.A,name:"Interactive Tool",variations:[{label:"Personal Finance Tracker",prompt:"Build a personal finance tracker with income/expense entry, category-based spending breakdowns with charts, budget limits with progress bars, transaction history with filters, and monthly trends visualization."},{label:"Habit Tracker",prompt:"Create a habit tracker with daily check-ins, streak tracking, calendar visualization, progress charts, customizable habits, reminder notifications, and statistics dashboard."},{label:"Project Management Tool",prompt:"Design a project management tool with task boards, drag-and-drop organization, due dates, priority levels, team collaboration, progress tracking, and filter/search functionality."},{label:"Time Tracking Dashboard",prompt:"Build a time tracking dashboard with start/stop timers, project categorization, daily/weekly/monthly analytics, visual reports, export functionality, and productivity insights."},{label:"Markdown Note-Taking App",prompt:"Create a markdown note-taking app with folder organization, search functionality, tag system, export options, dark/light theme, and live preview."},{label:"URL Shortener",prompt:"Design a URL shortener with custom aliases, click analytics, QR code generation, expiration dates, link management dashboard, and export functionality."},{label:"Pomodoro Timer",prompt:"Build a Pomodoro timer with customizable work/break intervals, session statistics, progress tracking, sound notifications, and productivity insights."},{label:"Expense Splitter",prompt:"Create an expense splitter tool for splitting bills with multiple people, calculating shares, supporting different currencies, expense history, and settlement tracking."},{label:"Password Manager",prompt:"Design a password manager with secure storage, password generation, category organization, search functionality, auto-fill capabilities, and export options."}]}];function lD(e){let{sendMessage:t}=e,[a,n]=(0,U.g)((0,H.k)(e=>[e.mode,e.setMode])),s=(0,_.kH)(e=>e.userId),{modelAId:r,modelBId:l}=(0,ef.g)(e=>e),i=(0,M.useMemo)(()=>lM.map(e=>{var t;let a=Math.floor(Math.random()*e.variations.length),n=null!=(t=e.variations[a])?t:e.variations[0];if(!n)throw Error("Theme ".concat(e.name," has no variations"));return{icon:e.icon,label:n.label,tooltip:n.label,prompt:n.prompt}}),[]),o=(0,M.useCallback)(async e=>{T.z.capture({action:"webdev_suggestion_clicked",params:{button_label:e.label,mode:a,user_id:s,model_a_id:r,model_b_id:l}});let i=rK[a];(!i.requiresModelA||(null==r?void 0:r.trim()))&&(!i.requiresModelB||(null==l?void 0:l.trim()))||n(b.lY.BATTLE);try{await t(e.prompt,{isPresetPrompt:!0,presetLabel:e.label})}catch(e){console.error("Failed to send message:",e)}},[a,s,r,l,n,t]);return(0,y.jsx)(rd.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"WebDevSuggestionsButtons","data-sentry-source-file":"webdev-suggestions-buttons.tsx",children:(0,y.jsx)(tr.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"no-scrollbar flex flex-row items-start gap-2 overflow-x-auto sm:flex-wrap sm:items-center sm:justify-center","data-sentry-element":"unknown","data-sentry-source-file":"webdev-suggestions-buttons.tsx",children:(0,y.jsx)("div",{className:"flex w-full shrink-0 flex-nowrap items-center justify-start gap-2 pl-4 sm:flex-wrap sm:justify-center sm:pl-0 sm:pr-0",children:(0,y.jsx)("div",{className:"flex w-auto shrink-0 flex-nowrap items-center gap-2 pr-4 sm:w-full sm:flex-wrap sm:justify-center",children:i.map((e,t)=>{let a=e.icon;return(0,y.jsxs)(E.$,{variant:"outline",size:"md",onClick:()=>{o(e)},className:"bg-surface-primary shrink-0",children:[(0,y.jsx)(a,{className:"size-4"}),e.label]},t)})})})})})}function lz(e){let{evaluationFormProps:t,textAreaRef:a,fileInputRef:n,openFilePicker:s,scrollableAreaRef:r,checkpointElementRef:l,messageThreads:i,latestMessages:o}=e,{ref:d,inView:c}=(0,rc.Wx)({threshold:0,rootMargin:tB});lg({checkpointInView:c,lastMessagesArr:null!=o?o:[]});let u="treatment1"===(0,W._P)("modality-buttons-experiment"),m=(0,e5.d)("md"),p=r3(),x=function(){let e=(0,U.g)(e=>e.autoModalityMetadata),t=(0,U.g)(e=>e.loading),a=(0,U.g)(e=>e.messages),{latestMessages:n}=ns(),{dismissed:s}=function(){let[e,t]=(0,I.fp)(rT);return{dismissed:e,dismiss:(0,M.useCallback)(()=>{t(!0)},[t]),reset:(0,M.useCallback)(()=>{t(!1)},[t])}}();return(0,M.useMemo)(()=>!(!e||!e.shouldShowModalitySuggestion||s||a.filter(e=>e.role===b.PG.USER).length>1||n.some(e=>e.status===b.nH.FAILED)),[e,s,t,n,a])}(),f=(0,_.kH)(e=>e.user),h=(0,_.kH)(_.Q_),g="/"===(0,F.usePathname)(),v=(0,U.g)((0,H.k)(e=>({id:e.id,mode:e.mode,loading:e.loading,modality:e.modality,messagesLength:e.messages.length}))),j=g&&0===v.messagesLength&&v.modality===b.Jg.WEBDEV&&(!i||0===i.length),w=g&&0===v.messagesLength&&v.modality!==b.Jg.WEBDEV&&(!i||0===i.length),N=v.mode===b.lY.DIRECT,E=(0,M.useMemo)(()=>null==i?void 0:i.map(e=>{let t=e.get(aD.BQ.a),a=e.get(aD.BQ.b);return(null==t?void 0:t.role)===b.PG.USER?(0,y.jsx)(ro,{message:t},null==t?void 0:t.id):N&&t&&!a?(0,y.jsx)(ri,{message:t,selectedMessage:"a",messageLayoutMode:"page",className:"lg:max-w-[768px]"},t.id):(0,y.jsx)(lj,{messageA:t,messageB:a,firstMessageMap:i[0]},"".concat(null==t?void 0:t.id).concat(null==a?void 0:a.id))}),[i,N]),A=!N&&m&&sA.Fr;return(0,y.jsx)(rf,{"data-sentry-element":"CarouselTouchAreaContextProvider","data-sentry-component":"EvaluationChat","data-sentry-source-file":"evaluation-chat.tsx",children:(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col",children:(0,y.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,y.jsx)(rd.N,{mode:"wait",initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"evaluation-chat.tsx",children:v.loading?(0,y.jsx)("div",{className:"-mb-4 min-h-0 flex-1",children:(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(lC,{mode:v.mode})})}):(null==i?void 0:i.length)&&i.length>0?(0,y.jsx)("div",{className:"-mb-4 min-h-0 flex-1",children:(0,y.jsx)(tA,{ref:r,className:"h-full min-h-0 flex-1",children:(0,y.jsx)("div",{className:"relative h-full w-full overscroll-none",children:(0,y.jsxs)("div",{className:(0,B.cn)({"h-full":A},"flex flex-col items-center","px-[--chat-padding] [--chat-padding:theme(spacing.4)]"),children:[(0,y.jsxs)("ol",{className:(0,B.cn)("mt-8 flex w-full max-w-screen-xl grow flex-col-reverse justify-end gap-4 overscroll-none pb-2 duration-500",{"md:pb-24":p}),children:[(0,y.jsx)("div",{className:"h-0",ref:e=>{d(e),l.current=e}}),x&&(0,y.jsx)("li",{className:"w-full max-w-screen-xl",children:(0,y.jsx)(rR,{})}),E]}),A&&(0,y.jsx)(ry,{latestMessages:null!=o?o:[]})]})})})}):(0,y.jsx)(tr.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeOut"},className:"flex flex-1 flex-col items-center justify-center px-4",children:(0,y.jsx)("div",{className:"w-full max-w-2xl text-center",children:(0,y.jsx)("p",{className:"text-text-muted text-2xl sm:text-5xl",children:null==f||h?"":"Welcome back"})})},"empty-state")}),(0,y.jsx)("div",{className:"relative flex flex-col items-center pb-6",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[j&&(0,y.jsx)("div",{className:"relative order-1 w-full overflow-x-visible md:absolute md:top-full md:order-2 md:pt-4",children:(0,y.jsx)(lD,{sendMessage:t.sendMessage})}),w&&u&&(0,y.jsx)("div",{className:"relative order-1 w-full overflow-x-visible md:absolute md:top-full md:order-2 md:pt-4",children:(0,y.jsx)(l_,{focusInput:()=>{var e;return null==(e=a.current)?void 0:e.focus()},openFilePicker:s})}),(0,y.jsx)("div",{className:"relative order-2 w-full px-4 md:order-1",children:(0,M.createElement)(lh,{...t,textAreaRef:a,fileInputRef:n,key:"evaluation-form-".concat(v.id),"data-sentry-element":"EvaluationForm","data-sentry-source-file":"evaluation-chat.tsx"})})]})})]})})})}function lO(e){let{evaluationFormProps:t,textAreaRef:a,fileInputRef:n,openFilePicker:s,message:r="What would you like to do?"}=e,l=(0,U.g)(e=>e.update),i=(0,U.g)(e=>e.title),o=(0,U.g)(e=>e.modality),d=(0,U.g)(e=>e.messages.length),c="treatment1"===(0,W._P)("modality-buttons-experiment"),u=o!==b.Jg.WEBDEV&&0===d,m=0===d&&o===b.Jg.WEBDEV;return(0,M.useEffect)(()=>{"New Chat"!==i&&l({title:"New Chat"})},[i,l]),(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col","data-sentry-component":"EvaluationNewChat","data-sentry-source-file":"evaluation-new-chat.tsx",children:(0,y.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center px-0 md:justify-center",children:[(0,y.jsx)("div",{className:"flex w-full max-w-2xl flex-1 items-center justify-center px-4 text-center md:flex-none",children:(0,y.jsx)("p",{className:"text-text-secondary mb-0 text-[32px] sm:mb-8 sm:text-5xl",children:r})}),(0,y.jsx)("div",{className:"w-full max-w-[800px] md:relative md:text-center",children:(0,y.jsxs)("div",{className:"flex flex-col gap-3",children:[u&&c&&(0,y.jsx)("div",{className:"relative order-1 w-full overflow-x-visible md:absolute md:top-full md:z-[1] md:order-2",children:(0,y.jsx)(l_,{focusInput:()=>{var e;return null==(e=a.current)?void 0:e.focus()},openFilePicker:s})}),m&&(0,y.jsx)("div",{className:"relative order-1 w-full overflow-x-visible md:absolute md:top-full md:z-[1] md:order-2",children:(0,y.jsx)(lD,{sendMessage:t.sendMessage})}),(0,y.jsx)("div",{className:"relative order-2 px-4 pb-6 md:order-1",children:(0,y.jsx)(lh,{...t,textAreaRef:a,fileInputRef:n,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"evaluation-new-chat.tsx"})})]})})]})})}var lL=a(71325);function lP(e){let{size:t=lL.U,...a}=e;return(0,y.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,"data-sentry-element":"svg","data-sentry-component":"AnimatedSpinner","data-sentry-source-file":"animated-spinner.tsx",children:(0,y.jsx)("path",{d:"M21 12C20.9999 13.9006 20.3981 15.7524 19.2809 17.2899C18.1637 18.8275 16.5885 19.9719 14.7809 20.5592C12.9733 21.1464 11.0262 21.1464 9.21864 20.559C7.41109 19.9717 5.83588 18.8272 4.71876 17.2895C3.60165 15.7519 2.99999 13.9001 3 11.9995C3.00001 10.0989 3.60171 8.24712 4.71884 6.70951C5.83598 5.1719 7.4112 4.02742 9.21877 3.44009C11.0263 2.85276 12.9734 2.85273 14.781 3.44001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"animated-spinner.tsx"})})}var lB=a(56771),lU=a(98329);let lF={"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/webp":[".webp"]},lH=e=>{if(e.length>0){let t,a=e.map(e=>e.errors.map(e=>e.message).join(", ")),n=t=>e.some(e=>e.errors.some(e=>e.code===t));t=n(lB.O4.FileInvalidType)?"Failed to upload file. Unsupported file type.":n(lB.O4.FileTooLarge)?"Failed to upload file. Make sure the file is less than ".concat(15,"MB"):"Failed to upload file.",D.oR.error(t,{dismissible:!0}),console.error(a.join("\n"))}};var lV=a(69742),lG=a(19352),lW=a(69405);function lJ(e){let{evaluationFormProps:t,textAreaRef:a,fileInputRef:n,openFilePicker:s}=e,r=(0,U.g)(e=>e.modality)===b.Jg.WEBDEV,l="treatment1"===(0,W._P)("modality-buttons-experiment");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"flex w-full flex-1 flex-col items-center justify-center px-4",children:(0,y.jsxs)("div",{className:"w-full max-w-[800px]",children:[(0,y.jsx)(ty,{"data-sentry-element":"WelcomeScreen","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsxs)(tr.P.div,{className:"relative hidden w-full max-w-full sm:block",initial:"hidden",animate:"visible",variants:tx,transition:{...tf,delay:.4},"data-sentry-element":"unknown","data-sentry-source-file":"landing-new-user.tsx",children:[(0,y.jsx)(tr.P.div,{className:"bg-interactive-cta pointer-events-none absolute inset-[-20px]",style:{opacity:0,filter:"blur(44px)",transform:"translate3d(0, 0, 0)"},initial:{opacity:0},animate:{opacity:.12},transition:{...tf,delay:.6},"data-sentry-element":"unknown","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsx)(lh,{...t,textAreaRef:a,fileInputRef:n,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"landing-new-user.tsx"}),!r&&l&&(0,y.jsx)("div",{className:"absolute top-full w-full pt-4",children:(0,y.jsx)(l_,{focusInput:()=>{var e;return null==(e=a.current)?void 0:e.focus()},openFilePicker:s})}),r&&(0,y.jsx)("div",{className:"absolute top-full w-full pt-4",children:(0,y.jsx)(lD,{sendMessage:t.sendMessage})})]})]})}),(0,y.jsx)("div",{className:"w-full flex-none sm:hidden",children:(0,y.jsx)("div",{className:"flex flex-shrink-0 flex-col items-center pb-6",children:(0,y.jsxs)("div",{className:"relative w-full md:max-w-screen-xl",children:[(0,y.jsx)(tr.P.div,{className:"bg-interactive-cta pointer-events-none absolute inset-[-4px]",style:{opacity:0,filter:"blur(24px)",transform:"translate3d(0, 0, 0)"},initial:{opacity:0},animate:{opacity:.12},transition:{...tf,delay:.6},"data-sentry-element":"unknown","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsxs)("div",{className:"relative overflow-x-visible",children:[r&&(0,y.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-3",children:(0,y.jsx)(lD,{sendMessage:t.sendMessage})}),!r&&l&&(0,y.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-3",children:(0,y.jsx)(l_,{focusInput:()=>{var e;return null==(e=a.current)?void 0:e.focus()},openFilePicker:s})}),(0,y.jsx)("div",{className:"px-3",children:(0,y.jsx)(lh,{...t,textAreaRef:a,fileInputRef:n,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"landing-new-user.tsx"})})]})]})})})]})}var lY=a(26642),lQ=a(66370);let lq=e=>{let{className:t,...a}=e;return(0,y.jsx)(lQ.YZ,{className:(0,B.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a,"data-sentry-element":"unknown","data-sentry-component":"ResizablePanelGroup","data-sentry-source-file":"resizable.tsx"})},l$=lQ.Zk,lK=e=>{let{withHandle:t,className:a,...n}=e;return(0,y.jsx)(lQ.TW,{className:(0,B.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...n,"data-sentry-element":"unknown","data-sentry-component":"ResizableHandle","data-sentry-source-file":"resizable.tsx",children:t&&(0,y.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-sm border",children:(0,y.jsx)(lY.A,{className:"h-2.5 w-2.5"})})})};var lX=a(71457),lZ=a(74429),l0=a(73227),l1=a(82109),l2=a(67193),l4=a(75046);let l3="Check out what I built in LMArena's Code Arena";function l5(e){let{previewUrl:t,messageId:a,selectedFile:n,onClose:s,requiresLogin:r=!1,onLoginRequired:l}=e,[,i]=(0,sO.A)(),{copyState:o,handleClick:d}=(0,l0.U)(),c=(null==n?void 0:n.content)!=null;return(0,y.jsxs)("div",{className:"flex flex-col gap-2 p-2","data-sentry-component":"SharePopoverContent","data-sentry-source-file":"share-popover-content.tsx",children:[(0,y.jsx)(E.$,{variant:"tertiary",size:"md",className:"w-full",onClick:()=>{if(r){null==l||l();return}i(t),d(),T.z.capture({action:"webdev_share_link_copied",params:{message_id:a}})},"aria-label":"Copy link","data-sentry-element":"Button","data-sentry-source-file":"share-popover-content.tsx",children:"copied"===o||"resetting"===o?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(eR.A,{className:"size-3"}),"Copied"]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l2.A,{className:"size-3"}),"Copy link"]})}),(0,y.jsxs)(E.$,{variant:"outline",size:"md",className:"w-full",onClick:()=>{if(r){null==l||l();return}if(!(null==n?void 0:n.content))return;let e=new Blob([n.content],{type:n.contentType}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=n.path,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t),T.z.capture({action:"webdev_share_file_downloaded",params:{message_id:a,file_path:n.path}}),null==s||s()},disabled:!c,"aria-label":"Download file","data-sentry-element":"Button","data-sentry-source-file":"share-popover-content.tsx",children:[(0,y.jsx)(sD.A,{className:"size-3","data-sentry-element":"Download","data-sentry-source-file":"share-popover-content.tsx"}),"Download File"]}),(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(E.$,{variant:"outline",size:"icon",className:"h-10 flex-1",onClick:()=>{if(r){null==l||l();return}let e=encodeURIComponent(l3),n=encodeURIComponent("".concat(l3,": ").concat(t));window.location.href="mailto:?subject=".concat(e,"&body=").concat(n),T.z.capture({action:"webdev_share_social_clicked",params:{platform:"email",message_id:a}})},"aria-label":"Share via email","data-sentry-element":"Button","data-sentry-source-file":"share-popover-content.tsx",children:(0,y.jsx)(l4.A,{className:"size-4","data-sentry-element":"Mail","data-sentry-source-file":"share-popover-content.tsx"})}),(0,y.jsx)(E.$,{variant:"outline",size:"icon",className:"h-10 flex-1",onClick:()=>{if(r){null==l||l();return}let e="https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(t));window.open(e,"_blank","noopener,noreferrer"),T.z.capture({action:"webdev_share_social_clicked",params:{platform:"linkedin",message_id:a}})},"aria-label":"Share on LinkedIn","data-sentry-element":"Button","data-sentry-source-file":"share-popover-content.tsx",children:(0,y.jsx)(l1.pf,{size:16,"data-sentry-element":"LinkedIn","data-sentry-source-file":"share-popover-content.tsx"})}),(0,y.jsx)(E.$,{variant:"outline",size:"icon",className:"h-10 flex-1",onClick:()=>{if(r){null==l||l();return}let e="https://x.com/intent/tweet?text=".concat(encodeURIComponent(l3),"&url=").concat(encodeURIComponent(t));window.open(e,"_blank","noopener,noreferrer"),T.z.capture({action:"webdev_share_social_clicked",params:{platform:"x",message_id:a}})},"aria-label":"Share on X","data-sentry-element":"Button","data-sentry-source-file":"share-popover-content.tsx",children:(0,y.jsx)(l1.Oy,{size:16,"data-sentry-element":"XPlatform","data-sentry-source-file":"share-popover-content.tsx"})})]})]})}var l6=a(96297);function l8(e){let{selectedFile:t}=e,[,a]=(0,sO.A)(),n=(0,M.useCallback)(()=>{if(!t.content)return;let e=new Blob([t.content],{type:t.contentType}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t.path,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)},[t]),s=(0,M.useCallback)(()=>{t.content?a(t.content):a(t.path)},[t,a]),r=!!t.content;return(0,y.jsxs)("div",{className:"bg-surface-primary border-border-faint flex min-h-[34px] items-center justify-between gap-2 border-b px-4","data-sentry-component":"FileSelectorBar","data-sentry-source-file":"file-selector-bar.tsx",children:[(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,y.jsx)(l6.A,{className:"text-text-tertiary size-4 shrink-0","data-sentry-element":"FileText","data-sentry-source-file":"file-selector-bar.tsx"}),(0,y.jsx)("span",{className:"text-text-primary truncate font-mono text-sm",children:t.path})]}),(0,y.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[(0,y.jsx)(sN.i,{size:14,variant:"ghost",className:(0,B.cn)("hover:bg-surface-tertiary hover:text-text-primary size-7 rounded-md p-0 transition-colors",!r&&"cursor-not-allowed opacity-30"),onClick:s,disabled:!r,"data-sentry-element":"CopyButton","data-sentry-source-file":"file-selector-bar.tsx"}),(0,y.jsx)(E.$,{variant:"ghost",size:"icon",className:(0,B.cn)("hover:bg-surface-tertiary hover:text-text-primary size-7 rounded-md p-0 transition-colors",!r&&"cursor-not-allowed opacity-30"),onClick:n,disabled:!r,"data-sentry-element":"Button","data-sentry-source-file":"file-selector-bar.tsx",children:(0,y.jsx)(sD.A,{className:"size-3.5","data-sentry-element":"Download","data-sentry-source-file":"file-selector-bar.tsx"})})]})]})}var l9=a(93275),l7=a(41201);function ie(e){let{className:t,message:a}=e,{data:n}=s$(a),s=(0,M.useMemo)(()=>{var e;return function(e){let t={};for(let n of e){let e=n.path.split("/"),s=e.pop();if(!s)continue;let r=t;for(let t of e){var a;null!=(a=r)[t]||(a[t]={type:"folder",children:{}}),"folder"===r[t].type&&(r=r[t].children)}r[s]={type:"file",file:n}}return function e(t,a){return Object.entries(t).map(t=>{let[n,s]=t,r=a?"".concat(a,"/").concat(n):n;return"file"===s.type?{type:"file",name:n,path:r,file:s.file}:{type:"folder",name:n,path:r,children:e(s.children,r)}})}(t,"")}(null!=(e=null==n?void 0:n.files)?e:[])},[n]);return 0===s.length?null:(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-primary min-w-36 overflow-y-auto",t),"data-sentry-component":"FileTree","data-sentry-source-file":"file-tree.tsx",children:[(0,y.jsx)("div",{className:"border-border-faint flex min-h-[34px] items-center border-b px-3",children:(0,y.jsx)("h2",{className:"text-text-tertiary text-xs font-semibold uppercase tracking-wide",children:"Files"})}),(0,y.jsx)("div",{className:"flex flex-col gap-0.5 p-2",children:s.map(e=>(0,y.jsx)(it,{node:e},e.path))})]})}function it(e){let{node:t}=e,[a,n]=aS();return"file"===t.type?(0,y.jsxs)(ia,{onClick:()=>n(t.file.path),isSelected:t.file.path===a,children:[(0,y.jsx)(l9.A,{className:"text-text-tertiary size-4 shrink-0"}),(0,y.jsx)("span",{className:"truncate",children:t.name})]}):(0,y.jsxs)(nZ.Nt,{className:"[&[data-state=open]>button>svg:first-child]:rotate-90","data-sentry-element":"Collapsible","data-sentry-component":"Tree","data-sentry-source-file":"file-tree.tsx",children:[(0,y.jsx)(nZ.R6,{asChild:!0,"data-sentry-element":"CollapsibleTrigger","data-sentry-source-file":"file-tree.tsx",children:(0,y.jsxs)(ia,{"data-sentry-element":"MenuButton","data-sentry-source-file":"file-tree.tsx",children:[(0,y.jsx)(st.A,{className:"text-text-tertiary size-4 shrink-0 transition-transform","data-sentry-element":"ChevronRight","data-sentry-source-file":"file-tree.tsx"}),(0,y.jsx)(l7.A,{className:"text-text-tertiary size-4 shrink-0","data-sentry-element":"Folder","data-sentry-source-file":"file-tree.tsx"}),(0,y.jsx)("span",{className:"truncate",children:t.name})]})}),(0,y.jsx)(nZ.Ke,{"data-sentry-element":"CollapsibleContent","data-sentry-source-file":"file-tree.tsx",children:(0,y.jsx)("div",{className:"flex min-w-0 flex-col gap-0.5 py-0.5 pl-3",children:t.children.map(e=>(0,y.jsx)(it,{node:e},e.path))})})]})}function ia(e){let{isSelected:t=!1,className:a,...n}=e;return(0,y.jsx)("button",{type:"button",className:(0,B.cn)("flex w-full items-center gap-2 overflow-hidden rounded-md px-2 py-1.5 text-left text-sm outline-none transition-colors disabled:pointer-events-none disabled:opacity-50",t?"bg-surface-tertiary text-text-primary font-medium":"text-text-secondary hover:bg-surface-secondary hover:text-text-primary bg-transparent",a),...n,"data-sentry-component":"MenuButton","data-sentry-source-file":"file-tree.tsx"})}var is=a(92321);function ir(e){let{statusText:t}=e,{RiveComponent:a}=(0,n_.useRive)({src:"/rive/building-loop.riv",autoplay:!0});return(0,y.jsxs)("div",{className:"text-center","data-sentry-component":"GeneratingCodeCard","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)("div",{className:"mb-4 flex justify-center",children:(0,y.jsx)(a,{className:"h-32 w-32","data-sentry-element":"RiveComponent","data-sentry-source-file":"pane-cards.tsx"})}),(0,y.jsx)("p",{className:"text-text-secondary text-lg font-semibold",children:t}),(0,y.jsx)("p",{className:"text-text-tertiary max-w-[15rem] text-sm",children:"Preview will appear when agent is done working"})]})}function il(){return(0,y.jsxs)("div",{className:"flex flex-col items-center gap-2","data-sentry-component":"NoCodeCard","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)(is.A,{className:"h-12 w-12","data-sentry-element":"EyeClosed","data-sentry-source-file":"pane-cards.tsx"}),(0,y.jsx)("p",{className:"font-medium",children:"No preview available"})]})}function ii(){return(0,y.jsxs)("div",{className:"flex flex-col items-center gap-4","data-sentry-component":"ErrorCard","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)(s8.A,{className:"h-12 w-12","data-sentry-element":"Unlink","data-sentry-source-file":"pane-cards.tsx"}),(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("p",{className:"font-medium",children:"Something went wrong"}),(0,y.jsx)("p",{className:"text-text-tertiary text-sm",children:"Please start a new chat and try again."})]}),(0,y.jsx)(E.$,{variant:"secondary",size:"md",className:"flex-1 gap-1 sm:flex-initial",asChild:!0,"data-sentry-element":"Button","data-sentry-source-file":"pane-cards.tsx",children:(0,y.jsxs)(N.Link,{href:"/?chat-modality=code","data-sentry-element":"Link","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)(es.A,{className:"size-3.5","data-sentry-element":"SquarePen","data-sentry-source-file":"pane-cards.tsx"}),"New Chat"]})})]})}let io=(0,nf.default)(()=>Promise.all([a.e(8895),a.e(3135),a.e(401)]).then(a.bind(a,60401)),{loadableGenerated:{webpack:()=>[60401]},ssr:!1,loading:()=>(0,y.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,y.jsx)(sa.A,{className:"animate-spin text-gray-500"})})});function id(){var e,t;let[a]=aT(),n=aI(a),{data:s,error:r}=s$(null!=n?n:null),l=null!=(e=null==s?void 0:s.files)?e:[],[i]=aS(),o=(0,e5.d)("md");if(r)return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(ii,{})});if(!s)return null;if("pending"===s.status&&0===s.files.length)return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(ir,{statusText:"Thinking..."})});let d=null!=(t=l.find(e=>e.path===i))?t:l[0];return d?(0,y.jsx)("div",{className:"flex h-full flex-col","data-sentry-component":"CodePane","data-sentry-source-file":"code-pane.tsx",children:(0,y.jsxs)("div",{className:"flex flex-1",children:[!o&&(0,y.jsx)(ie,{className:"border-border-faint border-r",message:null!=n?n:null}),(0,y.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,y.jsx)(l8,{selectedFile:d,"data-sentry-element":"FileSelectorBar","data-sentry-source-file":"code-pane.tsx"}),(0,y.jsx)(io,{code:d.content,contentType:d.contentType,className:"flex-1","data-sentry-element":"CodeEditor","data-sentry-source-file":"code-pane.tsx"})]})]})}):(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(il,{})})}function ic(){let[e]=aT(),t=aI(e),{data:a,error:n}=s$(t),s=(0,U.g)(e=>e.markWebDevPreviewAsViewed);(0,M.useEffect)(()=>{(null==a?void 0:a.status)==="success"&&(null==t?void 0:t.id)&&s(t.id)},[null==a?void 0:a.status,null==t?void 0:t.id,s]);let[r]=aM();if(n)return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(ii,{})});if(!a)return null;if("build-error"===a.status){let e=0===a.files.length;return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:e?(0,y.jsx)(il,{}):(0,y.jsx)(ii,{})})}if("pending"===a.status){let e=a.files.length>0;return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(ir,{statusText:e?"Building...":"Thinking..."})})}return(0,y.jsx)("iframe",{src:a.previewUrl,className:"h-full w-full border-0",sandbox:"allow-scripts allow-same-origin allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-popups",allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth",title:"Option ".concat(e.toUpperCase()," Preview"),referrerPolicy:"origin-when-cross-origin","data-sentry-component":"PreviewPane","data-sentry-source-file":"preview-pane.tsx"},r)}function iu(){let[e]=a_();return(0,y.jsx)("div",{className:"flex h-full flex-col","data-sentry-component":"WebDevArtifact","data-sentry-source-file":"webdev-artifact.tsx",children:(0,y.jsx)("div",{className:"flex-1 overflow-hidden",children:"preview"===e?(0,y.jsx)(ic,{}):(0,y.jsx)(id,{})})})}function im(e){var t,a,n;let{className:s,hideOptionTabs:r=!1,showSelectedOnly:l=!1}=e,[i,o]=a_(),[d,c]=aT(),u=(0,_.kH)(_.Q_),m=aI(d),{data:p}=s$(null!=m?m:null),x=(null==p?void 0:p.status)==="success"?p.previewUrl:null,[,f]=aM(),{setLocation:h}=(0,eL.G)(),[g]=aS(),v=(0,e5.d)("md"),[b,j]=(0,M.useState)(!1),[,w]=(0,sO.A)(),N=null!=(t=null==p?void 0:p.files)?t:[],A=null!=(n=null!=(a=N.find(e=>e.path===g))?a:N[0])?n:null,C=e=>{j(e),e&&T.z.capture({action:"webdev_share_opened",params:{source:v?"drawer":"popover"}})},k=()=>{j(!1)},I=!x||u,S=!x,R="bg-surface-primary data-[state=active]:bg-surface-raised data-[state=active]:text-interactive-active data-[state=inactive]:text-interactive-normal";return(0,y.jsx)(lr.Bc,{"data-sentry-element":"TooltipProvider","data-sentry-component":"WebDevCanvas","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 flex-col",s),children:[!r&&!l&&(0,y.jsx)("div",{className:"border-border h-12 flex-none",children:(0,y.jsx)(lX.tU,{value:d,onValueChange:e=>void c(e,"canvas"),children:(0,y.jsxs)(lX.j7,{className:"bg-surface-primary grid h-12 grid-cols-2 items-stretch rounded-b-none p-0",children:[(0,y.jsx)(ip,{position:"a",className:"rounded-tl-none"}),(0,y.jsx)(ip,{position:"b",className:"rounded-tr-none"})]})})}),!r&&l&&(0,y.jsx)("div",{className:"border-border h-12 flex-none",children:(0,y.jsx)("div",{className:"flex h-12 items-center px-3",children:(0,y.jsxs)("span",{className:"text-text-secondary text-sm",children:["Option ",null==d?void 0:d.toUpperCase()]})})}),(0,y.jsx)("div",{className:"border-border bg-surface-raised-alt flex-none",children:(0,y.jsxs)("div",{className:"flex h-12 items-center gap-2 px-2 py-1",children:[(0,y.jsx)(lX.tU,{value:i,onValueChange:e=>void o(e,"canvas"),"data-sentry-element":"Tabs","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsxs)(lX.j7,{className:"bg-surface-primary items-stretch","data-sentry-element":"TabsList","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(lX.Xi,{value:"preview","aria-label":"Preview",className:R,title:"Preview","data-sentry-element":"TabsTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(e9.A,{className:"h-4 w-4","data-sentry-element":"Eye","data-sentry-source-file":"webdev-canvas.tsx"})}),(0,y.jsx)(lX.Xi,{value:"code","aria-label":"Code",className:R,title:"Code","data-sentry-element":"TabsTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(eW.A,{className:"h-4 w-4","data-sentry-element":"Code","data-sentry-source-file":"webdev-canvas.tsx"})})]})}),(0,y.jsxs)("div",{className:"border-border-faint bg-surface-primary flex h-9 flex-1 items-center gap-2 rounded-md border px-2 py-1",children:[(0,y.jsxs)(lr.m_,{open:!!x&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(lr.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("span",{children:(0,y.jsx)(E.$,{variant:"ghost",size:"icon",className:"size-6 shrink-0 p-0",disabled:!x,onClick:()=>{f(e=>e+1)},"data-sentry-element":"Button","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(sM.A,{className:"size-3.5","data-sentry-element":"RefreshCw","data-sentry-source-file":"webdev-canvas.tsx"})})})}),(0,y.jsx)(lr.ZI,{"data-sentry-element":"TooltipContent","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("p",{children:"Refresh preview"})})]}),(0,y.jsx)("input",{type:"text",value:u?"Log in to view and share URL":null!=x?x:"",readOnly:!0,tabIndex:u?-1:void 0,onClick:u?()=>h("webdev-preview-url"):void 0,className:(0,B.cn)("text-text-secondary min-w-0 flex-1 bg-transparent text-sm tracking-wide focus:outline-none",{"cursor-pointer":u})}),(0,y.jsxs)(lr.m_,{open:!I&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(lr.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("span",{className:I?"cursor-not-allowed":void 0,children:(0,y.jsx)(sN.i,{size:14,className:"size-6 shrink-0 p-0",variant:"ghost",disabled:I,onClick:()=>w(null!=x?x:""),"data-sentry-element":"CopyButton","data-sentry-source-file":"webdev-canvas.tsx"})})}),(0,y.jsx)(lr.ZI,{"data-sentry-element":"TooltipContent","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("p",{children:"Copy URL"})})]}),(0,y.jsxs)(lr.m_,{open:!I&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(lr.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("span",{className:I?"cursor-not-allowed":void 0,children:(0,y.jsx)(E.$,{variant:"ghost",size:"icon",className:"size-6 shrink-0",disabled:I,onClick:()=>{x&&window.open(x,"_blank","noopener,noreferrer")},"data-sentry-element":"Button","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(lZ.A,{className:"size-3.5","data-sentry-element":"ExternalLink","data-sentry-source-file":"webdev-canvas.tsx"})})})}),(0,y.jsx)(lr.ZI,{"data-sentry-element":"TooltipContent","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("p",{children:"Open in new tab"})})]})]}),v?(0,y.jsxs)(tw._s,{open:b,onOpenChange:C,children:[(0,y.jsx)(tw.Uz,{asChild:!0,children:(0,y.jsx)(E.$,{variant:"tertiary",disabled:S,"aria-label":"Share",children:"Share"})}),(0,y.jsxs)(tw.zj,{children:[(0,y.jsx)(tw.gk,{className:"sr-only",children:"Share"}),(0,y.jsx)("div",{className:"pb-8 pt-4",children:x&&m&&(0,y.jsx)(l5,{previewUrl:x,messageId:m.id,selectedFile:A,onClose:k,requiresLogin:u,onLoginRequired:()=>{k(),h("webdev-preview-url")}})})]})]}):(0,y.jsxs)(ek.AM,{open:b,onOpenChange:C,children:[(0,y.jsx)(ek.Wv,{asChild:!0,children:(0,y.jsx)(E.$,{variant:"tertiary",disabled:S,"aria-label":"Share",children:"Share"})}),(0,y.jsx)(ek.hl,{align:"end",className:"bg-surface-primary border-border-faint/10 w-52 rounded-lg border p-0 shadow-[2px_4px_24px_0px_rgba(0,0,0,0.12)]",children:x&&m&&(0,y.jsx)(l5,{previewUrl:x,messageId:m.id,selectedFile:A,onClose:k,requiresLogin:u,onLoginRequired:()=>{k(),h("webdev-preview-url")}})})]})]})}),(0,y.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,y.jsx)(iu,{"data-sentry-element":"WebDevArtifact","data-sentry-source-file":"webdev-canvas.tsx"})})]})})}function ip(e){let{position:t,className:a}=e,n=(0,ef.g)(e=>e.models),s=aI(t),r=sX(s),l=(0,U.g)(e=>e.pairwiseFeedbacks),i=s?sJ(s,l):null,o=s?n.find(e=>e.id===s.modelId):null,d=null==o?void 0:o.organization;return(0,y.jsxs)(lX.Xi,{className:(0,B.cn)("text-header-primary data-[state=active]:bg-surface-raised-alt flex gap-2 rounded-b-none rounded-t-2xl data-[state=active]:shadow-[0_6px_4px_0_rgba(0,0,0,0.25)]",a),value:t,"data-sentry-element":"TabsTrigger","data-sentry-component":"WebDevTabTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:["string"==typeof d&&(0,y.jsx)(eM.D,{organization:d,className:"size-4"}),s?ne(s,n,"Option"):null,r?(0,y.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500"}):null,"win"==i?(0,y.jsx)(sW.A,{className:"text-interactive-positive",size:16}):null]})}function ix(){let[e,t]=aR(),[a]=aT(),n=(0,U.g)(e=>e.mode);return(0,y.jsx)(tw._s,{open:e,onOpenChange:t,"data-sentry-element":"Drawer","data-sentry-component":"MobileWebDevDrawer","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:(0,y.jsxs)(tw.zj,{className:"h-[95svh] max-h-[95svh]","data-sentry-element":"DrawerContent","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:[(0,y.jsx)(tw.BE,{className:"p-0","data-sentry-element":"DrawerHeader","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:(0,y.jsxs)(tw.gk,{className:"sr-only","data-sentry-element":"DrawerTitle","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:["WebDev Preview - Option ",null==a?void 0:a.toUpperCase()]})}),(0,y.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,y.jsx)(im,{className:"h-full",hideOptionTabs:n===b.lY.DIRECT,showSelectedOnly:n!==b.lY.DIRECT,"data-sentry-element":"WebDevCanvas","data-sentry-source-file":"mobile-webdev-drawer.tsx"})})]})})}function ih(e){let{messageA:t,messageB:a,firstMessageMap:n}=e,s=ly(t,a,n),r=(0,U.g)(e=>e.mode),l=(0,U.g)(e=>e.lastMessageIds),i=t&&a&&l.includes(t.id)&&l.includes(a.id)&&r!==b.lY.DIRECT;return(0,y.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"WebDevMessageGroup","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsx)(lw,{messageA:t,messageB:a,selectedMessage:s,"data-sentry-element":"SideBySideOrStackedMessageGroup","data-sentry-source-file":"webdev-message-group.tsx"}),i&&(0,y.jsx)(ig,{messageA:t,messageB:a})]})}function ig(e){let{messageA:t,messageB:a}=e,{handleVote:n,createTieVoteHandlers:s}=rs(),r=(0,U.g)(e=>e.pairwiseFeedbacks),l=t?sJ(t,r):null,i=rr(),o=t.status===b.nH.PENDING||a.status===b.nH.PENDING;if(null!==l||o)return null;let{handleTieMouseEnter:d,handleBothBadMouseEnter:c,handleMouseLeave:u}=s();return(0,y.jsxs)("div",{className:"flex flex-wrap items-center gap-2","data-sentry-component":"TieVoteButtons","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsxs)(E.$,{size:"sm",variant:"outline",className:"hover:bg-interactive-positive/12 hover:text-interactive-positive hover:border-interactive-positive rounded-full px-2 py-1 text-xs",disabled:!i,onClick:()=>n(b.sb.TIE),onMouseEnter:d,onMouseLeave:u,"data-sentry-element":"Button","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsx)(sF.A,{size:10,"data-sentry-element":"ThumbsUp","data-sentry-source-file":"webdev-message-group.tsx"}),"Both options are good"]}),(0,y.jsxs)(E.$,{size:"sm",variant:"outline",className:"hover:bg-interactive-negative/12 hover:text-interactive-negative hover:border-interactive-negative rounded-full px-2 py-1 text-xs",disabled:!i,onClick:()=>n(b.sb.BOTH_BAD),onMouseEnter:c,onMouseLeave:u,"data-sentry-element":"Button","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsx)(sH.A,{size:10,"data-sentry-element":"ThumbsDown","data-sentry-source-file":"webdev-message-group.tsx"}),"Both options are bad"]})]})}function iv(e){let{evaluationFormProps:t,className:a}=e,{messageThreads:n}=ns(),{ref:s}=(0,rc.Wx)({threshold:0,rootMargin:tB});return(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 flex-col",a),"data-sentry-component":"MobileChat","data-sentry-source-file":"mobile-chat.tsx",children:[(0,y.jsx)("div",{className:"flex-none",children:(0,y.jsx)(tO,{showLoginButton:!1,"data-sentry-element":"EvaluationHeader","data-sentry-source-file":"mobile-chat.tsx"})}),(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col",children:(0,y.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,y.jsx)(tA,{className:"min-h-0 flex-1","data-sentry-element":"ScrollArea","data-sentry-source-file":"mobile-chat.tsx",children:(0,y.jsx)("div",{className:"relative h-full w-full overscroll-none",children:(0,y.jsx)("div",{className:(0,B.cn)("flex flex-col items-center","px-3 [--chat-padding:theme(spacing.3)]"),children:(0,y.jsxs)("ol",{className:(0,B.cn)("mt-4 flex w-full max-w-screen-xl grow flex-col-reverse justify-end gap-3 overscroll-none pb-2 duration-500"),children:[(0,y.jsx)("div",{className:"h-0",ref:e=>{s(e)}}),n.map((e,t)=>{var a,s;let r=e.get(aD.BQ.a),l=e.get(aD.BQ.b);if((null==r?void 0:r.role)===b.PG.USER)return(0,y.jsx)(ro,{message:r},null==r?void 0:r.id);let i="".concat(null!=(a=null==r?void 0:r.id)?a:"idx-".concat(t,"-a"),":").concat(null!=(s=null==l?void 0:l.id)?s:"idx-".concat(t,"-b"));return(0,y.jsx)(ih,{messageA:r,messageB:l,firstMessageMap:n[0]},i)})]})})})}),(0,y.jsx)("div",{className:"flex flex-col items-center px-3 pb-4",children:(0,y.jsx)("div",{className:"w-full max-w-screen-xl",children:(0,y.jsx)(lh,{...t,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"mobile-chat.tsx"})})})]})}),(0,y.jsx)(ix,{"data-sentry-element":"MobileWebDevDrawer","data-sentry-source-file":"mobile-chat.tsx"})]})}function iy(e){let{evaluationFormProps:t,className:a}=e,{messageThreads:n,latestMessages:s}=ns(),{ref:r,inView:l}=(0,rc.Wx)({threshold:0,rootMargin:tB});return lg({checkpointInView:l,lastMessagesArr:s}),(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 flex-col",a),"data-sentry-component":"SideChat","data-sentry-source-file":"side-chat.tsx",children:[(0,y.jsx)("div",{className:"flex-none",children:(0,y.jsx)(tO,{showLoginButton:!1,"data-sentry-element":"EvaluationHeader","data-sentry-source-file":"side-chat.tsx"})}),(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col",children:(0,y.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,y.jsx)(tA,{className:"min-h-0 flex-1","data-sentry-element":"ScrollArea","data-sentry-source-file":"side-chat.tsx",children:(0,y.jsx)("div",{className:"relative h-full w-full overscroll-none",children:(0,y.jsx)("div",{className:(0,B.cn)("flex flex-col items-center","px-[--chat-padding] [--chat-padding:theme(spacing.4)]"),children:(0,y.jsxs)("ol",{className:(0,B.cn)("mt-8 flex w-full max-w-screen-xl grow flex-col-reverse justify-end gap-4 overscroll-none pb-2 duration-500"),children:[(0,y.jsx)("div",{className:"h-0",ref:e=>{r(e)}}),n.map((e,t)=>{var a,s;let r=e.get(aD.BQ.a),l=e.get(aD.BQ.b);if((null==r?void 0:r.role)===b.PG.USER)return(0,y.jsx)(ro,{message:r},null==r?void 0:r.id);let i="".concat(null!=(a=null==r?void 0:r.id)?a:"idx-".concat(t,"-a"),":").concat(null!=(s=null==l?void 0:l.id)?s:"idx-".concat(t,"-b"));return(0,y.jsx)(ih,{messageA:r,messageB:l,firstMessageMap:n[0]},i)})]})})})}),(0,y.jsx)("div",{className:"flex flex-col items-center px-4 pb-6",children:(0,y.jsx)("div",{className:"w-full md:max-w-screen-xl",children:(0,y.jsx)(lh,{...t,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"side-chat.tsx"})})})]})})]})}function ib(e){let{evaluationFormProps:t}=e,a=(0,e5.d)("md"),n=(0,U.g)(e=>e.mode);return(0,y.jsx)(aA,{"data-sentry-element":"WebDevStateProvider","data-sentry-component":"WebDevArena","data-sentry-source-file":"webdev-arena.tsx",children:a?(0,y.jsx)(iv,{evaluationFormProps:t,className:"h-full"}):(0,y.jsxs)(lq,{direction:"horizontal",children:[(0,y.jsx)(l$,{defaultSize:30,minSize:25,maxSize:50,children:(0,y.jsx)(iy,{evaluationFormProps:t,className:"h-full"})}),(0,y.jsx)(lK,{className:"data-[resize-handle-state=drag]:w-[2px] data-[resize-handle-state=drag]:bg-[#BDD1FF]"}),(0,y.jsx)(l$,{defaultSize:70,minSize:50,maxSize:75,children:(0,y.jsx)(im,{className:"h-full",hideOptionTabs:n===b.lY.DIRECT})})]})})}var ij=function(e){return e.WELCOME_SCREEN="welcome_screen",e.WEBDEV_MODE="webdev_mode",e.EVALUATION_CHAT="evaluation_chat",e.NEW_PAGE_PLACEHOLDER="new_page_placeholder",e.LOGGED_USER_PLACEHOLDER="logged_user_placeholder",e}(ij||{});function iw(){let e=(0,M.useRef)(null),t=(0,M.useRef)(null),a=(0,U.g)((0,H.k)(e=>({id:e.id,mode:e.mode,modality:e.modality,messagesLength:e.messages.length,loading:e.loading,hasViewedLatestResponses:e.hasViewedLatestResponses}))),s=(0,_.kH)(e=>e.user),r=(0,_.kH)(_.Q_),l=(0,F.usePathname)(),i=(0,M.useRef)(null),[o,d]=(0,M.useState)(!1),c=l.startsWith("/c/")&&"/c"!==l,u="/c/new"===l?"new_page_placeholder":c&&a.loading?"evaluation_chat":c||0!==a.messagesLength?a.modality===b.Jg.WEBDEV?"webdev_mode":"evaluation_chat":null==s||r?"welcome_screen":"logged_user_placeholder",{messageThreads:m,latestMessages:p}=ns(),{fileUploaderProps:x,isImageUploadEnabled:f,handlePaste:h}=function(e){let[t,a]=(0,I.fp)(eP),{show:s}=sP(),[,r]=(0,eF.Uh)(),{mode:l,modality:i,setModality:o,messages:d}=(0,U.g)((0,H.k)(e=>({mode:e.mode,modality:e.modality,setModality:e.setModality,messages:e.messages}))),{modelAId:c,modelBId:u,models:m}=(0,ef.g)(e=>e),p=(0,M.useMemo)(()=>ev(l,c,u,m,i),[l,c,u,m,i]),x=(0,M.useCallback)(e=>{a(t=>{var a;let n=[...t];return(null==(a=n[e])?void 0:a.preview)&&URL.revokeObjectURL(n[e].preview),n.splice(e,1),n})},[a]),f=(0,M.useMemo)(()=>{if(l===n.BATTLE)return!0;for(let s of l===n.DIRECT?[c]:[c,u]){var e,t,a;let n=m.find(e=>e.id===s),r=null!=(a=null==n||null==(t=n.capabilities)||null==(e=t.inputCapabilities)?void 0:e.image)&&a;if("object"==typeof r&&!1===r.multipleImages)return!1}return!0},[l,c,u,m]),h=(0,M.useCallback)(n=>{let r=n.filter(e=>e.type.startsWith("image/"));if(r.length>0&&!p)return void console.warn("Selected model(s) do not support image input");if(!f&&t.length+r.length>1)return void D.oR.warning("Multiple images not supported",{description:"Selected model only supports single image upload"});if(t.length+r.length>10)return void s();let l=n.map(e=>({file:e,preview:e.type.startsWith("image/")?URL.createObjectURL(e):void 0}));a(e=>[...e,...l]),e&&setTimeout(()=>{e()},0)},[t.length,f,p,e,a,s]),g=(0,M.useCallback)(e=>{let t=e.clipboardData.items,a=[];for(let e of t)if(e.type.startsWith("image/")){let t=e.getAsFile();t&&a.push(t)}a.length>0&&(e.preventDefault(),h(a))},[h]);(0,M.useEffect)(()=>{!f&&t.length>1&&(a(t.slice(0,1)),D.oR.warning("Multiple images removed",{description:"Selected model only supports single image. Keeping first image only."}))},[t,f,a]);let v=(0,lV.A)(t);(0,M.useEffect)(()=>{var e;l===n.BATTLE&&t.length>0&&(null!=(e=null==v?void 0:v.length)?e:0)===0&&0===d.length&&i!==b.Jg.VIDEO&&i!==b.Jg.IMAGE&&i!==b.Jg.AUTO&&(o(b.Jg.IMAGE),r(b.Jg.IMAGE))},[t.length,null==v?void 0:v.length,i,o,r,d,l]);let j=function(e){let{onFilesSelected:t,attachments:a,onRemoveAttachment:n,isImageUploadEnabled:s=!0}=e,r=(0,M.useCallback)(e=>{if(e.length>0){if(!s)return void D.oR.error("Selected model(s) do not support image input",{dismissible:!0});t(e)}},[t,s]),{getRootProps:l,getInputProps:i,isDragActive:o}=(0,lU.VB)({onDrop:r,accept:lF,maxSize:0xf00000,noClick:!0,onDropRejected:lH});return{getRootProps:l,getInputProps:i,isDragActive:o,renderAttachments:()=>s&&0!==a.length?(0,y.jsx)("div",{className:"dark flex flex-wrap gap-2","data-sentry-component":"renderAttachments","data-sentry-source-file":"file-uploader.tsx",children:a.map((e,t)=>(0,y.jsxs)("div",{className:"group relative h-16 w-16 overflow-hidden rounded-lg",children:[e.preview?(0,y.jsx)("img",{src:e.preview,alt:e.file.name,className:(0,B.cn)("bg-surface-floating h-full w-full object-cover",{"opacity-10":e.error})}):(0,y.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-100",children:(0,y.jsx)("span",{className:"text-xxs line-clamp-3 break-words p-1 text-center",children:e.file.name})}),e.error&&(0,y.jsxs)("div",{className:"bg-interactive-negative/20 border-interactive-negative text-interactive-negative absolute inset-0 flex flex-col items-center justify-center gap-1 rounded-lg border border-dashed",children:[(0,y.jsx)(ng.A,{size:14}),(0,y.jsx)("span",{className:"text-[10px] font-normal",children:"Error"})]}),e.uploading&&!e.error&&(0,y.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,y.jsx)(lP,{className:"text-interactive-active h-4 w-4 animate-spin"})}),(0,y.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 bg-black opacity-0 transition-opacity group-hover:opacity-50"}),(0,y.jsx)("div",{className:"absolute right-1 top-1",children:(0,y.jsx)(E.$,{variant:"secondary",onClick:e=>{e.preventDefault(),n(t)},className:(0,B.cn)("border-border-medium bg-surface-floating touch-hitbox rounded-full border p-1 opacity-0 transition-opacity group-hover:opacity-100",{"opacity-100":sA.Fr}),"aria-label":"Remove file",children:(0,y.jsx)(eS.A,{size:10,className:"text-interactive-active"})})})]},t))}):null}}({onFilesSelected:h,attachments:t,onRemoveAttachment:x,isImageUploadEnabled:p});return(0,M.useEffect)(()=>()=>{t.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)})},[t]),{handleRemoveAttachment:x,handleFilesSelected:h,handlePaste:g,fileUploaderProps:j,isImageUploadEnabled:p}}(()=>{var t;null==(t=e.current)||t.focus()}),g=(0,M.useCallback)(()=>{var e;null==(e=t.current)||e.click()},[]),{scrollContainerRef:v,scrollToBottom:j}=function(e){var t,a;let{hasViewedLatestResponses:n,checkpointRef:s,messagesLength:r=0,evaluationId:l}=e,i=(0,M.useRef)(null),[o,d]=(0,lG.A)(),c=(0,M.useRef)(!1),u=(0,M.useRef)(l),{y:m}=(0,lW.A)(i),p=(null!=(a=null==(t=i.current)?void 0:t.scrollHeight)?a:m)-m-d.height,x=(0,M.useCallback)(()=>{if(null==s?void 0:s.current)s.current.scrollIntoView({behavior:"smooth",block:"end"});else{var e;let t=null==(e=i.current)?void 0:e.querySelector("[data-radix-scroll-area-viewport]");t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}},[s]),f=(0,M.useCallback)(()=>{var e;let t=null==(e=i.current)?void 0:e.querySelector("[data-radix-scroll-area-viewport]");t&&t.scrollTo({top:t.scrollHeight+100,behavior:"instant"})},[]);return(0,M.useLayoutEffect)(()=>{u.current!==l&&(c.current=!1,u.current=l),0!==r&&!c.current&&(null==s?void 0:s.current)&&(f(),c.current=!0)},[r,s,f,l]),{scrollContainerRef:i,scrollViewportRef:o,scrollViewportDimensions:d,distanceFromBottom:p,showScrollDownButton:p>100&&!n,scrollToBottom:x}}({hasViewedLatestResponses:a.hasViewedLatestResponses,checkpointRef:i,messagesLength:a.messagesLength,evaluationId:a.id}),{sendMessage:w}=function(e){let{setIsSubmitting:t,textAreaRef:a,scrollToBottom:n}=e,s=(0,U.g)((0,H.k)(e=>({id:e.id,noMessages:0===e.messages.length,modality:e.modality,mode:e.mode}))),r=(0,_.kH)(e=>e.user),l=(0,_.kH)(e=>e.userId),i=(0,_.kH)(_.Q_),o=(0,ef.g)(e=>e),{setOpen:d,setPromiseHandlers:c}=L(),{appendMultiStream:u}=a1(),[m,p]=(0,I.fp)(eP),{reset:x}=r_(),{setOpen:f}=(0,V.cL)(),h=(0,e5.d)("md"),{setLocation:g}=(0,eL.G)(),v=(0,M.useCallback)(async e=>await Promise.all(e.map(async(e,t)=>{if(e.isAlreadyUploaded&&e.uploadedUrl)return{key:e.file.name,url:e.uploadedUrl,mimeType:e.file.type};try{return p(e=>e.map((e,a)=>a===t?{...e,uploading:!0}:e)),await rS(e.file)}catch(e){throw p(e=>e.map((e,a)=>a===t?{...e,error:"Upload failed"}:e)),e}})),[p]);return{sendMessage:(0,M.useCallback)(async(e,y,j)=>{let w=null!=j?j:m;if(!e.trim()&&0===w.length)return;let N=async()=>{try{var r,i,d,c,m,g,j,N,E;t(!0),sA.Fr&&(null==(r=a.current)||r.blur());let A=w.length>0?await v(w):[],C=s.mode===b.lY.BATTLE?null:null!=(i=null==o?void 0:o.modelAId)?i:null,_=s.mode===b.lY.SIDE_BY_SIDE&&null!=(d=null==o?void 0:o.modelBId)?d:null,k=w.some(e=>!0===e.isAlreadyUploaded);T.z.capture({action:"chat_submit",params:{is_first_message:s.noMessages,mode:s.mode,user_id:l,modality:s.modality,evaluation_session_id:s.id,model_a_id:C,model_b_id:_,has_attachments:A.length>0,attachments_count:A.length,input_length:e.length,has_edited_images:k}}),s.mode===b.lY.DIRECT?null==(m=window)||null==(c=m.gtag)||c.call(m,"event","conversion_event_chat_direct"):s.mode===b.lY.SIDE_BY_SIDE?null==(j=window)||null==(g=j.gtag)||g.call(j,"event","conversion_event_chat_sbs"):s.mode===b.lY.BATTLE&&(null==(E=window)||null==(N=E.gtag)||N.call(E,"event","conversion_event_chat_battle")),p([]),x(),u({content:e,experimental_attachments:A.map(e=>({name:e.key,contentType:e.mimeType,url:e.url})),metadata:y}),s.noMessages&&(window.history.replaceState({},"","/c/".concat(s.id)),document.cookie.split("; ").some(e=>e.startsWith("".concat(aD.pC.sidebarState,"=")))||h||f(!0)),n&&setTimeout(()=>{n()},100)}catch(e){console.error("Failed to send message:",e)}finally{t(!1)}};try{if(((null==r?void 0:r.touConsentTimestamp)==null||new Date(r.touConsentTimestamp)<tU)&&await new Promise((e,t)=>{c({resolve:e,reject:t}),d(!0)}),s.modality===b.Jg.VIDEO&&i)return void g("video-modality-chat-submit");await N()}catch(e){console.error("Failed to send message",e)}},[u,s,h,m,o,x,n,p,t,g,c,f,d,a,v,r,l,i])}}({setIsSubmitting:d,textAreaRef:e,scrollToBottom:j}),N=(0,M.useMemo)(()=>({sendMessage:w,latestMessages:p,isSubmitting:o,textAreaRef:e,handlePaste:h,fileUploaderProps:x,isImageUploadEnabled:f}),[w,o,e,h,x,p,f]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{id:tP,className:"relative flex h-full flex-col overflow-hidden overscroll-none",children:["webdev_mode"!==u&&(0,y.jsx)(tO,{}),(0,y.jsx)("div",{className:"flex min-h-0 flex-1 justify-center overflow-hidden overscroll-none",children:(0,y.jsx)("main",{className:(0,B.cn)("relative flex h-full min-w-0 flex-1 flex-col overflow-hidden overscroll-none outline-none","welcome_screen"===u&&"items-center justify-center"),...x.getRootProps(),children:(()=>{switch(u){case"welcome_screen":return(0,y.jsx)(lJ,{evaluationFormProps:N,textAreaRef:e,fileInputRef:t,openFilePicker:g});case"webdev_mode":return(0,y.jsx)(ib,{evaluationFormProps:N});case"evaluation_chat":default:return(0,y.jsx)(lz,{evaluationFormProps:N,textAreaRef:e,fileInputRef:t,openFilePicker:g,scrollableAreaRef:v,checkpointElementRef:i,messageThreads:m,latestMessages:p});case"new_page_placeholder":return(0,y.jsx)(lO,{evaluationFormProps:N,textAreaRef:e,fileInputRef:t,openFilePicker:g});case"logged_user_placeholder":return(0,y.jsx)(lO,{evaluationFormProps:N,textAreaRef:e,fileInputRef:t,openFilePicker:g,message:"Welcome back"})}})()})})]}),(0,y.jsx)(e4,{"data-sentry-element":"ChangeModalityModal","data-sentry-source-file":"evaluation.tsx"}),(0,y.jsx)(P,{"data-sentry-element":"TermsOfUseModal","data-sentry-source-file":"evaluation.tsx"})]})}},67551:(e,t,a)=>{Promise.resolve().then(a.bind(a,66654))},70641:(e,t,a)=>{"use strict";a.d(t,{bq:()=>p,eb:()=>g,gC:()=>h,l6:()=>c,s3:()=>u,yv:()=>m});var n=a(68208),s=a(6917),r=a(71341),l=a(97919),i=a(3574),o=a(71035),d=a(35388);let c=s.bL,u=s.YJ,m=s.WT,p=d.forwardRef((e,t)=>{let{className:a,children:i,...o}=e;return(0,n.jsxs)(s.l9,{ref:t,className:(0,r.cn)("border-border text-header-secondary hover:text-header-primary data-[state=open]:text-text-tertiary ring-offset-background placeholder:text-muted-foreground focus:ring-ring group flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border px-3 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:block [&>span]:truncate",a),...o,children:[i,(0,n.jsx)(s.In,{asChild:!0,children:(0,n.jsx)(l.A,{className:"h-[18px] w-[18px] transition-transform duration-200 group-data-[state=open]:-rotate-180"})})]})});p.displayName=s.l9.displayName;let x=d.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(s.PP,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,n.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=s.PP.displayName;let f=d.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(s.wn,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=s.wn.displayName;let h=d.forwardRef((e,t)=>{let{className:a,children:l,position:i="popper",...o}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsxs)(s.UC,{ref:t,className:(0,r.cn)("border-border-faint bg-surface-primary text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[9999] max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-0",a),position:i,...o,children:[(0,n.jsx)(x,{}),(0,n.jsx)(s.LM,{className:(0,r.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,n.jsx)(f,{})]})})});h.displayName=s.UC.displayName,d.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(s.JU,{ref:t,className:(0,r.cn)("px-2 py-1.5 text-sm font-semibold",a),...l})}).displayName=s.JU.displayName;let g=d.forwardRef((e,t)=>{let{className:a,children:l,showCheck:i=!0,...d}=e;return(0,n.jsxs)(s.q7,{ref:t,className:(0,r.cn)("hover:bg-surface-highlight focus:bg-surface-highlight data-[state=checked]:text-text-tertiary relative flex w-full cursor-default select-none items-center rounded-sm p-2 text-sm font-medium outline-none transition-colors duration-200 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,n.jsx)(s.p4,{children:l}),i&&(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.VF,{children:(0,n.jsx)(o.A,{className:"size-4"})})})]})});g.displayName=s.q7.displayName,d.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(s.wv,{ref:t,className:(0,r.cn)("bg-muted -mx-1 my-1 h-px",a),...l})}).displayName=s.wv.displayName},73227:(e,t,a)=>{"use strict";a.d(t,{U:()=>s});var n=a(35388);let s=()=>{let[e,t]=(0,n.useState)("idle"),a=(0,n.useRef)(null),s=(0,n.useRef)(null);return{copyState:e,handleClick:()=>{null!=a.current&&clearTimeout(a.current),null!=s.current&&clearTimeout(s.current),t("copied"),a.current=setTimeout(()=>{t("resetting"),s.current=setTimeout(()=>{t("idle")},300)},2e3)}}}},76518:e=>{e.exports={container:"code-block_container__lbMX4"}},87135:(e,t,a)=>{"use strict";a.d(t,{FO:()=>r,Yq:()=>n,ZV:()=>s});let n=e=>{if(isNaN(e.getTime()))return"N/A";let t=new Date;return e>t?(console.warn("Future date detected: ".concat(e,", using today's date instead")),t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(/(\w+) (\d+), (\d+)/,"$1 $2, $3")):e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(/(\w+) (\d+), (\d+)/,"$1 $2, $3")},s=e=>null==e?"0":e.toLocaleString("en-US"),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return null;let a=("string"==typeof e?new Date(e):e).getTime()-t.getTime();if(a<=0)return null;let n=Math.ceil(a/1e3),s=Math.ceil(a/6e4),r=Math.ceil(a/36e5);return n<60?"".concat(n," second").concat(1===n?"":"s"):s<60?"".concat(s," minute").concat(1===s?"":"s"):"".concat(r," hour").concat(1===r?"":"s")}},87214:(e,t,a)=>{"use strict";a.d(t,{G:()=>l});var n=a(68208),s=a(71341),r=a(10358);function l(e){let{children:t,content:a,open:l,className:i,wrapDisabled:o=!1}=e,d=o?(0,n.jsx)("span",{className:"inline-block",children:t}):t;return(0,n.jsxs)(r.m_,{open:l,"data-sentry-element":"Tooltip","data-sentry-component":"BasicTooltip","data-sentry-source-file":"basic-tooltip.tsx",children:[(0,n.jsx)(r.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"basic-tooltip.tsx",children:d}),(0,n.jsx)(r.ZI,{className:(0,s.cn)("bg-header-primary text-interactive-on-cta",i),"data-sentry-element":"TooltipContent","data-sentry-source-file":"basic-tooltip.tsx",children:a})]})}},91508:(e,t,a)=>{"use strict";a.d(t,{Lt:()=>u,pY:()=>p,wY:()=>m});var n=a(22629),s=a(65938),r=a(71341);let l=null,i=null,o=["javascript","typescript","ts","tsx","jsx","json","jsonc","html","css","python","bash","shell","markdown","yaml","sql","java","cpp","c","go","rust","php","ruby","swift","text","plaintext"],d=["github-light","github-dark"];async function c(){return l||i||(i=(0,s.O_)({themes:d,langs:o}),l=await i)}function u(){c()}async function m(e,t,a){let n=await c(),s=o.includes(t)?t:"plaintext";return n.codeToHtml(e,{lang:s,theme:a,transformers:[{pre(e){this.addClassToHast(e,"shiki-code-block")},code(e){e.properties.class=(0,r.cn)("whitespace-pre-wrap break-words")}}]})}async function p(e,t,a,s){let r=await c(),l=o.includes(t)?t:"plaintext",i=e,d=e.split("\n");return"create"===s?i=d.map(e=>"+".concat(e)).join("\n"):"delete"===s?i=d.map(e=>"-".concat(e)).join("\n"):/^[+-]/m.test(e)||(i=d.map(e=>"+".concat(e)).join("\n")),r.codeToHtml(i,{lang:l,theme:a,transformers:[(0,n.N6)(),{name:"diff-transformer",preprocess(e){return this.meta={originalLines:e.split("\n")},e},pre(e){this.addClassToHast(e,"shiki-code-block"),this.addClassToHast(e,"has-diff")},line(e,t){var a,n,s;let r=null!=(s=(null!=(n=null==(a=this.meta)?void 0:a.originalLines)?n:[])[t-1])?s:"";r.startsWith("+")?(this.addClassToHast(e,"line"),this.addClassToHast(e,"diff"),this.addClassToHast(e,"add")):r.startsWith("-")?(this.addClassToHast(e,"line"),this.addClassToHast(e,"diff"),this.addClassToHast(e,"remove")):r.startsWith(" ")&&(this.addClassToHast(e,"line"),this.addClassToHast(e,"diff"))},span(e,t,a){var n,s,r;let l=null!=(r=(null!=(s=null==(n=this.meta)?void 0:n.originalLines)?s:[])[t-1])?r:"";if(0===a&&(l.startsWith("+")||l.startsWith("-")||l.startsWith(" "))){let t=e=>{if(!e)return!1;if("text"===e.type&&e.value){let t=e.value;if(t.length>0&&(t.startsWith("+")||t.startsWith("-")||t.startsWith(" ")))return e.value=t.slice(1),!0}if(e.children&&Array.isArray(e.children)){for(let a of e.children)if(t(a))return!0}return!1};t(e)}}}]})}}}]);